<html>
<head>
	<meta charset="utf-8" />
	<title>VAL@GT Perceptive interaction study</title>
	<script src="js/jquery-1.11.2.min.js"></script>
	<script src="js/le.min.js"></script>
    <script>
    	LE.init('87db29d2-cd0d-41f2-a1da-4f6b2fe89290');    			 
    </script>   
    <script src="d3/d3.min.js"></script>
    <script type="text/javascript" src="js/textures.js"></script>
    <script type="text/javascript" src="js/questionOrderSets.js"></script>
	<link rel="stylesheet" href="css/d3.slider.css"/>
	<script type="text/javascript">
		//console.log(questionSets[62])
		function getRandomInt(min, max) {
  			return Math.floor(Math.random() * (max - min)) + min;
		}
		var userPlatform = navigator.platform;
		var logs = [];
		var coveredQuestions = [];
		var questionNumber = -1;
		var firstTime = 1;
		var submitPressed = 0;
		var questionCount = 0;
		var totalQuestionCount = 84;
		var currentdate = new Date(); 
		//var sessionUserId="user"+currentdate.getHours()+currentdate.getMinutes()+currentdate.getSeconds()+currentdate.getMilliseconds();
		function getCookie(cname) {
		    var name = cname + "=";
		    var ca = document.cookie.split(';');
		    for(var i=0; i<ca.length; i++) {
		        var c = ca[i];
		        while (c.charAt(0)==' ') c = c.substring(1);
		        if (c.indexOf(name) == 0) return c.substring(name.length, c.length);
		    }
		    //console.log("here")
		    return "";
		}
		var sessionUserId = getCookie("sessionUserId");
		//console.log(sessionUserId);
		var currentQuestionSetIndex = getRandomInt(0,100);
		var currentQuestionSet = questionSets[currentQuestionSetIndex];
		//console.log(questionSets[98].length)
		//console.log(questionSets[98])		
		var skipSendLogs = 1;
		var currentTextureQuestion="";
		//console.log(currentQuestionSet);
	</script>
	<style type="text/css">
	.circleareadragger{
      cursor: ew-resize;
    }
    .positionrotatehandler{
    	cursor: move;	
    }
    .rectareadragger{
    	cursor: nwse-resize;
    }
	</style>
</head>
<body>
	<div  id="maincontent" align="center">
		<br/>
		<div>
		<p style="display:inline" id="questionnumbertext"></p><a href="http://pistudy.herokuapp.com/">(Restart the study)</a>
		</div>
		<p id="questiontext"></p>
		<div id="viz" align="center"></div>
		<button id="increaseButton" onclick="increase()">decrease</button>
		<button id="decreaseButton" onclick="decrease()">increase</button>		
		<canvas id="mycanvas" height="500" width="500" class="quadratic" style="border:1px solid #000000;"></canvas><br/>
		<p id="instructionstext" style="font-size:15px;font-family:sans-serif;">
		You're all set to start the study.<br/>
		Perform the required interaction for each question in order to progress to the next one.<br/>
		Click "Start" to go to the questions.
		</p>
		<button onclick="selectNextQuestion()" id="nextbutton">Start</button>		
	</div>
	<div id="waitingscreen" align="center">		
		<p>Please wait for 10 seconds. We are using this time to process your logs and to ensure we don't miss any of the useful information you provided with your interactions. We really appreciate your patience.</p>
		<br>
		Kindly <b>do not</b> close this page before the timer expires.
		<br>
		<div> Time left: <span id="time"></span> (min:sec) </div>
	</div>
	<div id="closingnotes" align="center">
		<p>Thank you for your time.<br/>We will contact you via email to provide you with details about the payment. You may now close the browser.<!-- In order to be considered for the Starbucks gift vouchers, please enter your email address below and click "Submit"</p>
		<button onclick="submitEmail()">Submit</button>-->
		<!--<p id="completionconfirmationid"></p> document.getElementById('txtSecond').value-->
		<br/>
		If you have any questions, queries or concerns, please email us at: <a href="mailto:arjun.srinivasan.10@gmail.com">arjun.srinivasan.10@gmail.com</a> or <a href="mailto:endert@gatech.edu">endert@gatech.edu</a> 
	</div>
</body>
<script src="js/d3.slider.js"></script>
<script type="text/javascript">
	/*
	function submitEmail(){
		var email = document.getElementById('emailidbox').value;
		var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		LE.log(JSON.stringify({"user":sessionUserId,"userPlatform":userPlatform,"questionset":"","datetime":datetime,"question":"email","value":email,"start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"","questionNumber":"email"}));
		//console.log(JSON.stringify({"sessionUserId":sessionUserId,"email":email}));
		alert("Thank you for submitting your email. Your request to be considered for the $25 Starbucks gift vouchers has been confirmed. You may now close the browser window.")
	}
	*/
	$("#textbox").hide();
	$("#mycanvas").hide();
	$("#submitbutton").hide();
	$("#closingnotes").hide();	
	$("#waitingscreen").hide();
	$("#increaseButton").hide();
	$("#decreaseButton").hide();
	function objectPresentInList(object,list){
		for(var i=0;i<list.length;i++){
			if(object==list[i]){
				return 1;
			}
		}
		return 0;
	}
	function selectNextQuestion(){
		if(firstTime==1){
			$("#nextbutton").html('Next Question');
			//$("#submitbutton").show();
			$("#textbox").show();
			$("#nextbutton").hide();
			submitPressed=1;						
		}	
		
		if(submitPressed==0){
			alert("Please complete the task and click submit before going to next question.");
		}else{
			//console.log(currentQuestionSetIndex)
			//console.log(currentQuestionSet)
			$("#instructionstext").hide();
			$("#nextbutton").hide();
			sendLogs();
			if(questionCount!=totalQuestionCount){
				/*do{
					questionNumber = getRandomInt(1,57);
				}while(objectPresentInList(questionNumber,coveredQuestions)==1);
				coveredQuestions.push(questionNumber);
				*/
				questionNumber = currentQuestionSet[questionCount];
				//questionNumber = 6;
				//console.log(questionNumber);

				if(questionNumber==6 || questionNumber==14 || questionNumber==22 || questionNumber==30 ||questionNumber==38 || questionNumber==46 ||questionNumber==54 || questionNumber==71 ||questionNumber==72 || questionNumber==73 ||questionNumber==74 || questionNumber==75 ||questionNumber==76 || questionNumber==77){
					$("#nextbutton").css("margin-top","200px")
				}else{
					$("#nextbutton").css("margin-top","0px")
				}

				logs = [];
				submitPressed=0;
				//console.log(questionNumber);
				if(questionNumber==1){
					drawQ1();
				}else if(questionNumber==2){
					drawQ2();
				}else if(questionNumber==3){
					drawQ3();
				}else if(questionNumber==4){
					drawQ4();
				}else if(questionNumber==5){
					drawQ5();
				}else if(questionNumber==6){
					drawQ6();
				}else if(questionNumber==7){
					drawQ7();
				}else if(questionNumber==8){
					drawQ8();
				}else if(questionNumber==9){
					drawQ9();
				}
				else if(questionNumber==10){
					drawQ10();
				}
				else if(questionNumber==11){
					drawQ11();
				}
				else if(questionNumber==12){
					drawQ12();
				}
				else if(questionNumber==13){
					drawQ13();
				}
				else if(questionNumber==14){
					drawQ14();
				}
				else if(questionNumber==15){
					drawQ15();
				}
				else if(questionNumber==16){
					drawQ16();
				}
				else if(questionNumber==17){
					drawQ17();
				}
				else if(questionNumber==18){
					drawQ18();
				}
				else if(questionNumber==19){
					drawQ19();
				}
				else if(questionNumber==20){
					drawQ20();
				}
				else if(questionNumber==21){
					drawQ21();
				}
				else if(questionNumber==22){
					drawQ22();
				}
				else if(questionNumber==23){
					drawQ23();
				}
				else if(questionNumber==24){
					drawQ24();
				}
				else if(questionNumber==25){
					drawQ25();
				}
				else if(questionNumber==26){
					drawQ26();
				}
				else if(questionNumber==27){
					drawQ27();
				}
				else if(questionNumber==28){
					drawQ28();
				}
				else if(questionNumber==29){
					drawQ29();
				}
				else if(questionNumber==30){
					drawQ30();
				}
				else if(questionNumber==31){
					drawQ31();
				}
				else if(questionNumber==32){
					drawQ32();
				}
				else if(questionNumber==33){
					drawQ33();
				}
				else if(questionNumber==34){
					drawQ34();
				}
				else if(questionNumber==35){
					drawQ35();
				}
				else if(questionNumber==36){
					drawQ36();
				}
				else if(questionNumber==37){
					drawQ37();
				}
				else if(questionNumber==38){
					drawQ38();
				}
				else if(questionNumber==39){
					drawQ39();
				}
				else if(questionNumber==40){
					drawQ40();
				}
				else if(questionNumber==41){
					drawQ41();
				}
				else if(questionNumber==42){
					drawQ42();
				}
				else if(questionNumber==43){
					drawQ43();
				}
				else if(questionNumber==44){
					drawQ44();
				}
				else if(questionNumber==45){
					drawQ45();
				}
				else if(questionNumber==46){
					drawQ46();
				}
				else if(questionNumber==47){
					drawQ47();
				}
				else if(questionNumber==48){
					drawQ48();
				}
				else if(questionNumber==49){
					drawQ49();
				}
				else if(questionNumber==50){
					drawQ50();
				}
				else if(questionNumber==51){
					drawQ51();
				}
				else if(questionNumber==52){
					drawQ52();
				}
				else if(questionNumber==53){
					drawQ53();
				}
				else if(questionNumber==54){
					drawQ54();
				}
				else if(questionNumber==55){
					drawQ55();
				}
				else if(questionNumber==56){
					drawQ56();
				}
				else if(questionNumber==57){
					drawQ57();
				}
				else if(questionNumber==58){
					drawQ58();
				}
				else if(questionNumber==59){
					drawQ59();
				}
				else if(questionNumber==60){
					drawQ60();
				}
				else if(questionNumber==61){
					drawQ61();
				}
				else if(questionNumber==62){
					drawQ62();
				}
				else if(questionNumber==63){
					drawQ63();
				}
				else if(questionNumber==64){
					drawQ64();
				}
				else if(questionNumber==65){
					drawQ65();
				}
				else if(questionNumber==66){
					drawQ66();
				}
				else if(questionNumber==67){
					drawQ67();
				}
				else if(questionNumber==68){
					drawQ68();
				}
				else if(questionNumber==69){
					drawQ69();
				}
				else if(questionNumber==70){
					drawQ70();
				}
				else if(questionNumber==71){
					drawQ71();
				}
				else if(questionNumber==72){
					drawQ72();
				}
				else if(questionNumber==73){
					drawQ73();
				}
				else if(questionNumber==74){
					drawQ74();
				}
				else if(questionNumber==75){
					drawQ75();
				}
				else if(questionNumber==76){
					drawQ76();
				}
				else if(questionNumber==77){
					drawQ77();
				}
				else if(questionNumber==78){
					drawQ78();
				}
				else if(questionNumber==79){
					drawQ79();
				}
				else if(questionNumber==80){
					drawQ80();
				}
				else if(questionNumber==81){
					drawQ81();
				}
				else if(questionNumber==82){
					drawQ82();
				}
				else if(questionNumber==83){
					drawQ83();
				}
				else if(questionNumber==84){
					drawQ84();
				}
				questionCount+=1;
			}else{
				$("#maincontent").hide();
				$('#waitingscreen').show();
				var myVar;
				$(function() {
				    var fiveMinutes = 10,
				        display = $('#time'),
				        mins, seconds;
				    myVar = setInterval(function() {
				        mins = parseInt(fiveMinutes / 60)
				        seconds = parseInt(fiveMinutes % 60);
				        seconds = (seconds < 10) ? "0" + seconds : seconds;
				        
				        display.text(mins + ":" + seconds);
				        fiveMinutes--;
				        
				        if (fiveMinutes == 0) {
				            myStopFunction();
				        }
				    }, 1000);    
				});
				function myStopFunction() {
				    clearInterval(myVar);
				    $('#waitingscreen').hide();  
				    $("#closingnotes").show();
					var confirmationIDs=["ABCD1234","ABCD0987","ABCD2345","ABCD5678"];
					var index = getRandomInt(1,5);
					//$("#completionconfirmationid").text("Your confirmation of completion code is "+sessionUserId+".");					
					}							
			}
			$("#questionnumbertext").text("Question "+questionCount+" of "+totalQuestionCount+".");
		}
	}

//-----------------------------
//Questions 1-8 (make 50%)
//-----------------------------
	//Question 1
	function drawQ1(){
		var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();$
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"height_1","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});

		$("#mycanvas").hide();
		$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
		d3.selectAll("svg").remove();
		$("#questiontext").html("<p>Make the height of the rectangle <b>50%</b> of its current value.</p>");
		var svg, frameGroup, dragRect, dragBarTop, dragBarRight, rotateHandler,
	    x = 300, y = 400,
	    angle = 0,
	    width = 200, height = 100,
	    bar = 6,
	    that = this;
		svg = d3.select('#viz').append('svg').attr({
		    width: 800,
		    height: 550
		});

		svg.append("rect")
	       .attr("x",0)
	       .attr("y",0)
	       .attr("width",800)
	       .attr("height",550)
	       .attr("fill","white")
	       .style("stroke","black");

		frameGroup = svg.append('g')
		.attr({
		    'pointer-events': 'all',
		    'class': 'dummy frameGroup'
		});

		dragRectStatic = frameGroup.append('rect')
		.attr('class', 'dummy dragRectStatic')
		.attr('fill', 'black')
		.attr('fill-opacity', 0.2)
		.attr("x",x)
		.attr("y",y)
		.attr("width",width)
		.attr("height",height);


		dragRect = frameGroup.append('rect')
		.attr('class', 'dummy dragRect')
		.attr('fill', 'black')
		.attr('fill-opacity', 0.3);

		dragBarTop = frameGroup.append('rect')
		.attr('class', 'dummy dragBarTop')
		.attr('fill', 'black')
		.attr('fill-opacity', 0.6)
		.attr('cursor', 'ns-resize')
		.call(d3.behavior.drag().on('drag', function() {
		    height = height + (y - d3.event.y);
		    y = d3.event.y;
		    if (height < bar) {
		        return;
		    }
		    $("#nextbutton").show();
		    positionate();
		}));
		var skipLog=1;
		positionate();

		function positionate() {
		    var rotate, translate;
		    rotate = ' rotate(' + angle + ', ' + (width / 2) + ', ' + (height / 2) + ')';
		    translate = 'translate(' + x + ',' + y + ')';
		    dragRect.attr('transform', translate + rotate);
		    dragRect.attr('width', width);
		    dragRect.attr('height', height);

		    rotate = ' rotate(' + angle + ', ' + (width / 2) + ', ' + (height / 2) + ')';
		    translate = 'translate(' + x + ',' + y + ')';
		    dragBarTop.attr('transform', translate + rotate);
		    dragBarTop.attr('height', bar);
		    dragBarTop.attr('width', width);

			var currentdate = new Date(); 
			var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

			if(skipLog!=1){
		   		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"height_1","value":height,"start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});
		   	}
		 	skipLog=0;
		}
	}


//Question 2	
	function drawQ2(){
		var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"horizontal_direction_1","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});

		$("#mycanvas").hide();
		$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
		d3.selectAll("svg").remove();
		$("#questiontext").html("<p>Move the circle such that the distance from the target (gray rectangle on the right) is <b>50%</b> of its current value.</p>");
		
			var svg, frameGroup, dragRect, dragBarTop, dragBarRight, rotateHandler,
    x = 200, y = 100,
    angle = 0,
    width = 200, height = 100,
    bar = 6,
    that = this;

svg = d3.select('#viz').append('svg').attr({
    width: 1000,
    height: 300
});
svg.append("rect")
       .attr("x",0)
       .attr("y",0)
       .attr("width",1000)
       .attr("height",300)
       .attr("fill","white")
       .style("stroke","black");


frameGroup = svg.append('g')
.attr({
    'class': 'dummy frameGroup'
});

targetRect = frameGroup.append('rect')
.attr('class', 'targetRect')
.attr('fill', 'black')
.style('fill-opacity', '0.4')
.attr("x",900)
.attr("y",100)
.attr("width",5)
.attr("height",50);

frameGroup.append('circle')
				  .attr('class','dummy dragCircleRightStatic')				  
				  .attr('r',8)
				  .attr('cx',400)
				  .attr('cy',125)
				  .style('fill','black')
				  .style('fill-opacity',0.2);


dragCircleRight = frameGroup.append('circle')
.attr('class', 'dummy dragCircleRight')
.attr('r',8)
.attr('cx',x)
.attr('cy',25)
.attr('fill', 'black')
.attr('cursor', 'ew-resize')
.call(d3.behavior.drag().on('drag', function() {
    width = width + d3.event.dx;
    $("#nextbutton").show();
    positionate();
}));


var skipLog=1;
positionate();

function positionate() {
    var rotate, translate;
    translate = 'translate(' + (width) + ',' + y + ')';
    dragCircleRight.attr('transform', translate );

    var currentdate = new Date(); 
	var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
	
	//console.log(900-(width+200))
          if(skipLog!=1){    
      		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"horizontal_direction_1","value":900-(width+200),"start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});
    	}
    	skipLog=0;
	}
}

//Question 3
	function drawQ3(){
		var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"line_shape_1","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});

		$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
		d3.selectAll("svg").remove();
		$("#questiontext").html("<p>Make the curve <b>50%</b> of its current value.</p>");
		$("#mycanvas").show();
		(function() {

  var canvas, ctx, code, point, style, drag = null, dPoint,fakePoint;

  // define initial points
  function Init(quadratic) {
  	fakePoint = {
      p1: { x:100, y:250 },
      p2: { x:400, y:250 }
    };

  	point1 = {
      p1: { x:100, y:250 },
      p2: { x:400, y:250 }
    };
    
    if (quadratic) {
      point1.cp1 = { x: 250, y: 200 };      
    }
    else {
      point1.cp1 = { x: 150, y: 150 };
      point1.cp2 = { x: 350, y: 150 };
    }
    // default styles
    style1 = {
      curve:  { width: 2, color: "#ccc" },
      cpline: { width: 1, color: "#ffffff" },
      point1: { radius: 5, width: 1, color: "#ccc", fill: "rgba(255,255,255,0.5)", arc1: 0, arc2: 2 * Math.PI },
    }

    point = {
      p1: { x:100, y:250 },
      p2: { x:400, y:250 }
    };
    
    if (quadratic) {
      point.cp1 = { x: 250, y: 200 };
      fakePoint.cp1 = { x: 250, y: 225 };  
    }
    else {
      point.cp1 = { x: 150, y: 150 };
      point.cp2 = { x: 350, y: 150 };
    }
    
    // default styles
    style = {
      curve:  { width: 2, color: "#333" },
      cpline: { width: 1, color: "#ffffff" },
      point: { radius: 5, width: 1, color: "#333", fill: "rgba(255,255,255,0.5)", arc1: 0, arc2: 2 * Math.PI },
      fakePoint: { radius: 5, width: 1, color: "#333", fill: "rgba(255,255,255,0.5)", arc1: 0, arc2: 2 * Math.PI },
    }
    
    // line style defaults
    ctx.lineCap = "round";
    ctx.lineJoin = "round";
    
    // event handlers
    canvas.onmousedown = DragStart;
    canvas.onmousemove = Dragging;
    canvas.onmouseup = canvas.onmouseout = DragEnd;
    
    DrawCanvas();
  }
  
  
  // draw canvas
  function DrawCanvas() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    
    // control lines
    ctx.lineWidth = style1.cpline.width;
    ctx.strokeStyle = style1.cpline.color;
    ctx.beginPath();
    ctx.moveTo(point1.p1.x, point1.p1.y);
    
    ctx.lineTo(point1.cp1.x, point1.cp1.y);
    ctx.lineTo(point1.cp1.x, point1.cp1.y);
    if (point1.cp2) {
      ctx.moveTo(point1.p2.x, point1.p2.y);
      ctx.lineTo(point1.cp2.x, point1.cp2.y);
    }
    else {
      ctx.lineTo(point1.p2.x, point1.p2.y);
    }
    ctx.stroke();
    
    // curve
    ctx.lineWidth = style1.curve.width;
    ctx.strokeStyle = style1.curve.color;
    ctx.beginPath();
    ctx.moveTo(point1.p1.x, point1.p1.y);
    if (point1.cp2) {
      ctx.bezierCurveTo(point1.cp1.x, point1.cp1.y, point1.cp2.x, point1.cp2.y, point1.p2.x, point1.p2.y);
    }
    else {
      ctx.quadraticCurveTo(point1.cp1.x, point1.cp1.y, point1.p2.x, point1.p2.y);
    }
    ctx.stroke();



    // control lines
    ctx.lineWidth = style.cpline.width;
    ctx.strokeStyle = style.cpline.color;
    ctx.beginPath();
    ctx.moveTo(point.p1.x, point.p1.y);
    ctx.lineTo(point.cp1.x, point.cp1.y);
    if (point.cp2) {
      ctx.moveTo(point.p2.x, point.p2.y);
      ctx.lineTo(point.cp2.x, point.cp2.y);
    }
    else {
      ctx.lineTo(point.p2.x, point.p2.y);
    }
    ctx.stroke();
    
    // curve
    ctx.lineWidth = style.curve.width;
    ctx.strokeStyle = style.curve.color;
    ctx.beginPath();
    ctx.moveTo(point.p1.x, point.p1.y);
    if (point.cp2) {
      ctx.bezierCurveTo(point.cp1.x, point.cp1.y, point.cp2.x, point.cp2.y, point.p2.x, point.p2.y);
    }
    else {
      ctx.quadraticCurveTo(point.cp1.x, point.cp1.y, point.p2.x, point.p2.y);
    }
    ctx.stroke();

    // control points    

      ctx.lineWidth = style.point.width;
      ctx.strokeStyle = style.point.color;
      ctx.fillStyle = style.point.fill;
      ctx.beginPath();
      ctx.arc(point.cp1.x, point.cp1.y, style.point.radius, style.point.arc1, style.point.arc2, true);
      ctx.fill();
      //ctx.stroke();
    
    //fakePoint
      ctx.lineWidth = style.fakePoint.width;
      ctx.strokeStyle = style.fakePoint.color;
      ctx.fillStyle = style.fakePoint.fill;
      ctx.beginPath();
      ctx.arc(fakePoint.cp1.x, fakePoint.cp1.y, style.fakePoint.radius, style.fakePoint.arc1, style.fakePoint.arc2, true);
      ctx.fill();
      ctx.stroke();

    
  }
  
  // start dragging
  function DragStart(e) {
    e = MousePos(e);
    var dx, dy;
    for (var p in fakePoint) {
      dx = fakePoint[p].x - e.x;
      dy = fakePoint[p].y - e.y;
      if ((dx * dx) + (dy * dy) < style.fakePoint.radius * style.fakePoint.radius) {
        drag = p;
        dPoint = e;
        canvas.style.cursor = "move";
        return;
      }
    }
  }
  
  
  // dragging
  function Dragging(e) {
    if (drag) {
      e = MousePos(e);
      //console.log(e)
      if(e.y<=250){
	      fakePoint[drag].x = fakePoint.cp1.x;
	      fakePoint[drag].y += e.y - dPoint.y;
	      point[drag].y = 250-((250-fakePoint[drag].y)*2)
	      dPoint = e;
	      
      var currentdate = new Date(); 
	  var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

	 var AB = Math.sqrt(Math.pow(point.cp1.x-100,2)+ Math.pow(point.cp1.y-250,2));    
    var BC = Math.sqrt(Math.pow(point.cp1.x-400,2)+ Math.pow(point.cp1.y-250,2)); 
    var AC = Math.sqrt(Math.pow(400-100,2)+ Math.pow(250-250,2));
    //console.log();
    var radians = Math.acos((BC*BC+AB*AB-AC*AC)/(2*BC*AB));
    var degrees = radians * (180/3.141592653589793);
    var logValue = parseInt(180-degrees);

      logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"line_shape_1","value":logValue,"start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});

      DrawCanvas();
      }     
    }
  }
  
  
  // end dragging
  function DragEnd(e) {
  	$("#nextbutton").show();
    drag = null;
    canvas.style.cursor = "default";
    DrawCanvas();
    var currentdate = new Date(); 
	var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

	var AB = Math.sqrt(Math.pow(point.cp1.x-100,2)+ Math.pow(point.cp1.y-250,2));    
    var BC = Math.sqrt(Math.pow(point.cp1.x-400,2)+ Math.pow(point.cp1.y-250,2)); 
    var AC = Math.sqrt(Math.pow(400-100,2)+ Math.pow(250-250,2));
    //console.log();
    var radians = Math.acos((BC*BC+AB*AB-AC*AC)/(2*BC*AB));
    var degrees = radians * (180/3.141592653589793);
    var logValue = parseInt(180-degrees);


    logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"line_shape_1","value":logValue,"start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});
  }

  
  // event parser
  function MousePos(event) {
    event = (event ? event : window.event);
    return {
      x: event.pageX - canvas.offsetLeft,
      y: event.pageY - canvas.offsetTop
    }
  }
  // start
  canvas = document.getElementById("mycanvas");
  code = document.getElementById("code");
  if (canvas.getContext) {
    ctx = canvas.getContext("2d");
    Init(canvas.className == "quadratic");
  }
  
})(); 
	}


//Question 4
function drawQ4(){
	var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"angle_1","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});

	$("#mycanvas").hide();
		$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
		d3.selectAll("svg").remove();
		$("#questiontext").html("<p>Make the inner angle between the two lines <b>50%</b> of its current value.</p>");
		
		var svg, frameGroup, dragRect, dragBarTop, dragBarRight, rotateHandler,
    x1 = 300, y1 = 250,
    x2 = 500, y2 = 200
    angle = 0,
    width = 200, height = 5,
    bar = 6,
    that = this;

svg = d3.select('#viz').append('svg').attr({
    width: 800,
    height: 500
});
svg.append("rect")
       .attr("x",0)
       .attr("y",0)
       .attr("width",800)
       .attr("height",500)
       .attr("fill","white")
       .style("stroke","black");
frameGroup = svg.append('g')
.attr({
    'pointer-events': 'all',
    'class': 'frameGroup'
});

staticDragLine = frameGroup.append("line")
					 .attr("class", "staticDragLine")
					 .attr("x1",x1)
					 .attr("y1",y1)
					 .attr("x2",x2)
					 .attr("y2",y2)
					 .style("stroke","black")
					 .style("stroke-opacity",0.2);


dragLine = frameGroup.append("line")
					 .attr("class", "dragLine")
					 .attr("x1",x1)
					 .attr("y1",y1)
					 .attr("x2",x2)
					 .attr("y2",y2)
					 .style("stroke","black")
					 .style("stroke-width",2);

staticLine = svg.append("line")
					 .attr("class", "dragLine1")
					 .attr("x1",x1)
					 .attr("y1",y1)
					 .attr("x2",x1+200)
					 .attr("y2",y1)
					 .style("stroke","black") 
					 .style("stroke-width",2);

var initialAngle = Math.atan2(y2-y1, x2-x1) * (180 / Math.PI);
rotateHandler = frameGroup.append('circle')
.attr('class', 'rotateHandler')
.attr('r', bar)
.attr('fill', 'black')
.attr('fill-opacity', 1)
.attr('stroke-width', 1)
.attr('stroke', 'white')
.attr("cursor","move")
.attr("cx",x2)
.attr("cy",y2)
.call(d3.behavior.drag().on('drag', function() {
    var pointerX = d3.event.x,
        pointerY = d3.event.y;
	
    angle = Math.atan2(pointerY-y1, pointerX-x1) * (180 / Math.PI);
    $("#nextbutton").show();
    if(angle<=0){
    	positionate();
    }
}));

var skipLog=1;

function positionate() {
    var rotate, translate;
    
    if(angle>initialAngle){
    	rotate = ' rotate(' + (angle-initialAngle) + ', ' + x1 + ', ' + y1 + ')';	
    }else{
    	rotate = ' rotate(' + (-1*(initialAngle-angle)) + ', ' + x1 + ', ' + y1 + ')';	
    }
	translate = 'translate(' + 0 + ',' + 0 + ')';
    dragLine.attr('transform', translate + rotate);
    
    rotateHandler.attr('transform', translate + rotate);
    
	var currentdate = new Date(); 
	var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

    if(skipLog!=1){	
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"angle_1","value":(-1*angle),"start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});	
   	}
	skipLog=0;
}

}

//Question 5
	function drawQ5(){
		var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"circle_area_1","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});

		$("#mycanvas").hide();
		$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
		d3.selectAll("svg").remove();
		$("#questiontext").html("<p>Make the area of the circle <b>50%</b> of its current value.</p>");
		
		var svg, frameGroup, dragRect, dragBarTop, dragBarRight, rotateHandler,
    x = 500, y = 325,
    angle = 0,
    r = 40//, height = 5,
    dragR = 6,
    that = this;

    svg = d3.select('#viz').append('svg').attr({
        width: 1000,
        height: 650
    });

    svg.append("rect")
       .attr("x",0)
       .attr("y",0)
       .attr("width",1000)
       .attr("height",650)
       .attr("fill","white")
       .style("stroke","black");

      svg.append("circle")
       .attr("class","staticCircle")
       .attr("cx",x)
       .attr("cy",y)
       .attr("r",r)
       .attr("fill","black")
       .style("opacity",0.2);


    svg.append("circle")
       .attr("class","vizelement")
       .attr("cx",x)
       .attr("cy",y)
       .attr("r",r)
       .attr("fill","black")
       .style("opacity",0.5);

    svg.append("circle")
       .attr("class","circleareadragger")
       .attr("cx",x+r)
       .attr("cy",y)
       .attr("r",dragR)
       .attr("fill","black")
       .call(d3.behavior.drag().on('drag', function() {
        r = r + d3.event.dx;
        if (r < dragR) {
            return;
        }        
        positionate();
    }));
    //positionate(); 

    function positionate() {
    d3.select(".vizelement").attr('r', r);
    $("#nextbutton").show();
    translate = 'translate(' + (r-40) + ',' + 0 + ')';
    d3.select('.circleareadragger').attr('transform', translate);
    var currentdate = new Date(); 
	var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

    	logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"circle_area_1","value":r,"start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});	
    }		

	}

//Question 6
function drawQ6(){
	var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"horizontal_slider_1","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});

	$("#mycanvas").hide();
	$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
	d3.selectAll("svg").remove();
	$("#questiontext").html("<p>Make the slider box's position <b>50%</b> of its current value.</p>");
	var x = document.body.offsetWidth/3;
	$('#viz').append("<div id=\"sliderDiv1\" align='center' style=\"width:800px;margin-left: "+x+"px;margin-right: auto;position:absolute;\"></div>");
	$('#viz').append("<div id=\"sliderDiv\" align='center' style=\"width:800px;margin-left: "+x+"px;margin-right: auto;z-index:10;\"></div>");

	d3.select('#sliderDiv1').call(d3.slider().value(50)).style("opacity",0.5);

	d3.select('#sliderDiv').call(d3.slider().value(50).on("slide", function(evt, value) {
	  $("#nextbutton").show();
	  var currentdate = new Date(); 
	  var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

    logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"horizontal_slider_1","value":value,"start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});	
    }).axis(d3.svg.axis().orient("bottom").ticks("1")));

	d3.select(".d3-slider-axis.d3-slider-axis-bottom").selectAll("text").each(function(d){
    	//console.log(d)
    	if(d=="0"){
    		d3.select(this).text("low")
    	}else if(d=="100"){
    		d3.select(this).text("high")
    	}
    })
}

//Question 7
function drawQ7(){
	var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"square_area_1","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});

	$("#mycanvas").hide();
	$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
	d3.selectAll("svg").remove();
	$("#questiontext").html("<p>Make the area of the square <b>50%</b> of its current value.</p>");
	

	var svg, frameGroup, dragRect, dragBarTop, dragBarRight, rotateHandler,
    x = 400, y = 150,
    width = 200, height = 200,
    dragR = 6,
    that = this;

    svg = d3.select('#viz').append('svg').attr({
        width: 1500,
        height: 700
    });
    svg.append("rect")
       .attr("x",0)
       .attr("y",0)
       .attr("width",1500)
       .attr("height",700)
       .attr("fill","white")
       .style("stroke","black");

     svg.append("rect")
       .attr("class","staticSquare")
       .attr("x",x)
       .attr("y",y)
       .attr("width",width)
       .attr("height",height)
       .attr("fill","black")
       .style("opacity",0.2);


    svg.append("rect")
       .attr("class","vizelement")
       .attr("x",x)
       .attr("y",y)
       .attr("width",width)
       .attr("height",height)
       .attr("fill","black")
       .style("opacity",0.5);

    centerX = x + width;
    centerY = y + height;

var pointerX,pointerY;
    svg.append("circle")
       .attr("class","rectareadragger")
       .attr("cx",x+width)
       .attr("cy",y+height)
       .attr("r",dragR)
       .attr("fill","black")
       .call(d3.behavior.drag().on('drag', function() {
        height = height + d3.event.dy;
        width = width + d3.event.dy;
        if ((width*height) < (Math.PI*dragR*dragR)) {
            return;
        }        
        pointerX = d3.event.sourceEvent.x,
        pointerY = d3.event.sourceEvent.y;
                //angle = Math.atan2(pointerY - centerY, pointerX - centerX) * (180 / Math.PI);
        
        if(width<10 && height<10){
        	return;
        }else{
        	positionate();
        }
    }));
    //positionate(); 

    function positionate() {
    $("#nextbutton").show();
    d3.select(".vizelement").attr('width', width).attr('height', height);
    //translate = 'translate(' + (r-40) + ',' + 0 + ')';
    //d3.select('.dragger').attr('transform', translate);
    //console.log(width,height)
    //rotate = 'rotate(' + angle + ', ' + (-1 * width / 2) + ', ' + 0 + ')';
    translate = 'translate(' + (width-200) + ',' + (height-200) + ')';
    d3.select('.rectareadragger').attr('transform', translate);
    var currentdate = new Date(); 
	var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

    logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"square_area_1","value":(width*height)/1000,"start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});
    }
}

function drawQ8(){
	var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"width_1","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});

	$("#mycanvas").hide();
	$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
	d3.selectAll("svg").remove();
	$("#questiontext").html("<p>Make the width <b>50%</b> of its current value.</p>");
	
	var svg, frameGroup, dragRect, dragBarTop, dragBarRight, rotateHandler,
    x = 300, y = 100,
    angle = 0,
    width = 200, height = 100,
    bar = 6,
    that = this;

svg = d3.select('#viz').append('svg').attr({
    width: 1000,
    height: 300
});
svg.append("rect")
       .attr("x",0)
       .attr("y",0)
       .attr("width",1000)
       .attr("height",300)
       .attr("fill","white")
       .style("stroke","black");


frameGroup = svg.append('g')
.attr({
    'class': 'dummy frameGroup'
});

staticRect = frameGroup.append('rect')
.attr('class', 'dummy dragRectStatic')
.attr('fill', 'black')
.attr('fill-opacity', 0.1)
.attr("width",width)
.attr("height",height)
.attr("x",x)
.attr("y",y);

dragRect = frameGroup.append('rect')
.attr('class', 'dummy dragRect')
.attr('fill', 'black')
.attr('fill-opacity', 0.3);
dragBarRight = frameGroup.append('rect')
.attr('class', 'dummy dragBarRight')
.attr('fill', 'black')
.attr('fill-opacity', 0.6)
.attr('cursor', 'ew-resize')
.call(d3.behavior.drag().on('drag', function() {
    width = width + d3.event.dx;
    if (width < bar) {
        return;
    }
    $("#nextbutton").show();
    positionate();
}));
var skipLog=1;
positionate();

function positionate() {
    var rotate, translate;
    rotate = ' rotate(' + angle + ', ' + (width / 2) + ', ' + (height / 2) + ')';
    translate = 'translate(' + x + ',' + y + ')';
    dragRect.attr('transform', translate + rotate);
    dragRect.attr('width', width);
    dragRect.attr('height', height);

    rotate = ' rotate(' + angle + ', ' + (-1 * width / 2) + ', ' + (height / 2) + ')';
    translate = 'translate(' + (x + width) + ',' + y + ')';
    dragBarRight.attr('transform', translate + rotate);
    dragBarRight.attr('height', height);
    dragBarRight.attr('width', bar);

    var currentdate = new Date(); 
var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

          if(skipLog!=1){
          	logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"width_1","value":width,"start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});
          }
       skipLog=0;
    
}
}
//end of questions 1-8

//-----------------------------
//Questions 9-16 (make 25%)
//-----------------------------
	//Question 9
	function drawQ9(){
		var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"height_2","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});

		$("#mycanvas").hide();
		$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
		d3.selectAll("svg").remove();
		$("#questiontext").html("<p>Make the height of the rectangle <b>25%</b> of its current value.</p>");

		var svg, frameGroup, dragRect, dragBarTop, dragBarRight, rotateHandler,
	    x = 300, y = 400,
	    angle = 0,
	    width = 200, height = 100,
	    bar = 6,
	    that = this;
		svg = d3.select('#viz').append('svg').attr({
		    width: 800,
		    height: 550
		});

		svg.append("rect")
	       .attr("x",0)
	       .attr("y",0)
	       .attr("width",800)
	       .attr("height",550)
	       .attr("fill","white")
	       .style("stroke","black");

		frameGroup = svg.append('g')
		.attr({
		    'pointer-events': 'all',
		    'class': 'dummy frameGroup'
		});


		dragRectStatic = frameGroup.append('rect')
		.attr('class', 'dummy dragRectStatic')
		.attr('fill', 'black')
		.attr('fill-opacity', 0.2)
		.attr("x",x)
		.attr("y",y)
		.attr("width",width)
		.attr("height",height);

		dragRect = frameGroup.append('rect')
		.attr('class', 'dummy dragRect')
		.attr('fill', 'black')
		.attr('fill-opacity', 0.3);

		dragBarTop = frameGroup.append('rect')
		.attr('class', 'dummy dragBarTop')
		.attr('fill', 'black')
		.attr('fill-opacity', 0.6)
		.attr('cursor', 'ns-resize')
		.call(d3.behavior.drag().on('drag', function() {
		    height = height + (y - d3.event.y);
		    y = d3.event.y;
		    if (height < bar) {
		        return;
		    }
		    $("#nextbutton").show();
		    positionate();
		}));
		var skipLog=1;
		positionate();

		function positionate() {
		    var rotate, translate;
		    rotate = ' rotate(' + angle + ', ' + (width / 2) + ', ' + (height / 2) + ')';
		    translate = 'translate(' + x + ',' + y + ')';
		    dragRect.attr('transform', translate + rotate);
		    dragRect.attr('width', width);
		    dragRect.attr('height', height);

		    rotate = ' rotate(' + angle + ', ' + (width / 2) + ', ' + (height / 2) + ')';
		    translate = 'translate(' + x + ',' + y + ')';
		    dragBarTop.attr('transform', translate + rotate);
		    dragBarTop.attr('height', bar);
		    dragBarTop.attr('width', width);

			var currentdate = new Date(); 
			var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		   	if(skipLog!=1){
		   		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"height_2","value":height,"start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});
		   	}
		 	skipLog=0;
		}
	}


//Question 10	
	function drawQ10(){
		var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"horizontal_direction_2","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});

		$("#mycanvas").hide();
		$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
		d3.selectAll("svg").remove();
		$("#questiontext").html("<p>Move the circle such that the distance from the target (gray rectangle on the right) is <b>25%</b> of its current value</p>");
		
			var svg, frameGroup, dragRect, dragBarTop, dragBarRight, rotateHandler,
    x = 200, y = 100,
    angle = 0,
    width = 200, height = 100,
    bar = 6,
    that = this;

svg = d3.select('#viz').append('svg').attr({
    width: 1000,
    height: 300
});
svg.append("rect")
       .attr("x",0)
       .attr("y",0)
       .attr("width",1000)
       .attr("height",300)
       .attr("fill","white")
       .style("stroke","black");


frameGroup = svg.append('g')
.attr({
    'class': 'dummy frameGroup'
});

targetRect = frameGroup.append('rect')
.attr('class', 'targetRect')
.attr('fill', 'black')
.style('fill-opacity', '0.4')
.attr("x",900)
.attr("y",100)
.attr("width",5)
.attr("height",50);


frameGroup.append('circle')
				  .attr('class','dummy dragCircleRightStatic')				  
				  .attr('r',8)
				  .attr('cx',400)
				  .attr('cy',125)
				  .style('fill','black')
				  .style('fill-opacity',0.2);

dragCircleRight = frameGroup.append('circle')
.attr('class', 'dummy dragCircleRight')
.attr('r',8)
.attr('cx',x)
.attr('cy',25)
.attr('fill', 'black')
.attr('cursor', 'ew-resize')
.call(d3.behavior.drag().on('drag', function() {
    width = width + d3.event.dx;
    $("#nextbutton").show();
    positionate();
}));


var skipLog=1;
positionate();

function positionate() {
    var rotate, translate;
    translate = 'translate(' + (width) + ',' + y + ')';
    dragCircleRight.attr('transform', translate );

    var currentdate = new Date(); 
	var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

          if(skipLog!=1){    
      		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"horizontal_direction_2","value":900-(width+200),"start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});
    	}
    	skipLog=0;
	}
}


//Question 11
	function drawQ11(){
		var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"line_shape_2","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});

		$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
		d3.selectAll("svg").remove();
		$("#questiontext").html("<p>Make the curve <b>25%</b> of its current value.</p>");
		$("#mycanvas").show();
		(function() {

  var canvas, ctx, code, point, style, drag = null, dPoint, fakePoint;

  // define initial points
  function Init(quadratic) {

  	fakePoint = {
      p1: { x:100, y:250 },
      p2: { x:400, y:250 }
    };

  	point1 = {
      p1: { x:100, y:250 },
      p2: { x:400, y:250 }
    };
    
    if (quadratic) {
      point1.cp1 = { x: 250, y: 200 };      
    }
    else {
      point1.cp1 = { x: 150, y: 150 };
      point1.cp2 = { x: 350, y: 150 };
    }
    // default styles
    style1 = {
      curve:  { width: 2, color: "#ccc" },
      cpline: { width: 1, color: "#ffffff" },
      point1: { radius: 5, width: 1, color: "#ccc", fill: "rgba(255,255,255,0.5)", arc1: 0, arc2: 2 * Math.PI },
    }


    point = {
      p1: { x:100, y:250 },
      p2: { x:400, y:250 }
    };
    
    if (quadratic) {
      point.cp1 = { x: 250, y: 200 };
      fakePoint.cp1 = { x: 250, y: 225 };
    }
    else {
      point.cp1 = { x: 150, y: 150 };
      point.cp2 = { x: 350, y: 150 };
    }
    
    // default styles
    style = {
      curve:  { width: 2, color: "#333" },
      cpline: { width: 1, color: "#ffffff" },
      point: { radius: 5, width: 1, color: "#333", fill: "rgba(255,255,255,0.5)", arc1: 0, arc2: 2 * Math.PI },
      fakePoint: { radius: 5, width: 1, color: "#333", fill: "rgba(255,255,255,0.5)", arc1: 0, arc2: 2 * Math.PI },
    }
    
    // line style defaults
    ctx.lineCap = "round";
    ctx.lineJoin = "round";
    
    // event handlers
    canvas.onmousedown = DragStart;
    canvas.onmousemove = Dragging;
    canvas.onmouseup = canvas.onmouseout = DragEnd;
    
    DrawCanvas();
  }
  
  
  // draw canvas
  function DrawCanvas() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    

    // control lines
    ctx.lineWidth = style1.cpline.width;
    ctx.strokeStyle = style1.cpline.color;
    ctx.beginPath();
    ctx.moveTo(point1.p1.x, point1.p1.y);
    
    ctx.lineTo(point1.cp1.x, point1.cp1.y);
    ctx.lineTo(point1.cp1.x, point1.cp1.y);
    if (point1.cp2) {
      ctx.moveTo(point1.p2.x, point1.p2.y);
      ctx.lineTo(point1.cp2.x, point1.cp2.y);
    }
    else {
      ctx.lineTo(point1.p2.x, point1.p2.y);
    }
    ctx.stroke();
    
    // curve
    ctx.lineWidth = style1.curve.width;
    ctx.strokeStyle = style1.curve.color;
    ctx.beginPath();
    ctx.moveTo(point1.p1.x, point1.p1.y);
    if (point1.cp2) {
      ctx.bezierCurveTo(point1.cp1.x, point1.cp1.y, point1.cp2.x, point1.cp2.y, point1.p2.x, point1.p2.y);
    }
    else {
      ctx.quadraticCurveTo(point1.cp1.x, point1.cp1.y, point1.p2.x, point1.p2.y);
    }
    ctx.stroke();


    // control lines
    ctx.lineWidth = style.cpline.width;
    ctx.strokeStyle = style.cpline.color;
    ctx.beginPath();
    ctx.moveTo(point.p1.x, point.p1.y);
    ctx.lineTo(point.cp1.x, point.cp1.y);
    if (point.cp2) {
      ctx.moveTo(point.p2.x, point.p2.y);
      ctx.lineTo(point.cp2.x, point.cp2.y);
    }
    else {
      ctx.lineTo(point.p2.x, point.p2.y);
    }
    ctx.stroke();
    
    // curve
    ctx.lineWidth = style.curve.width;
    ctx.strokeStyle = style.curve.color;
    ctx.beginPath();
    ctx.moveTo(point.p1.x, point.p1.y);
    if (point.cp2) {
      ctx.bezierCurveTo(point.cp1.x, point.cp1.y, point.cp2.x, point.cp2.y, point.p2.x, point.p2.y);
    }
    else {
      ctx.quadraticCurveTo(point.cp1.x, point.cp1.y, point.p2.x, point.p2.y);
    }
    ctx.stroke();

    // control points    

      ctx.lineWidth = style.point.width;
      ctx.strokeStyle = style.point.color;
      ctx.fillStyle = style.point.fill;
      ctx.beginPath();
      ctx.arc(point.cp1.x, point.cp1.y, style.point.radius, style.point.arc1, style.point.arc2, true);
      ctx.fill();
      //ctx.stroke();
    
     //fakePoint
      ctx.lineWidth = style.fakePoint.width;
      ctx.strokeStyle = style.fakePoint.color;
      ctx.fillStyle = style.fakePoint.fill;
      ctx.beginPath();
      ctx.arc(fakePoint.cp1.x, fakePoint.cp1.y, style.fakePoint.radius, style.fakePoint.arc1, style.fakePoint.arc2, true);
      ctx.fill();
      ctx.stroke();
  }
  
  
  // start dragging
  function DragStart(e) {
    e = MousePos(e);
    var dx, dy;
    for (var p in fakePoint) {
      dx = fakePoint[p].x - e.x;
      dy = fakePoint[p].y - e.y;
      if ((dx * dx) + (dy * dy) < style.fakePoint.radius * style.fakePoint.radius) {
        drag = p;
        dPoint = e;
        canvas.style.cursor = "move";
        return;
      }
    }
  }
  
  
  // dragging
  function Dragging(e) {
    if (drag) {
      e = MousePos(e);
      //console.log(e)
      if(e.y<=250){
	      fakePoint[drag].x = fakePoint.cp1.x;
	      fakePoint[drag].y += e.y - dPoint.y;
	      point[drag].y = 250-((250-fakePoint[drag].y)*2)
	      dPoint = e;
	    
      var currentdate = new Date(); 
	var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

	var AB = Math.sqrt(Math.pow(point.cp1.x-100,2)+ Math.pow(point.cp1.y-250,2));    
    var BC = Math.sqrt(Math.pow(point.cp1.x-400,2)+ Math.pow(point.cp1.y-250,2)); 
    var AC = Math.sqrt(Math.pow(400-100,2)+ Math.pow(250-250,2));
    //console.log();
    var radians = Math.acos((BC*BC+AB*AB-AC*AC)/(2*BC*AB));
    var degrees = radians * (180/3.141592653589793);
    var logValue = parseInt(180-degrees);


	logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"line_shape_2","value":logValue,"start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});

        DrawCanvas();
      } 
    }
  }
  
  
  // end dragging
  function DragEnd(e) {
  	$("#nextbutton").show();
    drag = null;
    canvas.style.cursor = "default";
    DrawCanvas();
    var currentdate = new Date(); 
	var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

	var AB = Math.sqrt(Math.pow(point.cp1.x-100,2)+ Math.pow(point.cp1.y-250,2));    
    var BC = Math.sqrt(Math.pow(point.cp1.x-400,2)+ Math.pow(point.cp1.y-250,2)); 
    var AC = Math.sqrt(Math.pow(400-100,2)+ Math.pow(250-250,2));
    //console.log();
    var radians = Math.acos((BC*BC+AB*AB-AC*AC)/(2*BC*AB));
    var degrees = radians * (180/3.141592653589793);
    var logValue = parseInt(180-degrees);

    logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"line_shape_2","value":logValue,"start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});
  }

  
  // event parser
  function MousePos(event) {
    event = (event ? event : window.event);
    return {
      x: event.pageX - canvas.offsetLeft,
      y: event.pageY - canvas.offsetTop
    }
  }
  // start
  canvas = document.getElementById("mycanvas");
  code = document.getElementById("code");
  if (canvas.getContext) {
    ctx = canvas.getContext("2d");
    Init(canvas.className == "quadratic");
  }
  
})(); 
	}


//Question 12
function drawQ12(){

	var currentdate = new Date(); 
	var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
	logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"angle_2","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});

	$("#mycanvas").hide();
		$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
		d3.selectAll("svg").remove();
		$("#questiontext").html("<p>Make the inner angle between the two lines <b>25%</b> of its current value.</p>");
		
		var svg, frameGroup, dragRect, dragBarTop, dragBarRight, rotateHandler,
    x1 = 300, y1 = 250,
    x2 = 500, y2 = 200
    angle = 0,
    width = 200, height = 5,
    bar = 6,
    that = this;

svg = d3.select('#viz').append('svg').attr({
    width: 800,
    height: 500
});
svg.append("rect")
       .attr("x",0)
       .attr("y",0)
       .attr("width",800)
       .attr("height",500)
       .attr("fill","white")
       .style("stroke","black");
frameGroup = svg.append('g')
.attr({
    'pointer-events': 'all',
    'class': 'frameGroup'
});

staticDragLine = frameGroup.append("line")
					 .attr("class", "staticDragLine")
					 .attr("x1",x1)
					 .attr("y1",y1)
					 .attr("x2",x2)
					 .attr("y2",y2)
					 .style("stroke","black")
					 .style("stroke-opacity",0.2);

dragLine = frameGroup.append("line")
					 .attr("class", "dragLine")
					 .attr("x1",x1)
					 .attr("y1",y1)
					 .attr("x2",x2)
					 .attr("y2",y2)
					 .style("stroke","black")
					 .style("stroke-width",2);

staticLine = svg.append("line")
					 .attr("class", "dragLine1")
					 .attr("x1",x1)
					 .attr("y1",y1)
					 .attr("x2",x1+200)
					 .attr("y2",y1)
					 .style("stroke","black")
					 .style("stroke-width",2);

var initialAngle = Math.atan2(y2-y1, x2-x1) * (180 / Math.PI);
rotateHandler = frameGroup.append('circle')
.attr('class', 'rotateHandler')
.attr('r', bar)
.attr('fill', 'black')
.attr('fill-opacity', 1)
.attr('stroke-width', 1)
.attr('stroke', 'white')
.attr("cursor","move")
.attr("cx",x2)
.attr("cy",y2)
.call(d3.behavior.drag().on('drag', function() {
    var pointerX = d3.event.x,
        pointerY = d3.event.y;
	
    angle = Math.atan2(pointerY-y1, pointerX-x1) * (180 / Math.PI);
    $("#nextbutton").show();
    if(angle<=0){
    	positionate();
    }
}));

var skipLog=1;

function positionate() {
    var rotate, translate;
    
    if(angle>initialAngle){
    	rotate = ' rotate(' + (angle-initialAngle) + ', ' + x1 + ', ' + y1 + ')';	
    }else{
    	rotate = ' rotate(' + (-1*(initialAngle-angle)) + ', ' + x1 + ', ' + y1 + ')';	
    }
	translate = 'translate(' + 0 + ',' + 0 + ')';
    dragLine.attr('transform', translate + rotate);
    
    rotateHandler.attr('transform', translate + rotate);
    
	var currentdate = new Date(); 
	var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

    if(skipLog!=1){	
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"angle_2","value":(-1*angle),"start_value":"false","end_value":"false","start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});	
   	}
	skipLog=0;
}

}

//Question 13
	function drawQ13(){

	var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"circle_area_2","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});

		$("#mycanvas").hide();
		$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
		d3.selectAll("svg").remove();
		$("#questiontext").html("<p>Make the area of the circle <b>25%</b> of its current value.</p>");
		
		var svg, frameGroup, dragRect, dragBarTop, dragBarRight, rotateHandler,
    x = 500, y = 325,
    angle = 0,
    r = 40//, height = 5,
    dragR = 6,
    that = this;

    svg = d3.select('#viz').append('svg').attr({
        width: 1000,
        height: 650
    });

    svg.append("rect")
       .attr("x",0)
       .attr("y",0)
       .attr("width",1000)
       .attr("height",650)
       .attr("fill","white")
       .style("stroke","black");

      svg.append("circle")
       .attr("class","staticCircle")
       .attr("cx",x)
       .attr("cy",y)
       .attr("r",r)
       .attr("fill","black")
       .style("opacity",0.2);


    svg.append("circle")
       .attr("class","vizelement")
       .attr("cx",x)
       .attr("cy",y)
       .attr("r",r)
       .attr("fill","black")
       .style("opacity",0.5);

    svg.append("circle")
       .attr("class","circleareadragger")
       .attr("cx",x+r)
       .attr("cy",y)
       .attr("r",dragR)
       .attr("fill","black")
       .call(d3.behavior.drag().on('drag', function() {
        r = r + d3.event.dx;
        if (r < dragR) {
            return;
        }        
        positionate();
    }));
    //positionate(); 

    function positionate() {
    d3.select(".vizelement").attr('r', r);
    $("#nextbutton").show();
    translate = 'translate(' + (r-40) + ',' + 0 + ')';
    d3.select('.circleareadragger').attr('transform', translate);
    var currentdate = new Date(); 
	var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

    	logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"circle_area_2","value":r,"start_value":"false","end_value":"false","start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});	
    }		

	}

//Question 14
function drawQ14(){
	var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"horizontal_slider_2","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});

	$("#mycanvas").hide();
	$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
	d3.selectAll("svg").remove();
	$("#questiontext").html("<p>Make the slider box's position <b>25%</b> of its current value.</p>");
	var x = document.body.offsetWidth/3;
	$('#viz').append("<div id=\"sliderDiv1\" align='center' style=\"width:800px;margin-left: "+x+"px;margin-right: auto;position:absolute;\"></div>");
	$('#viz').append("<div id=\"sliderDiv\" align='center' style=\"width:800px;margin-left: "+x+"px;margin-right: auto;z-index:10;\"></div>");

	d3.select('#sliderDiv1').call(d3.slider().value(50)).style("opacity",0.5);

	d3.select('#sliderDiv').call(d3.slider().value(50).on("slide", function(evt, value) {
	  $("#nextbutton").show();
	  var currentdate = new Date(); 
	  var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

    logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"horizontal_slider_2","value":value,"start_value":"false","end_value":"false","start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});	
    }).axis(d3.svg.axis().orient("bottom").ticks("1")));
    
	d3.select(".d3-slider-axis.d3-slider-axis-bottom").selectAll("text").each(function(d){
    	//console.log(d)
    	if(d=="0"){
    		d3.select(this).text("low")
    	}else if(d=="100"){
    		d3.select(this).text("high")
    	}
    })

}

//Question 15
function drawQ15(){

	var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"square_area_2","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});

	$("#mycanvas").hide();
	$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
	d3.selectAll("svg").remove();
	$("#questiontext").html("<p>Make the area of the square <b>25%</b> of its current value.</p>");
	
	var svg, frameGroup, dragRect, dragBarTop, dragBarRight, rotateHandler,
    x = 400, y = 150,
    width = 200, height = 200,
    dragR = 6,
    that = this;

    svg = d3.select('#viz').append('svg').attr({
        width: 1500,
        height: 700
    });
    svg.append("rect")
       .attr("x",0)
       .attr("y",0)
       .attr("width",1500)
       .attr("height",700)
       .attr("fill","white")
       .style("stroke","black");


     svg.append("rect")
       .attr("class","staticSquare")
       .attr("x",x)
       .attr("y",y)
       .attr("width",width)
       .attr("height",height)
       .attr("fill","black")
       .style("opacity",0.2);

    svg.append("rect")
       .attr("class","vizelement")
       .attr("x",x)
       .attr("y",y)
       .attr("width",width)
       .attr("height",height)
       .attr("fill","black")
       .style("opacity",0.5);

    centerX = x + width;
    centerY = y + height;

var pointerX,pointerY;
    svg.append("circle")
       .attr("class","rectareadragger")
       .attr("cx",x+width)
       .attr("cy",y+height)
       .attr("r",dragR)
       .attr("fill","black")
       .call(d3.behavior.drag().on('drag', function() {
        height = height + d3.event.dy;
        width = width + d3.event.dy;
        if ((width*height) < (Math.PI*dragR*dragR)) {
            return;
        }        
        pointerX = d3.event.sourceEvent.x,
        pointerY = d3.event.sourceEvent.y;
                //angle = Math.atan2(pointerY - centerY, pointerX - centerX) * (180 / Math.PI);
        
        if(width<10 && height<10){
        	return;
        }else{
        	positionate();
        }
    }));
    //positionate(); 

    function positionate() {
    $("#nextbutton").show();
    d3.select(".vizelement").attr('width', width).attr('height', height);
    //translate = 'translate(' + (r-40) + ',' + 0 + ')';
    //d3.select('.dragger').attr('transform', translate);
    //console.log(width,height)
    //rotate = 'rotate(' + angle + ', ' + (-1 * width / 2) + ', ' + 0 + ')';
    translate = 'translate(' + (width-200) + ',' + (height-200) + ')';
    d3.select('.rectareadragger').attr('transform', translate);
    var currentdate = new Date(); 
	var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

    logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"square_area_2","value":(width*height)/1000,"start_value":"false","end_value":"false","start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});
    }
}

//question 16
function drawQ16(){
	var currentdate = new Date(); 
	var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
	logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"width_2","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});


	$("#mycanvas").hide();
	$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
	d3.selectAll("svg").remove();
	$("#questiontext").html("<p>Make the width <b>25%</> of its current value.</p>");
	
	var svg, frameGroup, dragRect, dragBarTop, dragBarRight, rotateHandler,
    x = 300, y = 100,
    angle = 0,
    width = 200, height = 100,
    bar = 6,
    that = this;

svg = d3.select('#viz').append('svg').attr({
    width: 1000,
    height: 300
});
svg.append("rect")
       .attr("x",0)
       .attr("y",0)
       .attr("width",1000)
       .attr("height",300)
       .attr("fill","white")
       .style("stroke","black");


frameGroup = svg.append('g')
.attr({
    'class': 'dummy frameGroup'
});

staticRect = frameGroup.append('rect')
.attr('class', 'dummy dragRectStatic')
.attr('fill', 'black')
.attr('fill-opacity', 0.1)
.attr("width",width)
.attr("height",height)
.attr("x",x)
.attr("y",y);


dragRect = frameGroup.append('rect')
.attr('class', 'dummy dragRect')
.attr('fill', 'black')
.attr('fill-opacity', 0.3);
dragBarRight = frameGroup.append('rect')
.attr('class', 'dummy dragBarRight')
.attr('fill', 'black')
.attr('fill-opacity', 0.6)
.attr('cursor', 'ew-resize')
.call(d3.behavior.drag().on('drag', function() {
    width = width + d3.event.dx;
    if (width < bar) {
        return;
    }
    $("#nextbutton").show();
    positionate();
}));
var skipLog=1;
positionate();

function positionate() {
    var rotate, translate;
    rotate = ' rotate(' + angle + ', ' + (width / 2) + ', ' + (height / 2) + ')';
    translate = 'translate(' + x + ',' + y + ')';
    dragRect.attr('transform', translate + rotate);
    dragRect.attr('width', width);
    dragRect.attr('height', height);

    rotate = ' rotate(' + angle + ', ' + (-1 * width / 2) + ', ' + (height / 2) + ')';
    translate = 'translate(' + (x + width) + ',' + y + ')';
    dragBarRight.attr('transform', translate + rotate);
    dragBarRight.attr('height', height);
    dragBarRight.attr('width', bar);

    var currentdate = new Date(); 
	var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

          if(skipLog!=1){
          	logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"width_2","value":width,"start_value":"false","end_value":"false","start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});
          }
       skipLog=0;
    
}
}
//end of questions 9-16

//-----------------------------
//Questions 17-24 (make 75%)
//-----------------------------
	//Question 17
	function drawQ17(){

		var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"height_3","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});

		$("#mycanvas").hide();
		$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
		d3.selectAll("svg").remove();
		$("#questiontext").html("<p>Make the height of the rectangle <b>75%</b> of its current value.</p>");

		var svg, frameGroup, dragRect, dragBarTop, dragBarRight, rotateHandler,
	    x = 300, y = 400,
	    angle = 0,
	    width = 200, height = 100,
	    bar = 6,
	    that = this;
		svg = d3.select('#viz').append('svg').attr({
		    width: 800,
		    height: 550
		});

		svg.append("rect")
	       .attr("x",0)
	       .attr("y",0)
	       .attr("width",800)
	       .attr("height",550)
	       .attr("fill","white")
	       .style("stroke","black");

		frameGroup = svg.append('g')
		.attr({
		    'pointer-events': 'all',
		    'class': 'dummy frameGroup'
		});


		dragRectStatic = frameGroup.append('rect')
		.attr('class', 'dummy dragRectStatic')
		.attr('fill', 'black')
		.attr('fill-opacity', 0.2)
		.attr("x",x)
		.attr("y",y)
		.attr("width",width)
		.attr("height",height);

		dragRect = frameGroup.append('rect')
		.attr('class', 'dummy dragRect')
		.attr('fill', 'black')
		.attr('fill-opacity', 0.3);

		dragBarTop = frameGroup.append('rect')
		.attr('class', 'dummy dragBarTop')
		.attr('fill', 'black')
		.attr('fill-opacity', 0.6)
		.attr('cursor', 'ns-resize')
		.call(d3.behavior.drag().on('drag', function() {
		    height = height + (y - d3.event.y);
		    y = d3.event.y;
		    if (height < bar) {
		        return;
		    }
		    $("#nextbutton").show();
		    positionate();
		}));
		var skipLog=1;
		positionate();

		function positionate() {
		    var rotate, translate;
		    rotate = ' rotate(' + angle + ', ' + (width / 2) + ', ' + (height / 2) + ')';
		    translate = 'translate(' + x + ',' + y + ')';
		    dragRect.attr('transform', translate + rotate);
		    dragRect.attr('width', width);
		    dragRect.attr('height', height);

		    rotate = ' rotate(' + angle + ', ' + (width / 2) + ', ' + (height / 2) + ')';
		    translate = 'translate(' + x + ',' + y + ')';
		    dragBarTop.attr('transform', translate + rotate);
		    dragBarTop.attr('height', bar);
		    dragBarTop.attr('width', width);

			var currentdate = new Date(); 
			var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();


		   	if(skipLog!=1){
		   		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"height_3","value":height,"start_value":"false","end_value":"false","start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});
		   	}
		 	skipLog=0;
		}
	}


//Question 18	
	function drawQ18(){
		var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"horizontal_direction_3","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});

		$("#mycanvas").hide();
		$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
		d3.selectAll("svg").remove();
		$("#questiontext").html("<p>Move the circle  such that the distance from the target (gray rectangle on the right) is <b>75%</b> of its current value.</p>");
		
			var svg, frameGroup, dragRect, dragBarTop, dragBarRight, rotateHandler,
    x = 200, y = 100,
    angle = 0,
    width = 200, height = 100,
    bar = 6,
    that = this;

svg = d3.select('#viz').append('svg').attr({
    width: 1000,
    height: 300
});
svg.append("rect")
       .attr("x",0)
       .attr("y",0)
       .attr("width",1000)
       .attr("height",300)
       .attr("fill","white")
       .style("stroke","black");


frameGroup = svg.append('g')
.attr({
    'class': 'dummy frameGroup'
});

targetRect = frameGroup.append('rect')
.attr('class', 'targetRect')
.attr('fill', 'black')
.style('fill-opacity', '0.4')
.attr("x",900)
.attr("y",100)
.attr("width",5)
.attr("height",50);


frameGroup.append('circle')
				  .attr('class','dummy dragCircleRightStatic')				  
				  .attr('r',8)
				  .attr('cx',400)
				  .attr('cy',125)
				  .style('fill','black')
				  .style('fill-opacity',0.2);

dragCircleRight = frameGroup.append('circle')
.attr('class', 'dummy dragCircleRight')
.attr('r',8)
.attr('cx',x)
.attr('cy',25)
.attr('fill', 'black')
.attr('cursor', 'ew-resize')
.call(d3.behavior.drag().on('drag', function() {
    width = width + d3.event.dx;
    $("#nextbutton").show();
    positionate();
}));


var skipLog=1;
positionate();

function positionate() {
    var rotate, translate;
    translate = 'translate(' + (width) + ',' + y + ')';
    dragCircleRight.attr('transform', translate );

    var currentdate = new Date(); 
	var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

          if(skipLog!=1){    
      		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"horizontal_direction_3","value":900-(width+200),"start_value":"false","end_value":"false","start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});
    	}
    	skipLog=0;
	}
}


//Question 19
	function drawQ19(){
		var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"line_shape_3","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});

		$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
		d3.selectAll("svg").remove();
		$("#questiontext").html("<p>Make the curve <b>75%</b> of its current value.</p>");
		$("#mycanvas").show();
		(function() {

  var canvas, ctx, code, point, style, drag = null, dPoint, fakePoint;

  // define initial points
  function Init(quadratic) {

  	fakePoint = {
      p1: { x:100, y:250 },
      p2: { x:400, y:250 }
    };

  	point1 = {
      p1: { x:100, y:250 },
      p2: { x:400, y:250 }
    };
    
    if (quadratic) {
      point1.cp1 = { x: 250, y: 200 };      
    }
    else {
      point1.cp1 = { x: 150, y: 150 };
      point1.cp2 = { x: 350, y: 150 };
    }
    // default styles
    style1 = {
      curve:  { width: 2, color: "#ccc" },
      cpline: { width: 1, color: "#ffffff" },
      point1: { radius: 5, width: 1, color: "#ccc", fill: "rgba(255,255,255,0.5)", arc1: 0, arc2: 2 * Math.PI },
    }


    point = {
      p1: { x:100, y:250 },
      p2: { x:400, y:250 }
    };
    
    if (quadratic) {
      point.cp1 = { x: 250, y: 200 };
      fakePoint.cp1 = { x: 250, y: 225 };
    }
    else {
      point.cp1 = { x: 150, y: 150 };
      point.cp2 = { x: 350, y: 150 };
    }
    
    // default styles
    style = {
      curve:  { width: 2, color: "#333" },
      cpline: { width: 1, color: "#ffffff" },
      point: { radius: 5, width: 1, color: "#333", fill: "rgba(255,255,255,0.5)", arc1: 0, arc2: 2 * Math.PI },
      fakePoint: { radius: 5, width: 1, color: "#333", fill: "rgba(255,255,255,0.5)", arc1: 0, arc2: 2 * Math.PI },
    }
    
    // line style defaults
    ctx.lineCap = "round";
    ctx.lineJoin = "round";
    
    // event handlers
    canvas.onmousedown = DragStart;
    canvas.onmousemove = Dragging;
    canvas.onmouseup = canvas.onmouseout = DragEnd;
    /*
    var currentdate = new Date(); 
			var datetime = "Last Sync: " + currentdate.getDate() + "/"
		                + (currentdate.getMonth()+1)  + "/" 
		                + currentdate.getFullYear() + " @ "  
		                + currentdate.getHours() + ":"  
		                + currentdate.getMinutes() + ":" 
		                + currentdate.getSeconds() + ":" 
		                + currentdate.getMilliseconds();
    logs.push({"user":sessionUserId,"datetime":datetime,"question":"line_shape_1","value":"("+point.cp1.x+","+point.cp1.y+","+point.p2.x+","+point.p2.y+")","start_value":"true","end_value":"false"})
    */
    DrawCanvas();
  }
  
  
  // draw canvas
  function DrawCanvas() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    

    // control lines
    ctx.lineWidth = style1.cpline.width;
    ctx.strokeStyle = style1.cpline.color;
    ctx.beginPath();
    ctx.moveTo(point1.p1.x, point1.p1.y);
    
    ctx.lineTo(point1.cp1.x, point1.cp1.y);
    ctx.lineTo(point1.cp1.x, point1.cp1.y);
    if (point1.cp2) {
      ctx.moveTo(point1.p2.x, point1.p2.y);
      ctx.lineTo(point1.cp2.x, point1.cp2.y);
    }
    else {
      ctx.lineTo(point1.p2.x, point1.p2.y);
    }
    ctx.stroke();
    
    // curve
    ctx.lineWidth = style1.curve.width;
    ctx.strokeStyle = style1.curve.color;
    ctx.beginPath();
    ctx.moveTo(point1.p1.x, point1.p1.y);
    if (point1.cp2) {
      ctx.bezierCurveTo(point1.cp1.x, point1.cp1.y, point1.cp2.x, point1.cp2.y, point1.p2.x, point1.p2.y);
    }
    else {
      ctx.quadraticCurveTo(point1.cp1.x, point1.cp1.y, point1.p2.x, point1.p2.y);
    }
    ctx.stroke();





    // control lines
    ctx.lineWidth = style.cpline.width;
    ctx.strokeStyle = style.cpline.color;
    ctx.beginPath();
    ctx.moveTo(point.p1.x, point.p1.y);
    ctx.lineTo(point.cp1.x, point.cp1.y);
    if (point.cp2) {
      ctx.moveTo(point.p2.x, point.p2.y);
      ctx.lineTo(point.cp2.x, point.cp2.y);
    }
    else {
      ctx.lineTo(point.p2.x, point.p2.y);
    }
    ctx.stroke();
    
    // curve
    ctx.lineWidth = style.curve.width;
    ctx.strokeStyle = style.curve.color;
    ctx.beginPath();
    ctx.moveTo(point.p1.x, point.p1.y);
    if (point.cp2) {
      ctx.bezierCurveTo(point.cp1.x, point.cp1.y, point.cp2.x, point.cp2.y, point.p2.x, point.p2.y);
    }
    else {
      ctx.quadraticCurveTo(point.cp1.x, point.cp1.y, point.p2.x, point.p2.y);
    }
    ctx.stroke();

    // control points    

      ctx.lineWidth = style.point.width;
      ctx.strokeStyle = style.point.color;
      ctx.fillStyle = style.point.fill;
      ctx.beginPath();
      ctx.arc(point.cp1.x, point.cp1.y, style.point.radius, style.point.arc1, style.point.arc2, true);
      ctx.fill();
      //ctx.stroke();
    
      //fakePoint
      ctx.lineWidth = style.fakePoint.width;
      ctx.strokeStyle = style.fakePoint.color;
      ctx.fillStyle = style.fakePoint.fill;
      ctx.beginPath();
      ctx.arc(fakePoint.cp1.x, fakePoint.cp1.y, style.fakePoint.radius, style.fakePoint.arc1, style.fakePoint.arc2, true);
      ctx.fill();
      ctx.stroke();
    
  }
  
  
  // start dragging
  function DragStart(e) {
    e = MousePos(e);
    var dx, dy;
    for (var p in fakePoint) {
      dx = fakePoint[p].x - e.x;
      dy = fakePoint[p].y - e.y;
      if ((dx * dx) + (dy * dy) < style.fakePoint.radius * style.fakePoint.radius) {
        drag = p;
        dPoint = e;
        canvas.style.cursor = "move";
        return;
      }
    }
  }
  
  
  // dragging
  function Dragging(e) {
    if (drag) {
      e = MousePos(e);
      //console.log(e)
      if(e.y<=250){
	      fakePoint[drag].x = fakePoint.cp1.x;
	      fakePoint[drag].y += e.y - dPoint.y;
	      point[drag].y = 250-((250-fakePoint[drag].y)*2)
	      dPoint = e;
	    
      var currentdate = new Date(); 
var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

var AB = Math.sqrt(Math.pow(point.cp1.x-100,2)+ Math.pow(point.cp1.y-250,2));    
    var BC = Math.sqrt(Math.pow(point.cp1.x-400,2)+ Math.pow(point.cp1.y-250,2)); 
    var AC = Math.sqrt(Math.pow(400-100,2)+ Math.pow(250-250,2));
    //console.log();
    var radians = Math.acos((BC*BC+AB*AB-AC*AC)/(2*BC*AB));
    var degrees = radians * (180/3.141592653589793);
    var logValue = parseInt(180-degrees);

logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"line_shape_3","value":logValue,"start_value":"false","end_value":"false","start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});
        DrawCanvas();
      } 
    }
  }
  
  
  // end dragging
  function DragEnd(e) {
  	$("#nextbutton").show();
    drag = null;
    canvas.style.cursor = "default";
    DrawCanvas();
    var currentdate = new Date(); 
	var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

	var AB = Math.sqrt(Math.pow(point.cp1.x-100,2)+ Math.pow(point.cp1.y-250,2));    
    var BC = Math.sqrt(Math.pow(point.cp1.x-400,2)+ Math.pow(point.cp1.y-250,2)); 
    var AC = Math.sqrt(Math.pow(400-100,2)+ Math.pow(250-250,2));
    //console.log();
    var radians = Math.acos((BC*BC+AB*AB-AC*AC)/(2*BC*AB));
    var degrees = radians * (180/3.141592653589793);
    var logValue = parseInt(180-degrees);

    logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"line_shape_3","value":logValue,"start_value":"false","end_value":"false","start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});
  }

  
  // event parser
  function MousePos(event) {
    event = (event ? event : window.event);
    return {
      x: event.pageX - canvas.offsetLeft,
      y: event.pageY - canvas.offsetTop
    }
  }
  // start
  canvas = document.getElementById("mycanvas");
  code = document.getElementById("code");
  if (canvas.getContext) {
    ctx = canvas.getContext("2d");
    Init(canvas.className == "quadratic");
  }
  
})(); 
	}


//Question 20
function drawQ20(){
	var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"angle_3","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});

	$("#mycanvas").hide();
		$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
		d3.selectAll("svg").remove();
		$("#questiontext").html("<p>Make the inner angle between the two lines <b>75%</b> of its current value.</p>");
		
		var svg, frameGroup, dragRect, dragBarTop, dragBarRight, rotateHandler,
    x1 = 300, y1 = 250,
    x2 = 500, y2 = 200
    angle = 0,
    width = 200, height = 5,
    bar = 6,
    that = this;

svg = d3.select('#viz').append('svg').attr({
    width: 800,
    height: 500
});
svg.append("rect")
       .attr("x",0)
       .attr("y",0)
       .attr("width",800)
       .attr("height",500)
       .attr("fill","white")
       .style("stroke","black");
frameGroup = svg.append('g')
.attr({
    'pointer-events': 'all',
    'class': 'frameGroup'
});

staticDragLine = frameGroup.append("line")
					 .attr("class", "staticDragLine")
					 .attr("x1",x1)
					 .attr("y1",y1)
					 .attr("x2",x2)
					 .attr("y2",y2)
					 .style("stroke","black")
					 .style("stroke-opacity",0.2);

dragLine = frameGroup.append("line")
					 .attr("class", "dragLine")
					 .attr("x1",x1)
					 .attr("y1",y1)
					 .attr("x2",x2)
					 .attr("y2",y2)
					 .style("stroke","black")
					 .style("stroke-width",2);

staticLine = svg.append("line")
					 .attr("class", "dragLine1")
					 .attr("x1",x1)
					 .attr("y1",y1)
					 .attr("x2",x1+200)
					 .attr("y2",y1)
					 .style("stroke","black")
					 .style("stroke-width",2);

var initialAngle = Math.atan2(y2-y1, x2-x1) * (180 / Math.PI);
rotateHandler = frameGroup.append('circle')
.attr('class', 'rotateHandler')
.attr('r', bar)
.attr('fill', 'black')
.attr('fill-opacity', 1)
.attr('stroke-width', 1)
.attr('stroke', 'white')
.attr("cursor","move")
.attr("cx",x2)
.attr("cy",y2)
.call(d3.behavior.drag().on('drag', function() {
    var pointerX = d3.event.x,
        pointerY = d3.event.y;
	
    angle = Math.atan2(pointerY-y1, pointerX-x1) * (180 / Math.PI);
    $("#nextbutton").show();
    if(angle<=0){
    	positionate();
    }
}));

var skipLog=1;

function positionate() {
    var rotate, translate;
    
    if(angle>initialAngle){
    	rotate = ' rotate(' + (angle-initialAngle) + ', ' + x1 + ', ' + y1 + ')';	
    }else{
    	rotate = ' rotate(' + (-1*(initialAngle-angle)) + ', ' + x1 + ', ' + y1 + ')';	
    }
	translate = 'translate(' + 0 + ',' + 0 + ')';
    dragLine.attr('transform', translate + rotate);
    
    rotateHandler.attr('transform', translate + rotate);
    
	var currentdate = new Date(); 
	var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

    if(skipLog!=1){	
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"angle_3","value":(-1*angle),"start_value":"false","end_value":"false","start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});	
   	}
	skipLog=0;
}

}

//Question 21
	function drawQ21(){
		var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"circle_area_3","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});

		$("#mycanvas").hide();
		$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
		d3.selectAll("svg").remove();
		$("#questiontext").html("<p>Make the area of the circle <b>75%</b> of its current value.</p>");
		
		var svg, frameGroup, dragRect, dragBarTop, dragBarRight, rotateHandler,
    x = 500, y = 325,
    angle = 0,
    r = 40//, height = 5,
    dragR = 6,
    that = this;

    svg = d3.select('#viz').append('svg').attr({
        width: 1000,
        height: 650
    });

    svg.append("rect")
       .attr("x",0)
       .attr("y",0)
       .attr("width",1000)
       .attr("height",650)
       .attr("fill","white")
       .style("stroke","black");


         svg.append("circle")
       .attr("class","staticCircle")
       .attr("cx",x)
       .attr("cy",y)
       .attr("r",r)
       .attr("fill","black")
       .style("opacity",0.2);


    svg.append("circle")
       .attr("class","vizelement")
       .attr("cx",x)
       .attr("cy",y)
       .attr("r",r)
       .attr("fill","black")
       .style("opacity",0.5);

    svg.append("circle")
       .attr("class","circleareadragger")
       .attr("cx",x+r)
       .attr("cy",y)
       .attr("r",dragR)
       .attr("fill","black")
       .call(d3.behavior.drag().on('drag', function() {
        r = r + d3.event.dx;
        if (r < dragR) {
            return;
        }        
        positionate();
    }));
    //positionate(); 

    function positionate() {
    d3.select(".vizelement").attr('r', r);
    $("#nextbutton").show();
    translate = 'translate(' + (r-40) + ',' + 0 + ')';
    d3.select('.circleareadragger').attr('transform', translate);
    var currentdate = new Date(); 
	var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

    	logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"circle_area_3","value":r,"start_value":"false","end_value":"false","start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});	
    }		

	}

//Question 22
function drawQ22(){
	var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"horizontal_slider_3","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});

	$("#mycanvas").hide();
	$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
	d3.selectAll("svg").remove();
	$("#questiontext").html("<p>Make the slider box's position <b>75%</b> of its current value.</p>");
	var x = document.body.offsetWidth/3;
	$('#viz').append("<div id=\"sliderDiv1\" align='center' style=\"width:800px;margin-left: "+x+"px;margin-right: auto;position:absolute;\"></div>");
	$('#viz').append("<div id=\"sliderDiv\" align='center' style=\"width:800px;margin-left: "+x+"px;margin-right: auto;z-index:10;\"></div>");

	d3.select('#sliderDiv1').call(d3.slider().value(50)).style("opacity",0.5);

	d3.select('#sliderDiv').call(d3.slider().value(50).on("slide", function(evt, value) {
	  $("#nextbutton").show();
	  var currentdate = new Date(); 
	  var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

    logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"horizontal_slider_3","value":value,"start_value":"false","end_value":"false","start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});	
    }).axis(d3.svg.axis().orient("bottom").ticks("1")));	
    d3.select(".d3-slider-axis.d3-slider-axis-bottom").selectAll("text").each(function(d){
    	//console.log(d)
    	if(d=="0"){
    		d3.select(this).text("low")
    	}else if(d=="100"){
    		d3.select(this).text("high")
    	}
    })

}

//Question 23
function drawQ23(){
	var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"square_area_3","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});

	$("#mycanvas").hide();
	$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
	d3.selectAll("svg").remove();
	$("#questiontext").html("<p>Make the area of the square <b>75%</b> of its current value.</p>");
	

	var svg, frameGroup, dragRect, dragBarTop, dragBarRight, rotateHandler,
    x = 400, y = 150,
    width = 200, height = 200,
    dragR = 6,
    that = this;

    svg = d3.select('#viz').append('svg').attr({
        width: 1500,
        height: 700
    });
    svg.append("rect")
       .attr("x",0)
       .attr("y",0)
       .attr("width",1500)
       .attr("height",700)
       .attr("fill","white")
       .style("stroke","black");


        svg.append("rect")
       .attr("class","staticSquare")
       .attr("x",x)
       .attr("y",y)
       .attr("width",width)
       .attr("height",height)
       .attr("fill","black")
       .style("opacity",0.2);


    svg.append("rect")
       .attr("class","vizelement")
       .attr("x",x)
       .attr("y",y)
       .attr("width",width)
       .attr("height",height)
       .attr("fill","black")
       .style("opacity",0.5);

    centerX = x + width;
    centerY = y + height;

var pointerX,pointerY;
    svg.append("circle")
       .attr("class","rectareadragger")
       .attr("cx",x+width)
       .attr("cy",y+height)
       .attr("r",dragR)
       .attr("fill","black")
       .call(d3.behavior.drag().on('drag', function() {
        height = height + d3.event.dy;
        width = width + d3.event.dy;
        if ((width*height) < (Math.PI*dragR*dragR)) {
            return;
        }        
        pointerX = d3.event.sourceEvent.x,
        pointerY = d3.event.sourceEvent.y;
                //angle = Math.atan2(pointerY - centerY, pointerX - centerX) * (180 / Math.PI);
        
        if(width<10 && height<10){
        	return;
        }else{
        	positionate();
        }
    }));
    //positionate(); 

    function positionate() {
    $("#nextbutton").show();
    d3.select(".vizelement").attr('width', width).attr('height', height);
    //translate = 'translate(' + (r-40) + ',' + 0 + ')';
    //d3.select('.dragger').attr('transform', translate);
    //console.log(width,height)
    //rotate = 'rotate(' + angle + ', ' + (-1 * width / 2) + ', ' + 0 + ')';
    translate = 'translate(' + (width-200) + ',' + (height-200) + ')';
    d3.select('.rectareadragger').attr('transform', translate);
    var currentdate = new Date(); 
	var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

    logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"square_area_3","value":(width*height)/1000,"start_value":"false","end_value":"false","start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});
    }
}

//question 24
function drawQ24(){
var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"width_3","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});

	$("#mycanvas").hide();
	$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
	d3.selectAll("svg").remove();
	$("#questiontext").html("<p>Make the width <b>75%</b> of its current value.</p>");
	
	var svg, frameGroup, dragRect, dragBarTop, dragBarRight, rotateHandler,
    x = 300, y = 100,
    angle = 0,
    width = 200, height = 100,
    bar = 6,
    that = this;

svg = d3.select('#viz').append('svg').attr({
    width: 1000,
    height: 300
});
svg.append("rect")
       .attr("x",0)
       .attr("y",0)
       .attr("width",1000)
       .attr("height",300)
       .attr("fill","white")
       .style("stroke","black");


frameGroup = svg.append('g')
.attr({
    'class': 'dummy frameGroup'
});

staticRect = frameGroup.append('rect')
.attr('class', 'dummy dragRectStatic')
.attr('fill', 'black')
.attr('fill-opacity', 0.1)
.attr("width",width)
.attr("height",height)
.attr("x",x)
.attr("y",y);

dragRect = frameGroup.append('rect')
.attr('class', 'dummy dragRect')
.attr('fill', 'black')
.attr('fill-opacity', 0.3);
dragBarRight = frameGroup.append('rect')
.attr('class', 'dummy dragBarRight')
.attr('fill', 'black')
.attr('fill-opacity', 0.6)
.attr('cursor', 'ew-resize')
.call(d3.behavior.drag().on('drag', function() {
    width = width + d3.event.dx;
    if (width < bar) {
        return;
    }
    $("#nextbutton").show();
    positionate();
}));
var skipLog=1;
positionate();

function positionate() {
    var rotate, translate;
    rotate = ' rotate(' + angle + ', ' + (width / 2) + ', ' + (height / 2) + ')';
    translate = 'translate(' + x + ',' + y + ')';
    dragRect.attr('transform', translate + rotate);
    dragRect.attr('width', width);
    dragRect.attr('height', height);

    rotate = ' rotate(' + angle + ', ' + (-1 * width / 2) + ', ' + (height / 2) + ')';
    translate = 'translate(' + (x + width) + ',' + y + ')';
    dragBarRight.attr('transform', translate + rotate);
    dragBarRight.attr('height', height);
    dragBarRight.attr('width', bar);

    var currentdate = new Date(); 
	var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

          if(skipLog!=1){
          	logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"width_3","value":width,"start_value":"false","end_value":"false","start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});
          }
       skipLog=0;
    
}
}
//end of questions 17-24

//-----------------------------
//Questions 25-32 (make 125%)
//-----------------------------
	//Question 25
	function drawQ25(){
		var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"height_4","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});

		$("#mycanvas").hide();
		$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
		d3.selectAll("svg").remove();
		$("#questiontext").html("<p>Make the height of the rectangle <b>125%</b> of its current value.</p>");

		var svg, frameGroup, dragRect, dragBarTop, dragBarRight, rotateHandler,
	    x = 300, y = 400,
	    angle = 0,
	    width = 200, height = 100,
	    bar = 6,
	    that = this;
		svg = d3.select('#viz').append('svg').attr({
		    width: 800,
		    height: 550
		});

		svg.append("rect")
	       .attr("x",0)
	       .attr("y",0)
	       .attr("width",800)
	       .attr("height",550)
	       .attr("fill","white")
	       .style("stroke","black");

		frameGroup = svg.append('g')
		.attr({
		    'pointer-events': 'all',
		    'class': 'dummy frameGroup'
		});


		dragRectStatic = frameGroup.append('rect')
		.attr('class', 'dummy dragRectStatic')
		.attr('fill', 'black')
		.attr('fill-opacity', 0.2)
		.attr("x",x)
		.attr("y",y)
		.attr("width",width)
		.attr("height",height);


		dragRect = frameGroup.append('rect')
		.attr('class', 'dummy dragRect')
		.attr('fill', 'black')
		.attr('fill-opacity', 0.3);

		dragBarTop = frameGroup.append('rect')
		.attr('class', 'dummy dragBarTop')
		.attr('fill', 'black')
		.attr('fill-opacity', 0.6)
		.attr('cursor', 'ns-resize')
		.call(d3.behavior.drag().on('drag', function() {
		    height = height + (y - d3.event.y);
		    y = d3.event.y;
		    if (height < bar) {
		        return;
		    }
		    $("#nextbutton").show();
		    positionate();
		}));
		var skipLog=1;
		positionate();

		function positionate() {
		    var rotate, translate;
		    rotate = ' rotate(' + angle + ', ' + (width / 2) + ', ' + (height / 2) + ')';
		    translate = 'translate(' + x + ',' + y + ')';
		    dragRect.attr('transform', translate + rotate);
		    dragRect.attr('width', width);
		    dragRect.attr('height', height);

		    rotate = ' rotate(' + angle + ', ' + (width / 2) + ', ' + (height / 2) + ')';
		    translate = 'translate(' + x + ',' + y + ')';
		    dragBarTop.attr('transform', translate + rotate);
		    dragBarTop.attr('height', bar);
		    dragBarTop.attr('width', width);

			var currentdate = new Date(); 
			var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

		   	if(skipLog!=1){
		   		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"height_4","value":height,"start_value":"false","end_value":"false","start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});
		   	}
		 	skipLog=0;
		}
	}


//Question 26	
	function drawQ26(){
		var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"horizontal_direction_4","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});

		$("#mycanvas").hide();
		$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
		d3.selectAll("svg").remove();
		$("#questiontext").html("<p>Move the circle by such that the distance between the target(gray rectangle on the right) is <b>125%</b> of its current value.</p>");
		
			var svg, frameGroup, dragRect, dragBarTop, dragBarRight, rotateHandler,
    x = 200, y = 100,
    angle = 0,
    width = 200, height = 100,
    bar = 6,
    that = this;

svg = d3.select('#viz').append('svg').attr({
    width: 1000,
    height: 300
});
svg.append("rect")
       .attr("x",0)
       .attr("y",0)
       .attr("width",1000)
       .attr("height",300)
       .attr("fill","white")
       .style("stroke","black");


frameGroup = svg.append('g')
.attr({
    'class': 'dummy frameGroup'
});

targetRect = frameGroup.append('rect')
.attr('class', 'targetRect')
.attr('fill', 'black')
.style('fill-opacity', '0.4')
.attr("x",900)
.attr("y",100)
.attr("width",5)
.attr("height",50);


frameGroup.append('circle')
				  .attr('class','dummy dragCircleRightStatic')				  
				  .attr('r',8)
				  .attr('cx',400)
				  .attr('cy',125)
				  .style('fill','black')
				  .style('fill-opacity',0.2);


dragCircleRight = frameGroup.append('circle')
.attr('class', 'dummy dragCircleRight')
.attr('r',8)
.attr('cx',x)
.attr('cy',25)
.attr('fill', 'black')
.attr('cursor', 'ew-resize')
.call(d3.behavior.drag().on('drag', function() {
    width = width + d3.event.dx;
    $("#nextbutton").show();
    positionate();
}));


var skipLog=1;
positionate();

function positionate() {
    var rotate, translate;
    translate = 'translate(' + (width) + ',' + y + ')';
    dragCircleRight.attr('transform', translate );

    var currentdate = new Date(); 
	var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

          if(skipLog!=1){    
      		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"horizontal_direction_4","value":900-(width+200),"start_value":"false","end_value":"false","start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});
    	}
    	skipLog=0;
	}
}


//Question 27
	function drawQ27(){
		var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"line_shape_4","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});

		$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
		d3.selectAll("svg").remove();
		$("#questiontext").html("<p>Make the curve <b>125%</b> of its current value.</p>");
		$("#mycanvas").show();
		(function() {

  var canvas, ctx, code, point, style, drag = null, dPoint, fakePoint;

  // define initial points
  function Init(quadratic) {

  	fakePoint = {
      p1: { x:100, y:250 },
      p2: { x:400, y:250 }
    };

  	point1 = {
      p1: { x:100, y:250 },
      p2: { x:400, y:250 }
    };
    
    if (quadratic) {
      point1.cp1 = { x: 250, y: 200 };      
    }
    else {
      point1.cp1 = { x: 150, y: 150 };
      point1.cp2 = { x: 350, y: 150 };
    }
    // default styles
    style1 = {
      curve:  { width: 2, color: "#ccc" },
      cpline: { width: 1, color: "#ffffff" },
      point1: { radius: 5, width: 1, color: "#ccc", fill: "rgba(255,255,255,0.5)", arc1: 0, arc2: 2 * Math.PI },
    }



    point = {
      p1: { x:100, y:250 },
      p2: { x:400, y:250 }
    };
    
    if (quadratic) {
      point.cp1 = { x: 250, y: 200 };
      fakePoint.cp1 = { x: 250, y: 225 };
    }
    else {
      point.cp1 = { x: 150, y: 150 };
      point.cp2 = { x: 350, y: 150 };
    }
    
    // default styles
    style = {
      curve:  { width: 2, color: "#333" },
      cpline: { width: 1, color: "#ffffff" },
      point: { radius: 5, width: 1, color: "#333", fill: "rgba(255,255,255,0.5)", arc1: 0, arc2: 2 * Math.PI },
      fakePoint: { radius: 5, width: 1, color: "#333", fill: "rgba(255,255,255,0.5)", arc1: 0, arc2: 2 * Math.PI },
    }
    
    // line style defaults
    ctx.lineCap = "round";
    ctx.lineJoin = "round";
    
    // event handlers
    canvas.onmousedown = DragStart;
    canvas.onmousemove = Dragging;
    canvas.onmouseup = canvas.onmouseout = DragEnd;
    /*
    var currentdate = new Date(); 
			var datetime = "Last Sync: " + currentdate.getDate() + "/"
		                + (currentdate.getMonth()+1)  + "/" 
		                + currentdate.getFullYear() + " @ "  
		                + currentdate.getHours() + ":"  
		                + currentdate.getMinutes() + ":" 
		                + currentdate.getSeconds() + ":" 
		                + currentdate.getMilliseconds();
    logs.push({"user":sessionUserId,"datetime":datetime,"question":"line_shape_1","value":"("+point.cp1.x+","+point.cp1.y+","+point.p2.x+","+point.p2.y+")","start_value":"true","end_value":"false"})
    */
    DrawCanvas();
  }
  
  
  // draw canvas
  function DrawCanvas() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    

    // control lines
    ctx.lineWidth = style1.cpline.width;
    ctx.strokeStyle = style1.cpline.color;
    ctx.beginPath();
    ctx.moveTo(point1.p1.x, point1.p1.y);
    
    ctx.lineTo(point1.cp1.x, point1.cp1.y);
    ctx.lineTo(point1.cp1.x, point1.cp1.y);
    if (point1.cp2) {
      ctx.moveTo(point1.p2.x, point1.p2.y);
      ctx.lineTo(point1.cp2.x, point1.cp2.y);
    }
    else {
      ctx.lineTo(point1.p2.x, point1.p2.y);
    }
    ctx.stroke();
    
    // curve
    ctx.lineWidth = style1.curve.width;
    ctx.strokeStyle = style1.curve.color;
    ctx.beginPath();
    ctx.moveTo(point1.p1.x, point1.p1.y);
    if (point1.cp2) {
      ctx.bezierCurveTo(point1.cp1.x, point1.cp1.y, point1.cp2.x, point1.cp2.y, point1.p2.x, point1.p2.y);
    }
    else {
      ctx.quadraticCurveTo(point1.cp1.x, point1.cp1.y, point1.p2.x, point1.p2.y);
    }
    ctx.stroke();





    // control lines
    ctx.lineWidth = style.cpline.width;
    ctx.strokeStyle = style.cpline.color;
    ctx.beginPath();
    ctx.moveTo(point.p1.x, point.p1.y);
    ctx.lineTo(point.cp1.x, point.cp1.y);
    if (point.cp2) {
      ctx.moveTo(point.p2.x, point.p2.y);
      ctx.lineTo(point.cp2.x, point.cp2.y);
    }
    else {
      ctx.lineTo(point.p2.x, point.p2.y);
    }
    ctx.stroke();
    
    // curve
    ctx.lineWidth = style.curve.width;
    ctx.strokeStyle = style.curve.color;
    ctx.beginPath();
    ctx.moveTo(point.p1.x, point.p1.y);
    if (point.cp2) {
      ctx.bezierCurveTo(point.cp1.x, point.cp1.y, point.cp2.x, point.cp2.y, point.p2.x, point.p2.y);
    }
    else {
      ctx.quadraticCurveTo(point.cp1.x, point.cp1.y, point.p2.x, point.p2.y);
    }
    ctx.stroke();

    // control points    

      ctx.lineWidth = style.point.width;
      ctx.strokeStyle = style.point.color;
      ctx.fillStyle = style.point.fill;
      ctx.beginPath();
      ctx.arc(point.cp1.x, point.cp1.y, style.point.radius, style.point.arc1, style.point.arc2, true);
      ctx.fill();
      //ctx.stroke();
    
      //fakePoint
      ctx.lineWidth = style.fakePoint.width;
      ctx.strokeStyle = style.fakePoint.color;
      ctx.fillStyle = style.fakePoint.fill;
      ctx.beginPath();
      ctx.arc(fakePoint.cp1.x, fakePoint.cp1.y, style.fakePoint.radius, style.fakePoint.arc1, style.fakePoint.arc2, true);
      ctx.fill();
      ctx.stroke();
}
  
  
  
  // start dragging
  function DragStart(e) {
    e = MousePos(e);
    var dx, dy;
    for (var p in fakePoint) {
      dx = fakePoint[p].x - e.x;
      dy = fakePoint[p].y - e.y;
      if ((dx * dx) + (dy * dy) < style.fakePoint.radius * style.fakePoint.radius) {
        drag = p;
        dPoint = e;
        canvas.style.cursor = "move";
        return;
      }
    }
  }
  
  
  // dragging
  function Dragging(e) {
    if (drag) {
      e = MousePos(e);
      //console.log(e)
      if(e.y<=250){
	      fakePoint[drag].x = fakePoint.cp1.x;
	      fakePoint[drag].y += e.y - dPoint.y;
	      point[drag].y = 250-((250-fakePoint[drag].y)*2)
	      dPoint = e;
	      
      var currentdate = new Date(); 
var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

var AB = Math.sqrt(Math.pow(point.cp1.x-100,2)+ Math.pow(point.cp1.y-250,2));    
    var BC = Math.sqrt(Math.pow(point.cp1.x-400,2)+ Math.pow(point.cp1.y-250,2)); 
    var AC = Math.sqrt(Math.pow(400-100,2)+ Math.pow(250-250,2));
    //console.log();
    var radians = Math.acos((BC*BC+AB*AB-AC*AC)/(2*BC*AB));
    var degrees = radians * (180/3.141592653589793);
    var logValue = parseInt(180-degrees);


logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"line_shape_4","value":logValue,"start_value":"false","end_value":"false","start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});
      DrawCanvas();
      }   
    }
  }
  
  
  // end dragging
  function DragEnd(e) {
  	$("#nextbutton").show();
    drag = null;
    canvas.style.cursor = "default";
    DrawCanvas();
    var currentdate = new Date(); 
	var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();


	var AB = Math.sqrt(Math.pow(point.cp1.x-100,2)+ Math.pow(point.cp1.y-250,2));    
    var BC = Math.sqrt(Math.pow(point.cp1.x-400,2)+ Math.pow(point.cp1.y-250,2)); 
    var AC = Math.sqrt(Math.pow(400-100,2)+ Math.pow(250-250,2));
    //console.log();
    var radians = Math.acos((BC*BC+AB*AB-AC*AC)/(2*BC*AB));
    var degrees = radians * (180/3.141592653589793);
    var logValue = parseInt(180-degrees);


    logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"line_shape_4","value":logValue,"start_value":"false","end_value":"false","start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});
  }

  
  // event parser
  function MousePos(event) {
    event = (event ? event : window.event);
    return {
      x: event.pageX - canvas.offsetLeft,
      y: event.pageY - canvas.offsetTop
    }
  }
  // start
  canvas = document.getElementById("mycanvas");
  code = document.getElementById("code");
  if (canvas.getContext) {
    ctx = canvas.getContext("2d");
    Init(canvas.className == "quadratic");
  }
  
})(); 
	}


//Question 28
function drawQ28(){

	var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"angle_4","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});

	$("#mycanvas").hide();
		$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
		d3.selectAll("svg").remove();
		$("#questiontext").html("<p>Make the inner angle between the two lines <b>125%</b> of its current value.</p>");
		
		var svg, frameGroup, dragRect, dragBarTop, dragBarRight, rotateHandler,
    x1 = 300, y1 = 250,
    x2 = 500, y2 = 200
    angle = 0,
    width = 200, height = 5,
    bar = 6,
    that = this;

svg = d3.select('#viz').append('svg').attr({
    width: 800,
    height: 500
});
svg.append("rect")
       .attr("x",0)
       .attr("y",0)
       .attr("width",800)
       .attr("height",500)
       .attr("fill","white")
       .style("stroke","black");
frameGroup = svg.append('g')
.attr({
    'pointer-events': 'all',
    'class': 'frameGroup'
});

staticDragLine = frameGroup.append("line")
					 .attr("class", "staticDragLine")
					 .attr("x1",x1)
					 .attr("y1",y1)
					 .attr("x2",x2)
					 .attr("y2",y2)
					 .style("stroke","black")
					 .style("stroke-opacity",0.2);

dragLine = frameGroup.append("line")
					 .attr("class", "dragLine")
					 .attr("x1",x1)
					 .attr("y1",y1)
					 .attr("x2",x2)
					 .attr("y2",y2)
					 .style("stroke","black")
					 .style("stroke-width",2);

staticLine = svg.append("line")
					 .attr("class", "dragLine1")
					 .attr("x1",x1)
					 .attr("y1",y1)
					 .attr("x2",x1+200)
					 .attr("y2",y1)
					 .style("stroke","black")
					 .style("stroke-width",2);

var initialAngle = Math.atan2(y2-y1, x2-x1) * (180 / Math.PI);
rotateHandler = frameGroup.append('circle')
.attr('class', 'rotateHandler')
.attr('r', bar)
.attr('fill', 'black')
.attr('fill-opacity', 1)
.attr('stroke-width', 1)
.attr('stroke', 'white')
.attr("cursor","move")
.attr("cx",x2)
.attr("cy",y2)
.call(d3.behavior.drag().on('drag', function() {
    var pointerX = d3.event.x,
        pointerY = d3.event.y;
	
    angle = Math.atan2(pointerY-y1, pointerX-x1) * (180 / Math.PI);
    $("#nextbutton").show();
    if(angle<=0){
    	positionate();
    }
}));

var skipLog=1;

function positionate() {
    var rotate, translate;
    
    if(angle>initialAngle){
    	rotate = ' rotate(' + (angle-initialAngle) + ', ' + x1 + ', ' + y1 + ')';	
    }else{
    	rotate = ' rotate(' + (-1*(initialAngle-angle)) + ', ' + x1 + ', ' + y1 + ')';	
    }
	translate = 'translate(' + 0 + ',' + 0 + ')';
    dragLine.attr('transform', translate + rotate);
    
    rotateHandler.attr('transform', translate + rotate);
    
	var currentdate = new Date(); 
	var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

    if(skipLog!=1){	
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"angle_4","value":(-1*angle),"start_value":"false","end_value":"false","start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});	
   	}
	skipLog=0;
}

}

//Question 29
	function drawQ29(){
		var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"circle_area_4","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});


		$("#mycanvas").hide();
		$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
		d3.selectAll("svg").remove();
		$("#questiontext").html("<p>Make the area of the circle <b>125%</b> of its current value.</p>");
		
		var svg, frameGroup, dragRect, dragBarTop, dragBarRight, rotateHandler,
    x = 500, y = 325,
    angle = 0,
    r = 40//, height = 5,
    dragR = 6,
    that = this;

    svg = d3.select('#viz').append('svg').attr({
        width: 1000,
        height: 650
    });

    svg.append("rect")
       .attr("x",0)
       .attr("y",0)
       .attr("width",1000)
       .attr("height",650)
       .attr("fill","white")
       .style("stroke","black");


  svg.append("circle")
       .attr("class","staticCircle")
       .attr("cx",x)
       .attr("cy",y)
       .attr("r",r)
       .attr("fill","black")
       .style("opacity",0.2);


    svg.append("circle")
       .attr("class","vizelement")
       .attr("cx",x)
       .attr("cy",y)
       .attr("r",r)
       .attr("fill","black")
       .style("opacity",0.5);

    svg.append("circle")
       .attr("class","circleareadragger")
       .attr("cx",x+r)
       .attr("cy",y)
       .attr("r",dragR)
       .attr("fill","black")
       .call(d3.behavior.drag().on('drag', function() {
        r = r + d3.event.dx;
        if (r < dragR) {
            return;
        }        
        positionate();
    }));
    //positionate(); 

    function positionate() {
    d3.select(".vizelement").attr('r', r);
    $("#nextbutton").show();
    translate = 'translate(' + (r-40) + ',' + 0 + ')';
    d3.select('.circleareadragger').attr('transform', translate);
    var currentdate = new Date(); 
	var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

    	logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"circle_area_4","value":r,"start_value":"false","end_value":"false","start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});	
    }		

	}

//Question 30
function drawQ30(){
	var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"horizontal_slider_4","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});

	$("#mycanvas").hide();
	$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
	d3.selectAll("svg").remove();
	$("#questiontext").html("<p>Make the slider box's position <b>125%</b> of its current value.</p>");
	var x = document.body.offsetWidth/3;
	$('#viz').append("<div id=\"sliderDiv1\" align='center' style=\"width:800px;margin-left: "+x+"px;margin-right: auto;position:absolute;\"></div>");
	$('#viz').append("<div id=\"sliderDiv\" align='center' style=\"width:800px;margin-left: "+x+"px;margin-right: auto;z-index:10;\"></div>");

	d3.select('#sliderDiv1').call(d3.slider().value(50)).style("opacity",0.5);

	d3.select('#sliderDiv').call(d3.slider().value(50).on("slide", function(evt, value) {
	  $("#nextbutton").show();
	  var currentdate = new Date(); 
	  var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

    logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"horizontal_slider_4","value":value,"start_value":"false","end_value":"false","start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});	
    }).axis(d3.svg.axis().orient("bottom").ticks("1")));	
    d3.select(".d3-slider-axis.d3-slider-axis-bottom").selectAll("text").each(function(d){
    	//console.log(d)
    	if(d=="0"){
    		d3.select(this).text("low")
    	}else if(d=="100"){
    		d3.select(this).text("high")
    	}
    })

}

//Question 31
function drawQ31(){
	var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"square_area_4","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});

	$("#mycanvas").hide();
	$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
	d3.selectAll("svg").remove();
	$("#questiontext").html("<p>Make the area of the square <b>125%</b> of its current value.</p>");
	

	var svg, frameGroup, dragRect, dragBarTop, dragBarRight, rotateHandler,
    x = 400, y = 150,
    width = 200, height = 200,
    dragR = 6,
    that = this;

    svg = d3.select('#viz').append('svg').attr({
        width: 1500,
        height: 700
    });
    svg.append("rect")
       .attr("x",0)
       .attr("y",0)
       .attr("width",1500)
       .attr("height",700)
       .attr("fill","white")
       .style("stroke","black");


        svg.append("rect")
       .attr("class","staticSquare")
       .attr("x",x)
       .attr("y",y)
       .attr("width",width)
       .attr("height",height)
       .attr("fill","black")
       .style("opacity",0.2);

    svg.append("rect")
       .attr("class","vizelement")
       .attr("x",x)
       .attr("y",y)
       .attr("width",width)
       .attr("height",height)
       .attr("fill","black")
       .style("opacity",0.5);

    centerX = x + width;
    centerY = y + height;

var pointerX,pointerY;
    svg.append("circle")
       .attr("class","rectareadragger")
       .attr("cx",x+width)
       .attr("cy",y+height)
       .attr("r",dragR)
       .attr("fill","black")
       .call(d3.behavior.drag().on('drag', function() {
        height = height + d3.event.dy;
        width = width + d3.event.dy;
        if ((width*height) < (Math.PI*dragR*dragR)) {
            return;
        }        
        pointerX = d3.event.sourceEvent.x,
        pointerY = d3.event.sourceEvent.y;
                //angle = Math.atan2(pointerY - centerY, pointerX - centerX) * (180 / Math.PI);
        
        if(width<10 && height<10){
        	return;
        }else{
        	positionate();
        }
    }));
    //positionate(); 

    function positionate() {
    $("#nextbutton").show();
    d3.select(".vizelement").attr('width', width).attr('height', height);
    //translate = 'translate(' + (r-40) + ',' + 0 + ')';
    //d3.select('.dragger').attr('transform', translate);
    //console.log(width,height)
    //rotate = 'rotate(' + angle + ', ' + (-1 * width / 2) + ', ' + 0 + ')';
    translate = 'translate(' + (width-200) + ',' + (height-200) + ')';
    d3.select('.rectareadragger').attr('transform', translate);
    var currentdate = new Date(); 
	var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

    logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"square_area_4","value":(width*height)/1000,"start_value":"false","end_value":"false","start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});
    }
}

//question 32
function drawQ32(){
var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"width_4","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});

	$("#mycanvas").hide();
	$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
	d3.selectAll("svg").remove();
	$("#questiontext").html("<p>Make the width <b>125%</b> of its current value.</p>");
	
	var svg, frameGroup, dragRect, dragBarTop, dragBarRight, rotateHandler,
    x = 300, y = 100,
    angle = 0,
    width = 200, height = 100,
    bar = 6,
    that = this;

svg = d3.select('#viz').append('svg').attr({
    width: 1000,
    height: 300
});
svg.append("rect")
       .attr("x",0)
       .attr("y",0)
       .attr("width",1000)
       .attr("height",300)
       .attr("fill","white")
       .style("stroke","black");


frameGroup = svg.append('g')
.attr({
    'class': 'dummy frameGroup'
});


staticRect = frameGroup.append('rect')
.attr('class', 'dummy dragRectStatic')
.attr('fill', 'black')
.attr('fill-opacity', 0.1)
.attr("width",width)
.attr("height",height)
.attr("x",x)
.attr("y",y);


dragRect = frameGroup.append('rect')
.attr('class', 'dummy dragRect')
.attr('fill', 'black')
.attr('fill-opacity', 0.3);
dragBarRight = frameGroup.append('rect')
.attr('class', 'dummy dragBarRight')
.attr('fill', 'black')
.attr('fill-opacity', 0.6)
.attr('cursor', 'ew-resize')
.call(d3.behavior.drag().on('drag', function() {
    width = width + d3.event.dx;
    if (width < bar) {
        return;
    }
    $("#nextbutton").show();
    positionate();
}));
var skipLog=1;
positionate();

function positionate() {
    var rotate, translate;
    rotate = ' rotate(' + angle + ', ' + (width / 2) + ', ' + (height / 2) + ')';
    translate = 'translate(' + x + ',' + y + ')';
    dragRect.attr('transform', translate + rotate);
    dragRect.attr('width', width);
    dragRect.attr('height', height);

    rotate = ' rotate(' + angle + ', ' + (-1 * width / 2) + ', ' + (height / 2) + ')';
    translate = 'translate(' + (x + width) + ',' + y + ')';
    dragBarRight.attr('transform', translate + rotate);
    dragBarRight.attr('height', height);
    dragBarRight.attr('width', bar);

    var currentdate = new Date(); 
	var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

          if(skipLog!=1){
          	logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"width_4","value":width,"start_value":"false","end_value":"false","start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});
          }
       skipLog=0;
    
}
}
//end of questions 25-32

//-----------------------------
//Questions 33-40 (make 150%)
//-----------------------------
	//Question 33
	function drawQ33(){
		var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"height_5","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});


		$("#mycanvas").hide();
		$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
		d3.selectAll("svg").remove();
		$("#questiontext").html("<p>Make the height of the rectangle <b>150%</b> of its current value.</p>");

		var svg, frameGroup, dragRect, dragBarTop, dragBarRight, rotateHandler,
	    x = 300, y = 400,
	    angle = 0,
	    width = 200, height = 100,
	    bar = 6,
	    that = this;
		svg = d3.select('#viz').append('svg').attr({
		    width: 800,
		    height: 550
		});

		svg.append("rect")
	       .attr("x",0)
	       .attr("y",0)
	       .attr("width",800)
	       .attr("height",550)
	       .attr("fill","white")
	       .style("stroke","black");


		frameGroup = svg.append('g')
		.attr({
		    'pointer-events': 'all',
		    'class': 'dummy frameGroup'
		});

		dragRectStatic = frameGroup.append('rect')
		.attr('class', 'dummy dragRectStatic')
		.attr('fill', 'black')
		.attr('fill-opacity', 0.2)
		.attr("x",x)
		.attr("y",y)
		.attr("width",width)
		.attr("height",height);


		dragRect = frameGroup.append('rect')
		.attr('class', 'dummy dragRect')
		.attr('fill', 'black')
		.attr('fill-opacity', 0.3);

		dragBarTop = frameGroup.append('rect')
		.attr('class', 'dummy dragBarTop')
		.attr('fill', 'black')
		.attr('fill-opacity', 0.6)
		.attr('cursor', 'ns-resize')
		.call(d3.behavior.drag().on('drag', function() {
		    height = height + (y - d3.event.y);
		    y = d3.event.y;
		    if (height < bar) {
		        return;
		    }
		    $("#nextbutton").show();
		    positionate();
		}));
		var skipLog=1;
		positionate();

		function positionate() {
		    var rotate, translate;
		    rotate = ' rotate(' + angle + ', ' + (width / 2) + ', ' + (height / 2) + ')';
		    translate = 'translate(' + x + ',' + y + ')';
		    dragRect.attr('transform', translate + rotate);
		    dragRect.attr('width', width);
		    dragRect.attr('height', height);

		    rotate = ' rotate(' + angle + ', ' + (width / 2) + ', ' + (height / 2) + ')';
		    translate = 'translate(' + x + ',' + y + ')';
		    dragBarTop.attr('transform', translate + rotate);
		    dragBarTop.attr('height', bar);
		    dragBarTop.attr('width', width);

			var currentdate = new Date(); 
			var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();


		   	if(skipLog!=1){
		   		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"height_5","value":height,"start_value":"false","end_value":"false","start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});
		   	}
		 	skipLog=0;
		}
	}


//Question 34	
	function drawQ34(){
		var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"horizontal_direction_5","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});

		$("#mycanvas").hide();
		$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
		d3.selectAll("svg").remove();
		$("#questiontext").html("<p>Move the circle such that the distance from the target (gray rectangle on the right) is <b>150%</b> of its current value.</p>");
		
			var svg, frameGroup, dragRect, dragBarTop, dragBarRight, rotateHandler,
    x = 200, y = 100,
    angle = 0,
    width = 200, height = 100,
    bar = 6,
    that = this;

svg = d3.select('#viz').append('svg').attr({
    width: 1000,
    height: 300
});
svg.append("rect")
       .attr("x",0)
       .attr("y",0)
       .attr("width",1000)
       .attr("height",300)
       .attr("fill","white")
       .style("stroke","black");


frameGroup = svg.append('g')
.attr({
    'class': 'dummy frameGroup'
});

targetRect = frameGroup.append('rect')
.attr('class', 'targetRect')
.attr('fill', 'black')
.style('fill-opacity', '0.4')
.attr("x",900)
.attr("y",100)
.attr("width",5)
.attr("height",50);

frameGroup.append('circle')
				  .attr('class','dummy dragCircleRightStatic')				  
				  .attr('r',8)
				  .attr('cx',400)
				  .attr('cy',125)
				  .style('fill','black')
				  .style('fill-opacity',0.2);


dragCircleRight = frameGroup.append('circle')
.attr('class', 'dummy dragCircleRight')
.attr('r',8)
.attr('cx',x)
.attr('cy',25)
.attr('fill', 'black')
.attr('cursor', 'ew-resize')
.call(d3.behavior.drag().on('drag', function() {
    width = width + d3.event.dx;
    $("#nextbutton").show();
    positionate();
}));


var skipLog=1;
positionate();

function positionate() {
    var rotate, translate;
    translate = 'translate(' + (width) + ',' + y + ')';
    dragCircleRight.attr('transform', translate );

    var currentdate = new Date(); 
	var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

          if(skipLog!=1){    
      		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"horizontal_direction_5","value":900-(width+200),"start_value":"false","end_value":"false","start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});
    	}
    	skipLog=0;
	}
}


//Question 35
	function drawQ35(){
		var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"line_shape_5","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});


		$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
		d3.selectAll("svg").remove();
		$("#questiontext").html("<p>Make the curve <b>150%</b> of its current value.</p>");
		$("#mycanvas").show();
		(function() {

  var canvas, ctx, code, point, style, drag = null, dPoint, fakePoint;

  // define initial points
  function Init(quadratic) {

  	fakePoint = {
      p1: { x:100, y:250 },
      p2: { x:400, y:250 }
    };

  	point1 = {
      p1: { x:100, y:250 },
      p2: { x:400, y:250 }
    };
    
    if (quadratic) {
      point1.cp1 = { x: 250, y: 200 };      
    }
    else {
      point1.cp1 = { x: 150, y: 150 };
      point1.cp2 = { x: 350, y: 150 };
    }
    // default styles
    style1 = {
      curve:  { width: 2, color: "#ccc" },
      cpline: { width: 1, color: "#ffffff" },
      point1: { radius: 5, width: 1, color: "#ccc", fill: "rgba(255,255,255,0.5)", arc1: 0, arc2: 2 * Math.PI },
    }



    point = {
      p1: { x:100, y:250 },
      p2: { x:400, y:250 }
    };
    
    if (quadratic) {
      point.cp1 = { x: 250, y: 200 };
      fakePoint.cp1 = { x: 250, y: 225 };
    }
    else {
      point.cp1 = { x: 150, y: 150 };
      point.cp2 = { x: 350, y: 150 };
    }
    
    // default styles
    style = {
      curve:  { width: 2, color: "#333" },
      cpline: { width: 1, color: "#ffffff" },
      point: { radius: 5, width: 1, color: "#333", fill: "rgba(255,255,255,0.5)", arc1: 0, arc2: 2 * Math.PI },
      fakePoint: { radius: 5, width: 1, color: "#333", fill: "rgba(255,255,255,0.5)", arc1: 0, arc2: 2 * Math.PI },
    }
    
    // line style defaults
    ctx.lineCap = "round";
    ctx.lineJoin = "round";
    
    // event handlers
    canvas.onmousedown = DragStart;
    canvas.onmousemove = Dragging;
    canvas.onmouseup = canvas.onmouseout = DragEnd;
    /*
    var currentdate = new Date(); 
			var datetime = "Last Sync: " + currentdate.getDate() + "/"
		                + (currentdate.getMonth()+1)  + "/" 
		                + currentdate.getFullYear() + " @ "  
		                + currentdate.getHours() + ":"  
		                + currentdate.getMinutes() + ":" 
		                + currentdate.getSeconds() + ":" 
		                + currentdate.getMilliseconds();
    logs.push({"user":sessionUserId,"datetime":datetime,"question":"line_shape_1","value":"("+point.cp1.x+","+point.cp1.y+","+point.p2.x+","+point.p2.y+")","start_value":"true","end_value":"false"})
    */
    DrawCanvas();
  }
  
  
  // draw canvas
  function DrawCanvas() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    

    // control lines
    ctx.lineWidth = style1.cpline.width;
    ctx.strokeStyle = style1.cpline.color;
    ctx.beginPath();
    ctx.moveTo(point1.p1.x, point1.p1.y);
    
    ctx.lineTo(point1.cp1.x, point1.cp1.y);
    ctx.lineTo(point1.cp1.x, point1.cp1.y);
    if (point1.cp2) {
      ctx.moveTo(point1.p2.x, point1.p2.y);
      ctx.lineTo(point1.cp2.x, point1.cp2.y);
    }
    else {
      ctx.lineTo(point1.p2.x, point1.p2.y);
    }
    ctx.stroke();
    
    // curve
    ctx.lineWidth = style1.curve.width;
    ctx.strokeStyle = style1.curve.color;
    ctx.beginPath();
    ctx.moveTo(point1.p1.x, point1.p1.y);
    if (point1.cp2) {
      ctx.bezierCurveTo(point1.cp1.x, point1.cp1.y, point1.cp2.x, point1.cp2.y, point1.p2.x, point1.p2.y);
    }
    else {
      ctx.quadraticCurveTo(point1.cp1.x, point1.cp1.y, point1.p2.x, point1.p2.y);
    }
    ctx.stroke();

    // control lines
    ctx.lineWidth = style.cpline.width;
    ctx.strokeStyle = style.cpline.color;
    ctx.beginPath();
    ctx.moveTo(point.p1.x, point.p1.y);
    ctx.lineTo(point.cp1.x, point.cp1.y);
    if (point.cp2) {
      ctx.moveTo(point.p2.x, point.p2.y);
      ctx.lineTo(point.cp2.x, point.cp2.y);
    }
    else {
      ctx.lineTo(point.p2.x, point.p2.y);
    }
    ctx.stroke();
    
    // curve
    ctx.lineWidth = style.curve.width;
    ctx.strokeStyle = style.curve.color;
    ctx.beginPath();
    ctx.moveTo(point.p1.x, point.p1.y);
    if (point.cp2) {
      ctx.bezierCurveTo(point.cp1.x, point.cp1.y, point.cp2.x, point.cp2.y, point.p2.x, point.p2.y);
    }
    else {
      ctx.quadraticCurveTo(point.cp1.x, point.cp1.y, point.p2.x, point.p2.y);
    }
    ctx.stroke();

    // control points    

      ctx.lineWidth = style.point.width;
      ctx.strokeStyle = style.point.color;
      ctx.fillStyle = style.point.fill;
      ctx.beginPath();
      ctx.arc(point.cp1.x, point.cp1.y, style.point.radius, style.point.arc1, style.point.arc2, true);
      ctx.fill();
      //ctx.stroke();
    
	//fakePoint
      ctx.lineWidth = style.fakePoint.width;
      ctx.strokeStyle = style.fakePoint.color;
      ctx.fillStyle = style.fakePoint.fill;
      ctx.beginPath();
      ctx.arc(fakePoint.cp1.x, fakePoint.cp1.y, style.fakePoint.radius, style.fakePoint.arc1, style.fakePoint.arc2, true);
      ctx.fill();
      ctx.stroke();

  }
  
  // start dragging
  function DragStart(e) {
    e = MousePos(e);
    var dx, dy;
    for (var p in fakePoint) {
      dx = fakePoint[p].x - e.x;
      dy = fakePoint[p].y - e.y;
      if ((dx * dx) + (dy * dy) < style.fakePoint.radius * style.fakePoint.radius) {
        drag = p;
        dPoint = e;
        canvas.style.cursor = "move";
        return;
      }
    }
  }
  
  
  // dragging
  function Dragging(e) {
    if (drag) {
       e = MousePos(e);
      //console.log(e)
      if(e.y<=250){
	      fakePoint[drag].x = fakePoint.cp1.x;
	      fakePoint[drag].y += e.y - dPoint.y;
	      point[drag].y = 250-((250-fakePoint[drag].y)*2)
	      dPoint = e;
	      
      var currentdate = new Date(); 
var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();


	var AB = Math.sqrt(Math.pow(point.cp1.x-100,2)+ Math.pow(point.cp1.y-250,2));    
    var BC = Math.sqrt(Math.pow(point.cp1.x-400,2)+ Math.pow(point.cp1.y-250,2)); 
    var AC = Math.sqrt(Math.pow(400-100,2)+ Math.pow(250-250,2));
    //console.log();
    var radians = Math.acos((BC*BC+AB*AB-AC*AC)/(2*BC*AB));
    var degrees = radians * (180/3.141592653589793);
    var logValue = parseInt(180-degrees);


logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"line_shape_5","value":logValue,"start_value":"false","end_value":"false","start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});
      DrawCanvas();
      }  
    }
  }
  
  
  // end dragging
  function DragEnd(e) {
  	$("#nextbutton").show();
    drag = null;
    canvas.style.cursor = "default";
    DrawCanvas();
    var currentdate = new Date(); 
	var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

	var AB = Math.sqrt(Math.pow(point.cp1.x-100,2)+ Math.pow(point.cp1.y-250,2));    
    var BC = Math.sqrt(Math.pow(point.cp1.x-400,2)+ Math.pow(point.cp1.y-250,2)); 
    var AC = Math.sqrt(Math.pow(400-100,2)+ Math.pow(250-250,2));
    //console.log();
    var radians = Math.acos((BC*BC+AB*AB-AC*AC)/(2*BC*AB));
    var degrees = radians * (180/3.141592653589793);
    var logValue = parseInt(180-degrees);


    logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"line_shape_5","value":logValue,"start_value":"false","end_value":"false","start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});
  }

  
  // event parser
  function MousePos(event) {
    event = (event ? event : window.event);
    return {
      x: event.pageX - canvas.offsetLeft,
      y: event.pageY - canvas.offsetTop
    }
  }
  // start
  canvas = document.getElementById("mycanvas");
  code = document.getElementById("code");
  if (canvas.getContext) {
    ctx = canvas.getContext("2d");
    Init(canvas.className == "quadratic");
  }
  
})(); 
	}


//Question 36
function drawQ36(){
	var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"angle_5","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});

	$("#mycanvas").hide();
		$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
		d3.selectAll("svg").remove();
		$("#questiontext").html("<p>Make the inner angle between the two lines <b>150%</b> of its current value.</p>");
		
		var svg, frameGroup, dragRect, dragBarTop, dragBarRight, rotateHandler,
    x1 = 300, y1 = 250,
    x2 = 500, y2 = 200
    angle = 0,
    width = 200, height = 5,
    bar = 6,
    that = this;

svg = d3.select('#viz').append('svg').attr({
    width: 800,
    height: 500
});
svg.append("rect")
       .attr("x",0)
       .attr("y",0)
       .attr("width",800)
       .attr("height",500)
       .attr("fill","white")
       .style("stroke","black");
frameGroup = svg.append('g')
.attr({
    'pointer-events': 'all',
    'class': 'frameGroup'
});


staticDragLine = frameGroup.append("line")
					 .attr("class", "staticDragLine")
					 .attr("x1",x1)
					 .attr("y1",y1)
					 .attr("x2",x2)
					 .attr("y2",y2)
					 .style("stroke","black")
					 .style("stroke-opacity",0.2);

dragLine = frameGroup.append("line")
					 .attr("class", "dragLine")
					 .attr("x1",x1)
					 .attr("y1",y1)
					 .attr("x2",x2)
					 .attr("y2",y2)
					 .style("stroke","black")
					 .style("stroke-width",2);

staticLine = svg.append("line")
					 .attr("class", "dragLine1")
					 .attr("x1",x1)
					 .attr("y1",y1)
					 .attr("x2",x1+200)
					 .attr("y2",y1)
					 .style("stroke","black")
					 .style("stroke-width",2);

var initialAngle = Math.atan2(y2-y1, x2-x1) * (180 / Math.PI);
rotateHandler = frameGroup.append('circle')
.attr('class', 'rotateHandler')
.attr('r', bar)
.attr('fill', 'black')
.attr('fill-opacity', 1)
.attr('stroke-width', 1)
.attr('stroke', 'white')
.attr("cursor","move")
.attr("cx",x2)
.attr("cy",y2)
.call(d3.behavior.drag().on('drag', function() {
    var pointerX = d3.event.x,
        pointerY = d3.event.y;
	
    angle = Math.atan2(pointerY-y1, pointerX-x1) * (180 / Math.PI);
    $("#nextbutton").show();
    if(angle<=0){
    	positionate();
    }
}));

var skipLog=1;

function positionate() {
    var rotate, translate;
    
    if(angle>initialAngle){
    	rotate = ' rotate(' + (angle-initialAngle) + ', ' + x1 + ', ' + y1 + ')';	
    }else{
    	rotate = ' rotate(' + (-1*(initialAngle-angle)) + ', ' + x1 + ', ' + y1 + ')';	
    }
	translate = 'translate(' + 0 + ',' + 0 + ')';
    dragLine.attr('transform', translate + rotate);
    
    rotateHandler.attr('transform', translate + rotate);
    
	var currentdate = new Date(); 
	var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

    if(skipLog!=1){	
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"angle_5","value":(-1*angle),"start_value":"false","end_value":"false","start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});	
   	}
	skipLog=0;
}

}

//Question 37
	function drawQ37(){
		var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"circle_area_5","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});

		$("#mycanvas").hide();
		$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
		d3.selectAll("svg").remove();
		$("#questiontext").html("<p>Make the area of the circle <b>150%</b> of its current value.</p>");
		
		var svg, frameGroup, dragRect, dragBarTop, dragBarRight, rotateHandler,
    x = 500, y = 325,
    angle = 0,
    r = 40//, height = 5,
    dragR = 6,
    that = this;

    svg = d3.select('#viz').append('svg').attr({
        width: 1000,
        height: 650
    });

    svg.append("rect")
       .attr("x",0)
       .attr("y",0)
       .attr("width",1000)
       .attr("height",650)
       .attr("fill","white")
       .style("stroke","black");


         svg.append("circle")
       .attr("class","staticCircle")
       .attr("cx",x)
       .attr("cy",y)
       .attr("r",r)
       .attr("fill","black")
       .style("opacity",0.2);


    svg.append("circle")
       .attr("class","vizelement")
       .attr("cx",x)
       .attr("cy",y)
       .attr("r",r)
       .attr("fill","black")
       .style("opacity",0.5);

    svg.append("circle")
       .attr("class","circleareadragger")
       .attr("cx",x+r)
       .attr("cy",y)
       .attr("r",dragR)
       .attr("fill","black")
       .call(d3.behavior.drag().on('drag', function() {
        r = r + d3.event.dx;
        if (r < dragR) {
            return;
        }        
        positionate();
    }));
    //positionate(); 

    function positionate() {
    d3.select(".vizelement").attr('r', r);
    $("#nextbutton").show();
    translate = 'translate(' + (r-40) + ',' + 0 + ')';
    d3.select('.circleareadragger').attr('transform', translate);
    var currentdate = new Date(); 
	var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

    	logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"circle_area_5","value":r,"start_value":"false","end_value":"false","start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});	
    }		

	}

//Question 38
function drawQ38(){
	var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"horizontal_slider_5","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});


	$("#mycanvas").hide();
	$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
	d3.selectAll("svg").remove();
	$("#questiontext").html("<p>Make the slider box's position <b>150%</b> of its current value.</p>");
	
	var x = document.body.offsetWidth/3;
	$('#viz').append("<div id=\"sliderDiv1\" align='center' style=\"width:800px;margin-left: "+x+"px;margin-right: auto;position:absolute;\"></div>");
	$('#viz').append("<div id=\"sliderDiv\" align='center' style=\"width:800px;margin-left: "+x+"px;margin-right: auto;z-index:10;\"></div>");

	d3.select('#sliderDiv1').call(d3.slider().value(50)).style("opacity",0.5);

	d3.select('#sliderDiv').call(d3.slider().value(50).on("slide", function(evt, value) {
	  $("#nextbutton").show();
	  var currentdate = new Date(); 
	  var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

    logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"horizontal_slider_5","value":value,"start_value":"false","end_value":"false","start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});	
    }).axis(d3.svg.axis().orient("bottom").ticks("1")));	
    d3.select(".d3-slider-axis.d3-slider-axis-bottom").selectAll("text").each(function(d){
    	//console.log(d)
    	if(d=="0"){
    		d3.select(this).text("low")
    	}else if(d=="100"){
    		d3.select(this).text("high")
    	}
    })

}

//Question 39
function drawQ39(){
	var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"square_area_5","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});

	$("#mycanvas").hide();
	$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
	d3.selectAll("svg").remove();
	$("#questiontext").html("<p>Make the area of the square <b>150%</b> of its current value.</p>");
	

	var svg, frameGroup, dragRect, dragBarTop, dragBarRight, rotateHandler,
    x = 400, y = 150,
    width = 200, height = 200,
    dragR = 6,
    that = this;

    svg = d3.select('#viz').append('svg').attr({
        width: 1500,
        height: 700
    });
    svg.append("rect")
       .attr("x",0)
       .attr("y",0)
       .attr("width",1500)
       .attr("height",700)
       .attr("fill","white")
       .style("stroke","black");


        svg.append("rect")
       .attr("class","staticSquare")
       .attr("x",x)
       .attr("y",y)
       .attr("width",width)
       .attr("height",height)
       .attr("fill","black")
       .style("opacity",0.2);

    svg.append("rect")
       .attr("class","vizelement")
       .attr("x",x)
       .attr("y",y)
       .attr("width",width)
       .attr("height",height)
       .attr("fill","black")
       .style("opacity",0.5);

    centerX = x + width;
    centerY = y + height;

var pointerX,pointerY;
    svg.append("circle")
       .attr("class","rectareadragger")
       .attr("cx",x+width)
       .attr("cy",y+height)
       .attr("r",dragR)
       .attr("fill","black")
       .call(d3.behavior.drag().on('drag', function() {
        height = height + d3.event.dy;
        width = width + d3.event.dy;
        if ((width*height) < (Math.PI*dragR*dragR)) {
            return;
        }        
        pointerX = d3.event.sourceEvent.x,
        pointerY = d3.event.sourceEvent.y;
                //angle = Math.atan2(pointerY - centerY, pointerX - centerX) * (180 / Math.PI);
        
        if(width<10 && height<10){
        	return;
        }else{
        	positionate();
        }
    }));
    //positionate(); 

    function positionate() {
    $("#nextbutton").show();
    d3.select(".vizelement").attr('width', width).attr('height', height);
    //translate = 'translate(' + (r-40) + ',' + 0 + ')';
    //d3.select('.dragger').attr('transform', translate);
    //console.log(width,height)
    //rotate = 'rotate(' + angle + ', ' + (-1 * width / 2) + ', ' + 0 + ')';
    translate = 'translate(' + (width-200) + ',' + (height-200) + ')';
    d3.select('.rectareadragger').attr('transform', translate);
    var currentdate = new Date(); 
	var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

    logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"square_area_5","value":(width*height)/1000,"start_value":"false","end_value":"false","start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});
    }
}

//question 40
function drawQ40(){
	var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"width_5","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});

	$("#mycanvas").hide();
	$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
	d3.selectAll("svg").remove();
	$("#questiontext").html("<p>Make the width <b>150%</b> of its current value.</p>");
	
	var svg, frameGroup, dragRect, dragBarTop, dragBarRight, rotateHandler,
    x = 300, y = 100,
    angle = 0,
    width = 200, height = 100,
    bar = 6,
    that = this;

svg = d3.select('#viz').append('svg').attr({
    width: 1000,
    height: 300
});
svg.append("rect")
       .attr("x",0)
       .attr("y",0)
       .attr("width",1000)
       .attr("height",300)
       .attr("fill","white")
       .style("stroke","black");


frameGroup = svg.append('g')
.attr({
    'class': 'dummy frameGroup'
});

staticRect = frameGroup.append('rect')
.attr('class', 'dummy dragRectStatic')
.attr('fill', 'black')
.attr('fill-opacity', 0.1)
.attr("width",width)
.attr("height",height)
.attr("x",x)
.attr("y",y);


dragRect = frameGroup.append('rect')
.attr('class', 'dummy dragRect')
.attr('fill', 'black')
.attr('fill-opacity', 0.3);
dragBarRight = frameGroup.append('rect')
.attr('class', 'dummy dragBarRight')
.attr('fill', 'black')
.attr('fill-opacity', 0.6)
.attr('cursor', 'ew-resize')
.call(d3.behavior.drag().on('drag', function() {
    width = width + d3.event.dx;
    if (width < bar) {
        return;
    }
    $("#nextbutton").show();
    positionate();
}));
var skipLog=1;
positionate();

function positionate() {
    var rotate, translate;
    rotate = ' rotate(' + angle + ', ' + (width / 2) + ', ' + (height / 2) + ')';
    translate = 'translate(' + x + ',' + y + ')';
    dragRect.attr('transform', translate + rotate);
    dragRect.attr('width', width);
    dragRect.attr('height', height);

    rotate = ' rotate(' + angle + ', ' + (-1 * width / 2) + ', ' + (height / 2) + ')';
    translate = 'translate(' + (x + width) + ',' + y + ')';
    dragBarRight.attr('transform', translate + rotate);
    dragBarRight.attr('height', height);
    dragBarRight.attr('width', bar);

    var currentdate = new Date(); 
	var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

          if(skipLog!=1){
          	logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"width_5","value":width,"start_value":"false","end_value":"false","start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});
          }
       skipLog=0;
    
}
}
//end of questions 33-40


//-----------------------------
//Questions 41-48 (make 175%)
//-----------------------------
	//Question 41
	function drawQ41(){
		var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"height_6","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});

		$("#mycanvas").hide();
		$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
		d3.selectAll("svg").remove();
		$("#questiontext").html("<p>Make the height of the rectangle <b>175%</b> of its current value.</p>");

		var svg, frameGroup, dragRect, dragBarTop, dragBarRight, rotateHandler,
	    x = 300, y = 400,
	    angle = 0,
	    width = 200, height = 100,
	    bar = 6,
	    that = this;
		svg = d3.select('#viz').append('svg').attr({
		    width: 800,
		    height: 550
		});

		svg.append("rect")
	       .attr("x",0)
	       .attr("y",0)
	       .attr("width",800)
	       .attr("height",550)
	       .attr("fill","white")
	       .style("stroke","black");

		frameGroup = svg.append('g')
		.attr({
		    'pointer-events': 'all',
		    'class': 'dummy frameGroup'
		});

		dragRectStatic = frameGroup.append('rect')
		.attr('class', 'dummy dragRectStatic')
		.attr('fill', 'black')
		.attr('fill-opacity', 0.2)
		.attr("x",x)
		.attr("y",y)
		.attr("width",width)
		.attr("height",height);


		dragRect = frameGroup.append('rect')
		.attr('class', 'dummy dragRect')
		.attr('fill', 'black')
		.attr('fill-opacity', 0.3);

		dragBarTop = frameGroup.append('rect')
		.attr('class', 'dummy dragBarTop')
		.attr('fill', 'black')
		.attr('fill-opacity', 0.6)
		.attr('cursor', 'ns-resize')
		.call(d3.behavior.drag().on('drag', function() {
		    height = height + (y - d3.event.y);
		    y = d3.event.y;
		    if (height < bar) {
		        return;
		    }
		    $("#nextbutton").show();
		    positionate();
		}));
		var skipLog=1;
		positionate();

		function positionate() {
		    var rotate, translate;
		    rotate = ' rotate(' + angle + ', ' + (width / 2) + ', ' + (height / 2) + ')';
		    translate = 'translate(' + x + ',' + y + ')';
		    dragRect.attr('transform', translate + rotate);
		    dragRect.attr('width', width);
		    dragRect.attr('height', height);

		    rotate = ' rotate(' + angle + ', ' + (width / 2) + ', ' + (height / 2) + ')';
		    translate = 'translate(' + x + ',' + y + ')';
		    dragBarTop.attr('transform', translate + rotate);
		    dragBarTop.attr('height', bar);
		    dragBarTop.attr('width', width);

			var currentdate = new Date(); 
			var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();


		   	if(skipLog!=1){
		   		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"height_6","value":height,"start_value":"false","end_value":"false","start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});
		   	}
		 	skipLog=0;
		}
	}


//Question 42	
	function drawQ42(){
		var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"horizontal_direction_6","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});

		$("#mycanvas").hide();
		$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
		d3.selectAll("svg").remove();
		$("#questiontext").html("<p>Move the circle  such that the distance from the target (gray rectangle on the right) is <b>175%</b> of its current value.</p>");
		
			var svg, frameGroup, dragRect, dragBarTop, dragBarRight, rotateHandler,
    x = 200, y = 100,
    angle = 0,
    width = 200, height = 100,
    bar = 6,
    that = this;

svg = d3.select('#viz').append('svg').attr({
    width: 1000,
    height: 300
});
svg.append("rect")
       .attr("x",0)
       .attr("y",0)
       .attr("width",1000)
       .attr("height",300)
       .attr("fill","white")
       .style("stroke","black");


frameGroup = svg.append('g')
.attr({
    'class': 'dummy frameGroup'
});

targetRect = frameGroup.append('rect')
.attr('class', 'targetRect')
.attr('fill', 'black')
.style('fill-opacity', '0.4')
.attr("x",900)
.attr("y",100)
.attr("width",5)
.attr("height",50);

frameGroup.append('circle')
				  .attr('class','dummy dragCircleRightStatic')				  
				  .attr('r',8)
				  .attr('cx',400)
				  .attr('cy',125)
				  .style('fill','black')
				  .style('fill-opacity',0.2);


dragCircleRight = frameGroup.append('circle')
.attr('class', 'dummy dragCircleRight')
.attr('r',8)
.attr('cx',x)
.attr('cy',25)
.attr('fill', 'black')
.attr('cursor', 'ew-resize')
.call(d3.behavior.drag().on('drag', function() {
    width = width + d3.event.dx;
    $("#nextbutton").show();
    positionate();
}));


var skipLog=1;
positionate();

function positionate() {
    var rotate, translate;
    translate = 'translate(' + (width) + ',' + y + ')';
    dragCircleRight.attr('transform', translate );

    var currentdate = new Date(); 
	var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

          if(skipLog!=1){    
      		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"horizontal_direction_6","value":900-(width+200),"start_value":"false","end_value":"false","start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});
    	}
    	skipLog=0;
	}
}

//Question 43
	function drawQ43(){
		var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"line_shape_6","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});

		$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
		d3.selectAll("svg").remove();
		$("#questiontext").html("<p>Make the curve <b>175%</b> of its current value.</p>");
		$("#mycanvas").show();
		(function() {

  var canvas, ctx, code, point, style, drag = null, dPoint, fakePoint;

  // define initial points
  function Init(quadratic) {

  	fakePoint = {
      p1: { x:100, y:250 },
      p2: { x:400, y:250 }
    };

  	point1 = {
      p1: { x:100, y:250 },
      p2: { x:400, y:250 }
    };
    
    if (quadratic) {
      point1.cp1 = { x: 250, y: 200 };      
    }
    else {
      point1.cp1 = { x: 150, y: 150 };
      point1.cp2 = { x: 350, y: 150 };
    }
    // default styles
    style1 = {
      curve:  { width: 2, color: "#ccc" },
      cpline: { width: 1, color: "#ffffff" },
      point1: { radius: 5, width: 1, color: "#ccc", fill: "rgba(255,255,255,0.5)", arc1: 0, arc2: 2 * Math.PI },
    }

    point = {
      p1: { x:100, y:250 },
      p2: { x:400, y:250 }
    };
    
    if (quadratic) {
      point.cp1 = { x: 250, y: 200 };
      fakePoint.cp1 = { x: 250, y: 225 };
    }
    else {
      point.cp1 = { x: 150, y: 150 };
      point.cp2 = { x: 350, y: 150 };
    }
    
    // default styles
    style = {
      curve:  { width: 2, color: "#333" },
      cpline: { width: 1, color: "#ffffff" },
      point: { radius: 5, width: 1, color: "#333", fill: "rgba(255,255,255,0.5)", arc1: 0, arc2: 2 * Math.PI },
      fakePoint: { radius: 5, width: 1, color: "#333", fill: "rgba(255,255,255,0.5)", arc1: 0, arc2: 2 * Math.PI },
    }
    
    // line style defaults
    ctx.lineCap = "round";
    ctx.lineJoin = "round";
    
    // event handlers
    canvas.onmousedown = DragStart;
    canvas.onmousemove = Dragging;
    canvas.onmouseup = canvas.onmouseout = DragEnd;
    /*
    var currentdate = new Date(); 
			var datetime = "Last Sync: " + currentdate.getDate() + "/"
		                + (currentdate.getMonth()+1)  + "/" 
		                + currentdate.getFullYear() + " @ "  
		                + currentdate.getHours() + ":"  
		                + currentdate.getMinutes() + ":" 
		                + currentdate.getSeconds() + ":" 
		                + currentdate.getMilliseconds();
    logs.push({"user":sessionUserId,"datetime":datetime,"question":"line_shape_1","value":"("+point.cp1.x+","+point.cp1.y+","+point.p2.x+","+point.p2.y+")","start_value":"true","end_value":"false"})
    */
    DrawCanvas();
  }
  
  
  // draw canvas
  function DrawCanvas() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    
    // control lines
    ctx.lineWidth = style1.cpline.width;
    ctx.strokeStyle = style1.cpline.color;
    ctx.beginPath();
    ctx.moveTo(point1.p1.x, point1.p1.y);
    
    ctx.lineTo(point1.cp1.x, point1.cp1.y);
    ctx.lineTo(point1.cp1.x, point1.cp1.y);
    if (point1.cp2) {
      ctx.moveTo(point1.p2.x, point1.p2.y);
      ctx.lineTo(point1.cp2.x, point1.cp2.y);
    }
    else {
      ctx.lineTo(point1.p2.x, point1.p2.y);
    }
    ctx.stroke();
    
    // curve
    ctx.lineWidth = style1.curve.width;
    ctx.strokeStyle = style1.curve.color;
    ctx.beginPath();
    ctx.moveTo(point1.p1.x, point1.p1.y);
    if (point1.cp2) {
      ctx.bezierCurveTo(point1.cp1.x, point1.cp1.y, point1.cp2.x, point1.cp2.y, point1.p2.x, point1.p2.y);
    }
    else {
      ctx.quadraticCurveTo(point1.cp1.x, point1.cp1.y, point1.p2.x, point1.p2.y);
    }
    ctx.stroke();

    // control lines
    ctx.lineWidth = style.cpline.width;
    ctx.strokeStyle = style.cpline.color;
    ctx.beginPath();
    ctx.moveTo(point.p1.x, point.p1.y);
    ctx.lineTo(point.cp1.x, point.cp1.y);
    if (point.cp2) {
      ctx.moveTo(point.p2.x, point.p2.y);
      ctx.lineTo(point.cp2.x, point.cp2.y);
    }
    else {
      ctx.lineTo(point.p2.x, point.p2.y);
    }
    ctx.stroke();
    
    // curve
    ctx.lineWidth = style.curve.width;
    ctx.strokeStyle = style.curve.color;
    ctx.beginPath();
    ctx.moveTo(point.p1.x, point.p1.y);
    if (point.cp2) {
      ctx.bezierCurveTo(point.cp1.x, point.cp1.y, point.cp2.x, point.cp2.y, point.p2.x, point.p2.y);
    }
    else {
      ctx.quadraticCurveTo(point.cp1.x, point.cp1.y, point.p2.x, point.p2.y);
    }
    ctx.stroke();

    // control points    

      ctx.lineWidth = style.point.width;
      ctx.strokeStyle = style.point.color;
      ctx.fillStyle = style.point.fill;
      ctx.beginPath();
      ctx.arc(point.cp1.x, point.cp1.y, style.point.radius, style.point.arc1, style.point.arc2, true);
      ctx.fill();
      //ctx.stroke();
    
    //fakePoint
      ctx.lineWidth = style.fakePoint.width;
      ctx.strokeStyle = style.fakePoint.color;
      ctx.fillStyle = style.fakePoint.fill;
      ctx.beginPath();
      ctx.arc(fakePoint.cp1.x, fakePoint.cp1.y, style.fakePoint.radius, style.fakePoint.arc1, style.fakePoint.arc2, true);
      ctx.fill();
      ctx.stroke();

  }
  
  
  // start dragging
  function DragStart(e) {
    e = MousePos(e);
    var dx, dy;
    for (var p in fakePoint) {
      dx = fakePoint[p].x - e.x;
      dy = fakePoint[p].y - e.y;
      if ((dx * dx) + (dy * dy) < style.fakePoint.radius * style.fakePoint.radius) {
        drag = p;
        dPoint = e;
        canvas.style.cursor = "move";
        return;
      }
    }
  }
  
  
  // dragging
  function Dragging(e) {
    if (drag) {
      e = MousePos(e);
      //console.log(e)
      if(e.y<=250){
	      fakePoint[drag].x = fakePoint.cp1.x;
	      fakePoint[drag].y += e.y - dPoint.y;
	      point[drag].y = 250-((250-fakePoint[drag].y)*2)
	      dPoint = e;
	    
      var currentdate = new Date(); 
var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

var AB = Math.sqrt(Math.pow(point.cp1.x-100,2)+ Math.pow(point.cp1.y-250,2));    
    var BC = Math.sqrt(Math.pow(point.cp1.x-400,2)+ Math.pow(point.cp1.y-250,2)); 
    var AC = Math.sqrt(Math.pow(400-100,2)+ Math.pow(250-250,2));
    //console.log();
    var radians = Math.acos((BC*BC+AB*AB-AC*AC)/(2*BC*AB));
    var degrees = radians * (180/3.141592653589793);
    var logValue = parseInt(180-degrees);


logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"line_shape_6","value":logValue,"start_value":"false","end_value":"false","start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});
        DrawCanvas();
      } 
    }
  }
  
  
  // end dragging
  function DragEnd(e) {
  	$("#nextbutton").show();
    drag = null;
    canvas.style.cursor = "default";
    DrawCanvas();
    var currentdate = new Date(); 
	var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

	var AB = Math.sqrt(Math.pow(point.cp1.x-100,2)+ Math.pow(point.cp1.y-250,2));    
    var BC = Math.sqrt(Math.pow(point.cp1.x-400,2)+ Math.pow(point.cp1.y-250,2)); 
    var AC = Math.sqrt(Math.pow(400-100,2)+ Math.pow(250-250,2));
    //console.log();
    var radians = Math.acos((BC*BC+AB*AB-AC*AC)/(2*BC*AB));
    var degrees = radians * (180/3.141592653589793);
    var logValue = parseInt(180-degrees);


    logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"line_shape_6","value":logValue,"start_value":"false","end_value":"false","start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});
  }

  
  // event parser
  function MousePos(event) {
    event = (event ? event : window.event);
    return {
      x: event.pageX - canvas.offsetLeft,
      y: event.pageY - canvas.offsetTop
    }
  }
  // start
  canvas = document.getElementById("mycanvas");
  code = document.getElementById("code");
  if (canvas.getContext) {
    ctx = canvas.getContext("2d");
    Init(canvas.className == "quadratic");
  }
  
})(); 
	}


//Question 44
function drawQ44(){
	var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"angle_6","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});


	$("#mycanvas").hide();
		$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
		d3.selectAll("svg").remove();
		$("#questiontext").html("<p>Make the inner angle between the two lines <b>175%</b> of its current value.</p>");
		
		var svg, frameGroup, dragRect, dragBarTop, dragBarRight, rotateHandler,
    x1 = 300, y1 = 250,
    x2 = 500, y2 = 200
    angle = 0,
    width = 200, height = 5,
    bar = 6,
    that = this;

svg = d3.select('#viz').append('svg').attr({
    width: 800,
    height: 500
});
svg.append("rect")
       .attr("x",0)
       .attr("y",0)
       .attr("width",800)
       .attr("height",500)
       .attr("fill","white")
       .style("stroke","black");
frameGroup = svg.append('g')
.attr({
    'pointer-events': 'all',
    'class': 'frameGroup'
});

staticDragLine = frameGroup.append("line")
					 .attr("class", "staticDragLine")
					 .attr("x1",x1)
					 .attr("y1",y1)
					 .attr("x2",x2)
					 .attr("y2",y2)
					 .style("stroke","black")
					 .style("stroke-opacity",0.2);

dragLine = frameGroup.append("line")
					 .attr("class", "dragLine")
					 .attr("x1",x1)
					 .attr("y1",y1)
					 .attr("x2",x2)
					 .attr("y2",y2)
					 .style("stroke","black")
					 .style("stroke-width",2);

staticLine = svg.append("line")
					 .attr("class", "dragLine1")
					 .attr("x1",x1)
					 .attr("y1",y1)
					 .attr("x2",x1+200)
					 .attr("y2",y1)
					 .style("stroke","black")
					 .style("stroke-width",2);

var initialAngle = Math.atan2(y2-y1, x2-x1) * (180 / Math.PI);
rotateHandler = frameGroup.append('circle')
.attr('class', 'rotateHandler')
.attr('r', bar)
.attr('fill', 'black')
.attr('fill-opacity', 1)
.attr('stroke-width', 1)
.attr('stroke', 'white')
.attr("cursor","move")
.attr("cx",x2)
.attr("cy",y2)
.call(d3.behavior.drag().on('drag', function() {
    var pointerX = d3.event.x,
        pointerY = d3.event.y;
	
    angle = Math.atan2(pointerY-y1, pointerX-x1) * (180 / Math.PI);
    $("#nextbutton").show();
    if(angle<=0){
    	positionate();
    }
}));

var skipLog=1;

function positionate() {
    var rotate, translate;
    
    if(angle>initialAngle){
    	rotate = ' rotate(' + (angle-initialAngle) + ', ' + x1 + ', ' + y1 + ')';	
    }else{
    	rotate = ' rotate(' + (-1*(initialAngle-angle)) + ', ' + x1 + ', ' + y1 + ')';	
    }
	translate = 'translate(' + 0 + ',' + 0 + ')';
    dragLine.attr('transform', translate + rotate);
    
    rotateHandler.attr('transform', translate + rotate);
    
	var currentdate = new Date(); 
	var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

    if(skipLog!=1){	
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"angle_6","value":(-1*angle),"start_value":"false","end_value":"false","start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});	
   	}
	skipLog=0;
}

}

//Question 45
	function drawQ45(){
		var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"circle_area_6","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});

		$("#mycanvas").hide();
		$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
		d3.selectAll("svg").remove();
		$("#questiontext").html("<p>Make the area of the circle <b>175%</b> of its current value.</p>");
		
		var svg, frameGroup, dragRect, dragBarTop, dragBarRight, rotateHandler,
    x = 500, y = 325,
    angle = 0,
    r = 40//, height = 5,
    dragR = 6,
    that = this;

    svg = d3.select('#viz').append('svg').attr({
        width: 1000,
        height: 650
    });

    svg.append("rect")
       .attr("x",0)
       .attr("y",0)
       .attr("width",1000)
       .attr("height",650)
       .attr("fill","white")
       .style("stroke","black");


         svg.append("circle")
       .attr("class","staticCircle")
       .attr("cx",x)
       .attr("cy",y)
       .attr("r",r)
       .attr("fill","black")
       .style("opacity",0.2);

    svg.append("circle")
       .attr("class","vizelement")
       .attr("cx",x)
       .attr("cy",y)
       .attr("r",r)
       .attr("fill","black")
       .style("opacity",0.5);

    svg.append("circle")
       .attr("class","circleareadragger")
       .attr("cx",x+r)
       .attr("cy",y)
       .attr("r",dragR)
       .attr("fill","black")
       .call(d3.behavior.drag().on('drag', function() {
        r = r + d3.event.dx;
        if (r < dragR) {
            return;
        }        
        positionate();
    }));
    //positionate(); 

    function positionate() {
    d3.select(".vizelement").attr('r', r);
    $("#nextbutton").show();
    translate = 'translate(' + (r-40) + ',' + 0 + ')';
    d3.select('.circleareadragger').attr('transform', translate);
    var currentdate = new Date(); 
	var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

    	logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"circle_area_6","value":r,"start_value":"false","end_value":"false","start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});	
    }		

	}

//Question 46
function drawQ46(){
	var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"horizontal_slider_6","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});

	$("#mycanvas").hide();
	$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
	d3.selectAll("svg").remove();
	$("#questiontext").html("<p>Make the slider box's position <b>175%</b> of its current value.</p>");
	
	var x = document.body.offsetWidth/3;
	$('#viz').append("<div id=\"sliderDiv1\" align='center' style=\"width:800px;margin-left: "+x+"px;margin-right: auto;position:absolute;\"></div>");
	$('#viz').append("<div id=\"sliderDiv\" align='center' style=\"width:800px;margin-left: "+x+"px;margin-right: auto;z-index:10;\"></div>");

	d3.select('#sliderDiv1').call(d3.slider().value(50)).style("opacity",0.5);

	d3.select('#sliderDiv').call(d3.slider().value(50).on("slide", function(evt, value) {
	  $("#nextbutton").show();
	  var currentdate = new Date(); 
	  var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

    logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"horizontal_slider_6","value":value,"start_value":"false","end_value":"false","start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});	
    }).axis(d3.svg.axis().orient("bottom").ticks("1")));	
    d3.select(".d3-slider-axis.d3-slider-axis-bottom").selectAll("text").each(function(d){
    	//console.log(d)
    	if(d=="0"){
    		d3.select(this).text("low")
    	}else if(d=="100"){
    		d3.select(this).text("high")
    	}
    })
}

//Question 47
function drawQ47(){
	var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"square_area_6","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});

	$("#mycanvas").hide();
	$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
	d3.selectAll("svg").remove();
	$("#questiontext").html("<p>Make the area of the square <b>175%</b> of its current value.</p>");
	

	var svg, frameGroup, dragRect, dragBarTop, dragBarRight, rotateHandler,
    x = 400, y = 150,
    width = 200, height = 200,
    dragR = 6,
    that = this;

    svg = d3.select('#viz').append('svg').attr({
        width: 1500,
        height: 700
    });
    svg.append("rect")
       .attr("x",0)
       .attr("y",0)
       .attr("width",1500)
       .attr("height",700)
       .attr("fill","white")
       .style("stroke","black");


        svg.append("rect")
       .attr("class","staticSquare")
       .attr("x",x)
       .attr("y",y)
       .attr("width",width)
       .attr("height",height)
       .attr("fill","black")
       .style("opacity",0.2);


    svg.append("rect")
       .attr("class","vizelement")
       .attr("x",x)
       .attr("y",y)
       .attr("width",width)
       .attr("height",height)
       .attr("fill","black")
       .style("opacity",0.5);

    centerX = x + width;
    centerY = y + height;

var pointerX,pointerY;
    svg.append("circle")
       .attr("class","rectareadragger")
       .attr("cx",x+width)
       .attr("cy",y+height)
       .attr("r",dragR)
       .attr("fill","black")
       .call(d3.behavior.drag().on('drag', function() {
        height = height + d3.event.dy;
        width = width + d3.event.dy;
        if ((width*height) < (Math.PI*dragR*dragR)) {
            return;
        }        
        pointerX = d3.event.sourceEvent.x,
        pointerY = d3.event.sourceEvent.y;
                //angle = Math.atan2(pointerY - centerY, pointerX - centerX) * (180 / Math.PI);
        
        if(width<10 && height<10){
        	return;
        }else{
        	positionate();
        }
    }));
    //positionate(); 

    function positionate() {
    $("#nextbutton").show();
    d3.select(".vizelement").attr('width', width).attr('height', height);
    //translate = 'translate(' + (r-40) + ',' + 0 + ')';
    //d3.select('.dragger').attr('transform', translate);
    //console.log(width,height)
    //rotate = 'rotate(' + angle + ', ' + (-1 * width / 2) + ', ' + 0 + ')';
    translate = 'translate(' + (width-200) + ',' + (height-200) + ')';
    d3.select('.rectareadragger').attr('transform', translate);
    var currentdate = new Date(); 
	var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

    logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"square_area_6","value":(width*height)/1000,"start_value":"false","end_value":"false","start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});
    }
}

//question 48
function drawQ48(){
	var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"width_6","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});


	$("#mycanvas").hide();
	$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
	d3.selectAll("svg").remove();
	$("#questiontext").html("<p>Make the width <b>175%</b> of its current value.</p>");
	
	var svg, frameGroup, dragRect, dragBarTop, dragBarRight, rotateHandler,
    x = 300, y = 100,
    angle = 0,
    width = 200, height = 100,
    bar = 6,
    that = this;

svg = d3.select('#viz').append('svg').attr({
    width: 1000,
    height: 300
});
svg.append("rect")
       .attr("x",0)
       .attr("y",0)
       .attr("width",1000)
       .attr("height",300)
       .attr("fill","white")
       .style("stroke","black");


frameGroup = svg.append('g')
.attr({
    'class': 'dummy frameGroup'
});

staticRect = frameGroup.append('rect')
.attr('class', 'dummy dragRectStatic')
.attr('fill', 'black')
.attr('fill-opacity', 0.1)
.attr("width",width)
.attr("height",height)
.attr("x",x)
.attr("y",y);


dragRect = frameGroup.append('rect')
.attr('class', 'dummy dragRect')
.attr('fill', 'black')
.attr('fill-opacity', 0.3);
dragBarRight = frameGroup.append('rect')
.attr('class', 'dummy dragBarRight')
.attr('fill', 'black')
.attr('fill-opacity', 0.6)
.attr('cursor', 'ew-resize')
.call(d3.behavior.drag().on('drag', function() {
    width = width + d3.event.dx;
    if (width < bar) {
        return;
    }
    $("#nextbutton").show();
    positionate();
}));
var skipLog=1;
positionate();

function positionate() {
    var rotate, translate;
    rotate = ' rotate(' + angle + ', ' + (width / 2) + ', ' + (height / 2) + ')';
    translate = 'translate(' + x + ',' + y + ')';
    dragRect.attr('transform', translate + rotate);
    dragRect.attr('width', width);
    dragRect.attr('height', height);

    rotate = ' rotate(' + angle + ', ' + (-1 * width / 2) + ', ' + (height / 2) + ')';
    translate = 'translate(' + (x + width) + ',' + y + ')';
    dragBarRight.attr('transform', translate + rotate);
    dragBarRight.attr('height', height);
    dragBarRight.attr('width', bar);

    var currentdate = new Date(); 
    var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

          if(skipLog!=1){
          	logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"width_6","value":width,"start_value":"false","end_value":"false","start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});
          }
       skipLog=0;
    
}
}
//end of questions 41-48

//-----------------------------
//Questions 49-56 (make 200%)
//-----------------------------
	//Question 49
	function drawQ49(){

		var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"height_7","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});

		$("#mycanvas").hide();
		$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
		d3.selectAll("svg").remove();
		$("#questiontext").html("<p>Make the height of the rectangle <b>200%</b> of its current value.</p>");

		var svg, frameGroup, dragRect, dragBarTop, dragBarRight, rotateHandler,
	    x = 300, y = 400,
	    angle = 0,
	    width = 200, height = 100,
	    bar = 6,
	    that = this;
		svg = d3.select('#viz').append('svg').attr({
		    width: 800,
		    height: 550
		});

		svg.append("rect")
	       .attr("x",0)
	       .attr("y",0)
	       .attr("width",800)
	       .attr("height",550)
	       .attr("fill","white")
	       .style("stroke","black");

		frameGroup = svg.append('g')
		.attr({
		    'pointer-events': 'all',
		    'class': 'dummy frameGroup'
		});


		dragRectStatic = frameGroup.append('rect')
		.attr('class', 'dummy dragRectStatic')
		.attr('fill', 'black')
		.attr('fill-opacity', 0.2)
		.attr("x",x)
		.attr("y",y)
		.attr("width",width)
		.attr("height",height);

		dragRect = frameGroup.append('rect')
		.attr('class', 'dummy dragRect')
		.attr('fill', 'black')
		.attr('fill-opacity', 0.3);

		dragBarTop = frameGroup.append('rect')
		.attr('class', 'dummy dragBarTop')
		.attr('fill', 'black')
		.attr('fill-opacity', 0.6)
		.attr('cursor', 'ns-resize')
		.call(d3.behavior.drag().on('drag', function() {
		    height = height + (y - d3.event.y);
		    y = d3.event.y;
		    if (height < bar) {
		        return;
		    }
		    $("#nextbutton").show();
		    positionate();
		}));
		var skipLog=1;
		positionate();

		function positionate() {
		    var rotate, translate;
		    rotate = ' rotate(' + angle + ', ' + (width / 2) + ', ' + (height / 2) + ')';
		    translate = 'translate(' + x + ',' + y + ')';
		    dragRect.attr('transform', translate + rotate);
		    dragRect.attr('width', width);
		    dragRect.attr('height', height);

		    rotate = ' rotate(' + angle + ', ' + (width / 2) + ', ' + (height / 2) + ')';
		    translate = 'translate(' + x + ',' + y + ')';
		    dragBarTop.attr('transform', translate + rotate);
		    dragBarTop.attr('height', bar);
		    dragBarTop.attr('width', width);

			var currentdate = new Date(); 
			var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();


		   	if(skipLog!=1){
		   		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"height_7","value":height,"start_value":"false","end_value":"false","start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});
		   	}
		 	skipLog=0;
		}
	}


//Question 50	
	function drawQ50(){
		var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"horizontal_direction_7","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});

		$("#mycanvas").hide();
		$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
		d3.selectAll("svg").remove();
		$("#questiontext").html("<p>Move the circle  such that the distance from the target (gray rectangle on the right) is <b>200%</b> of its current value.</p>");
		
			var svg, frameGroup, dragRect, dragBarTop, dragBarRight, rotateHandler,
    x = 275, y = 100,
    angle = 0,
    width = 200, height = 100,
    bar = 6,
    that = this;

svg = d3.select('#viz').append('svg').attr({
    width: 1000,
    height: 300
});
svg.append("rect")
       .attr("x",0)
       .attr("y",0)
       .attr("width",1000)
       .attr("height",300)
       .attr("fill","white")
       .style("stroke","black");


frameGroup = svg.append('g')
.attr({
    'class': 'dummy frameGroup'
});

targetRect = frameGroup.append('rect')
.attr('class', 'targetRect')
.attr('fill', 'black')
.style('fill-opacity', '0.4')
.attr("x",900)
.attr("y",100)
.attr("width",5)
.attr("height",50);

frameGroup.append('circle')
				  .attr('class','dummy dragCircleRightStatic')				  
				  .attr('r',8)
				  .attr('cx',475)
				  .attr('cy',125)
				  .style('fill','black')
				  .style('fill-opacity',0.2);



dragCircleRight = frameGroup.append('circle')
.attr('class', 'dummy dragCircleRight')
.attr('r',8)
.attr('cx',x)
.attr('cy',25)
.attr('fill', 'black')
.attr('cursor', 'ew-resize')
.call(d3.behavior.drag().on('drag', function() {
    width = width + d3.event.dx;
    $("#nextbutton").show();
    positionate();
}));


var skipLog=1;
positionate();

function positionate() {
    var rotate, translate;
    translate = 'translate(' + (width) + ',' + y + ')';
    dragCircleRight.attr('transform', translate );

    var currentdate = new Date(); 
	var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
	//console.log(900-(width+275))
          if(skipLog!=1){    
      		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"horizontal_direction_7","value":900-(width+275),"start_value":"false","end_value":"false","start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});
    	}
    	skipLog=0;
	}
}


//Question 51
	function drawQ51(){
		var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"line_shape_7","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});


		$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
		d3.selectAll("svg").remove();
		$("#questiontext").html("<p>Make the curve <b>200%</b> of its current value.</p>");
		$("#mycanvas").show();
		(function() {

  var canvas, ctx, code, point, style, drag = null, dPoint, fakePoint;

  // define initial points
  function Init(quadratic) {

  	fakePoint = {
      p1: { x:100, y:250 },
      p2: { x:400, y:250 }
    };

  	point1 = {
      p1: { x:100, y:250 },
      p2: { x:400, y:250 }
    };
    
    if (quadratic) {
      point1.cp1 = { x: 250, y: 200 };      
    }
    else {
      point1.cp1 = { x: 150, y: 150 };
      point1.cp2 = { x: 350, y: 150 };
    }
    // default styles
    style1 = {
      curve:  { width: 2, color: "#ccc" },
      cpline: { width: 1, color: "#ffffff" },
      point1: { radius: 5, width: 1, color: "#ccc", fill: "rgba(255,255,255,0.5)", arc1: 0, arc2: 2 * Math.PI },
    }



    point = {
      p1: { x:100, y:250 },
      p2: { x:400, y:250 }
    };
    
    if (quadratic) {
      point.cp1 = { x: 250, y: 200 };
      fakePoint.cp1 = { x: 250, y: 225 };
    }
    else {
      point.cp1 = { x: 150, y: 150 };
      point.cp2 = { x: 350, y: 150 };
    }
    
    // default styles
    style = {
      curve:  { width: 2, color: "#333" },
      cpline: { width: 1, color: "#ffffff" },
      point: { radius: 5, width: 1, color: "#333", fill: "rgba(255,255,255,0.5)", arc1: 0, arc2: 2 * Math.PI },
      fakePoint: { radius: 5, width: 1, color: "#333", fill: "rgba(255,255,255,0.5)", arc1: 0, arc2: 2 * Math.PI },
    }
    
    // line style defaults
    ctx.lineCap = "round";
    ctx.lineJoin = "round";
    
    // event handlers
    canvas.onmousedown = DragStart;
    canvas.onmousemove = Dragging;
    canvas.onmouseup = canvas.onmouseout = DragEnd;
    /*
    var currentdate = new Date(); 
			var datetime = "Last Sync: " + currentdate.getDate() + "/"
		                + (currentdate.getMonth()+1)  + "/" 
		                + currentdate.getFullYear() + " @ "  
		                + currentdate.getHours() + ":"  
		                + currentdate.getMinutes() + ":" 
		                + currentdate.getSeconds() + ":" 
		                + currentdate.getMilliseconds();
    logs.push({"user":sessionUserId,"datetime":datetime,"question":"line_shape_1","value":"("+point.cp1.x+","+point.cp1.y+","+point.p2.x+","+point.p2.y+")","start_value":"true","end_value":"false"})
    */
    DrawCanvas();
  }
  
  
  // draw canvas
  function DrawCanvas() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    

    // control lines
    ctx.lineWidth = style1.cpline.width;
    ctx.strokeStyle = style1.cpline.color;
    ctx.beginPath();
    ctx.moveTo(point1.p1.x, point1.p1.y);
    
    ctx.lineTo(point1.cp1.x, point1.cp1.y);
    ctx.lineTo(point1.cp1.x, point1.cp1.y);
    if (point1.cp2) {
      ctx.moveTo(point1.p2.x, point1.p2.y);
      ctx.lineTo(point1.cp2.x, point1.cp2.y);
    }
    else {
      ctx.lineTo(point1.p2.x, point1.p2.y);
    }
    ctx.stroke();
    
    // curve
    ctx.lineWidth = style1.curve.width;
    ctx.strokeStyle = style1.curve.color;
    ctx.beginPath();
    ctx.moveTo(point1.p1.x, point1.p1.y);
    if (point1.cp2) {
      ctx.bezierCurveTo(point1.cp1.x, point1.cp1.y, point1.cp2.x, point1.cp2.y, point1.p2.x, point1.p2.y);
    }
    else {
      ctx.quadraticCurveTo(point1.cp1.x, point1.cp1.y, point1.p2.x, point1.p2.y);
    }
    ctx.stroke();

    // control lines
    ctx.lineWidth = style.cpline.width;
    ctx.strokeStyle = style.cpline.color;
    ctx.beginPath();
    ctx.moveTo(point.p1.x, point.p1.y);
    ctx.lineTo(point.cp1.x, point.cp1.y);
    if (point.cp2) {
      ctx.moveTo(point.p2.x, point.p2.y);
      ctx.lineTo(point.cp2.x, point.cp2.y);
    }
    else {
      ctx.lineTo(point.p2.x, point.p2.y);
    }
    ctx.stroke();
    
    // curve
    ctx.lineWidth = style.curve.width;
    ctx.strokeStyle = style.curve.color;
    ctx.beginPath();
    ctx.moveTo(point.p1.x, point.p1.y);
    if (point.cp2) {
      ctx.bezierCurveTo(point.cp1.x, point.cp1.y, point.cp2.x, point.cp2.y, point.p2.x, point.p2.y);
    }
    else {
      ctx.quadraticCurveTo(point.cp1.x, point.cp1.y, point.p2.x, point.p2.y);
    }
    ctx.stroke();

    // control points    

      ctx.lineWidth = style.point.width;
      ctx.strokeStyle = style.point.color;
      ctx.fillStyle = style.point.fill;
      ctx.beginPath();
      ctx.arc(point.cp1.x, point.cp1.y, style.point.radius, style.point.arc1, style.point.arc2, true);
      ctx.fill();
      //ctx.stroke();
    
      //fakePoint
      ctx.lineWidth = style.fakePoint.width;
      ctx.strokeStyle = style.fakePoint.color;
      ctx.fillStyle = style.fakePoint.fill;
      ctx.beginPath();
      ctx.arc(fakePoint.cp1.x, fakePoint.cp1.y, style.fakePoint.radius, style.fakePoint.arc1, style.fakePoint.arc2, true);
      ctx.fill();
      ctx.stroke();

}
  
  
  // start dragging
  function DragStart(e) {
    e = MousePos(e);
    var dx, dy;
    for (var p in fakePoint) {
      dx = fakePoint[p].x - e.x;
      dy = fakePoint[p].y - e.y;
      if ((dx * dx) + (dy * dy) < style.fakePoint.radius * style.fakePoint.radius) {
        drag = p;
        dPoint = e;
        canvas.style.cursor = "move";
        return;
      }
    }
  }
  
  
  // dragging
  function Dragging(e) {
    if (drag) {
     e = MousePos(e);
      //console.log(e)
      if(e.y<=250){
	      fakePoint[drag].x = fakePoint.cp1.x;
	      fakePoint[drag].y += e.y - dPoint.y;
	      point[drag].y = 250-((250-fakePoint[drag].y)*2)
	      dPoint = e;
	    
      var currentdate = new Date(); 
	

	var AB = Math.sqrt(Math.pow(point.cp1.x-100,2)+ Math.pow(point.cp1.y-250,2));    
    var BC = Math.sqrt(Math.pow(point.cp1.x-400,2)+ Math.pow(point.cp1.y-250,2)); 
    var AC = Math.sqrt(Math.pow(400-100,2)+ Math.pow(250-250,2));
    //console.log();
    var radians = Math.acos((BC*BC+AB*AB-AC*AC)/(2*BC*AB));
    var degrees = radians * (180/3.141592653589793);
    var logValue = parseInt(180-degrees);


logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"line_shape_7","value":logValue,"start_value":"false","end_value":"false","start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});
        DrawCanvas();
      } 
    }
  }
  
  
  // end dragging
  function DragEnd(e) {
  	$("#nextbutton").show();
    drag = null;
    canvas.style.cursor = "default";
    DrawCanvas();
    var currentdate = new Date(); 
	var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();


	var AB = Math.sqrt(Math.pow(point.cp1.x-100,2)+ Math.pow(point.cp1.y-250,2));    
    var BC = Math.sqrt(Math.pow(point.cp1.x-400,2)+ Math.pow(point.cp1.y-250,2)); 
    var AC = Math.sqrt(Math.pow(400-100,2)+ Math.pow(250-250,2));
    //console.log();
    var radians = Math.acos((BC*BC+AB*AB-AC*AC)/(2*BC*AB));
    var degrees = radians * (180/3.141592653589793);
    var logValue = parseInt(180-degrees);

    logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"line_shape_7","value":logValue,"start_value":"false","end_value":"false","start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});
  }

  
  // event parser
  function MousePos(event) {
    event = (event ? event : window.event);
    return {
      x: event.pageX - canvas.offsetLeft,
      y: event.pageY - canvas.offsetTop
    }
  }
  // start
  canvas = document.getElementById("mycanvas");
  code = document.getElementById("code");
  if (canvas.getContext) {
    ctx = canvas.getContext("2d");
    Init(canvas.className == "quadratic");
  }
  
})(); 
	}


//Question 52
function drawQ52(){
	var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"angle_7","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});


	$("#mycanvas").hide();
		$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
		d3.selectAll("svg").remove();
		$("#questiontext").html("<p>Make the inner angle between the two lines <b>200%</b> of its current value.</p>");
		
		var svg, frameGroup, dragRect, dragBarTop, dragBarRight, rotateHandler,
    x1 = 300, y1 = 250,
    x2 = 500, y2 = 200
    angle = 0,
    width = 200, height = 5,
    bar = 6,
    that = this;

svg = d3.select('#viz').append('svg').attr({
    width: 800,
    height: 500
});
svg.append("rect")
       .attr("x",0)
       .attr("y",0)
       .attr("width",800)
       .attr("height",500)
       .attr("fill","white")
       .style("stroke","black");
frameGroup = svg.append('g')
.attr({
    'pointer-events': 'all',
    'class': 'frameGroup'
});

staticDragLine = frameGroup.append("line")
					 .attr("class", "staticDragLine")
					 .attr("x1",x1)
					 .attr("y1",y1)
					 .attr("x2",x2)
					 .attr("y2",y2)
					 .style("stroke","black")
					 .style("stroke-opacity",0.2);

dragLine = frameGroup.append("line")
					 .attr("class", "dragLine")
					 .attr("x1",x1)
					 .attr("y1",y1)
					 .attr("x2",x2)
					 .attr("y2",y2)
					 .style("stroke","black")
					 .style("stroke-width",2);

staticLine = svg.append("line")
					 .attr("class", "dragLine1")
					 .attr("x1",x1)
					 .attr("y1",y1)
					 .attr("x2",x1+200)
					 .attr("y2",y1)
					 .style("stroke","black")
					 .style("stroke-width",2);

var initialAngle = Math.atan2(y2-y1, x2-x1) * (180 / Math.PI);
rotateHandler = frameGroup.append('circle')
.attr('class', 'rotateHandler')
.attr('r', bar)
.attr('fill', 'black')
.attr('fill-opacity', 1)
.attr('stroke-width', 1)
.attr('stroke', 'white')
.attr("cursor","move")
.attr("cx",x2)
.attr("cy",y2)
.call(d3.behavior.drag().on('drag', function() {
    var pointerX = d3.event.x,
        pointerY = d3.event.y;
	
    angle = Math.atan2(pointerY-y1, pointerX-x1) * (180 / Math.PI);
    $("#nextbutton").show();
    if(angle<=0){
    	positionate();
    }
}));

var skipLog=1;

function positionate() {
    var rotate, translate;
    
    if(angle>initialAngle){
    	rotate = ' rotate(' + (angle-initialAngle) + ', ' + x1 + ', ' + y1 + ')';	
    }else{
    	rotate = ' rotate(' + (-1*(initialAngle-angle)) + ', ' + x1 + ', ' + y1 + ')';	
    }
	translate = 'translate(' + 0 + ',' + 0 + ')';
    dragLine.attr('transform', translate + rotate);
    
    rotateHandler.attr('transform', translate + rotate);
    
	var currentdate = new Date(); 
	var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

    if(skipLog!=1){	
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"angle_7","value":(-1*angle),"start_value":"false","end_value":"false","start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});	
   	}
	skipLog=0;
}

}

//Question 53
	function drawQ53(){
		var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"circle_area_7","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});

		$("#mycanvas").hide();
		$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
		d3.selectAll("svg").remove();
		$("#questiontext").html("<p>Make the area of the circle <b>200%</b> of its current value.</p>");
		
		var svg, frameGroup, dragRect, dragBarTop, dragBarRight, rotateHandler,
    x = 500, y = 325,
    angle = 0,
    r = 40//, height = 5,
    dragR = 6,
    that = this;

    svg = d3.select('#viz').append('svg').attr({
        width: 1000,
        height: 650
    });

    svg.append("rect")
       .attr("x",0)
       .attr("y",0)
       .attr("width",1000)
       .attr("height",650)
       .attr("fill","white")
       .style("stroke","black");

         svg.append("circle")
       .attr("class","staticCircle")
       .attr("cx",x)
       .attr("cy",y)
       .attr("r",r)
       .attr("fill","black")
       .style("opacity",0.2);


    svg.append("circle")
       .attr("class","vizelement")
       .attr("cx",x)
       .attr("cy",y)
       .attr("r",r)
       .attr("fill","black")
       .style("opacity",0.5);

    svg.append("circle")
       .attr("class","circleareadragger")
       .attr("cx",x+r)
       .attr("cy",y)
       .attr("r",dragR)
       .attr("fill","black")
       .call(d3.behavior.drag().on('drag', function() {
        r = r + d3.event.dx;
        if (r < dragR) {
            return;
        }        
        positionate();
    }));
    //positionate(); 

    function positionate() {
    d3.select(".vizelement").attr('r', r);
    $("#nextbutton").show();
    translate = 'translate(' + (r-40) + ',' + 0 + ')';
    d3.select('.circleareadragger').attr('transform', translate);
    var currentdate = new Date(); 
	var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

    	logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"circle_area_7","value":r,"start_value":"false","end_value":"false","start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});	
    }		

	}

//Question 54
function drawQ54(){
	var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"horizontal_slider_7","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});

	$("#mycanvas").hide();
	$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
	d3.selectAll("svg").remove();
	$("#questiontext").html("<p>Make the slider box's position <b>200%</b> of its current value.</p>");
	
	var x = document.body.offsetWidth/3;
	$('#viz').append("<div id=\"sliderDiv1\" align='center' style=\"width:800px;margin-left: "+x+"px;margin-right: auto;position:absolute;\"></div>");
	$('#viz').append("<div id=\"sliderDiv\" align='center' style=\"width:800px;margin-left: "+x+"px;margin-right: auto;z-index:10;\"></div>");

	d3.select('#sliderDiv1').call(d3.slider().value(50)).style("opacity",0.5);

	d3.select('#sliderDiv').call(d3.slider().value(50).on("slide", function(evt, value) {
	  $("#nextbutton").show();
	  var currentdate = new Date(); 
	  var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

    logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"horizontal_slider_7","value":value,"start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});	
    }).axis(d3.svg.axis().orient("bottom").ticks("1")));	
    d3.select(".d3-slider-axis.d3-slider-axis-bottom").selectAll("text").each(function(d){
    	//console.log(d)
    	if(d=="0"){
    		d3.select(this).text("low")
    	}else if(d=="100"){
    		d3.select(this).text("high")
    	}
    })

}

//Question 55
function drawQ55(){
	var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"square_area_7","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});

	$("#mycanvas").hide();
	$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
	d3.selectAll("svg").remove();
	$("#questiontext").html("<p>Make the area of the square <b>200%</b> of its current value.</p>");
	

	var svg, frameGroup, dragRect, dragBarTop, dragBarRight, rotateHandler,
    x = 400, y = 150,
    width = 200, height = 200,
    dragR = 6,
    that = this;

    svg = d3.select('#viz').append('svg').attr({
        width: 1500,
        height: 700
    });
    svg.append("rect")
       .attr("x",0)
       .attr("y",0)
       .attr("width",1500)
       .attr("height",700)
       .attr("fill","white")
       .style("stroke","black");

        svg.append("rect")
       .attr("class","staticSquare")
       .attr("x",x)
       .attr("y",y)
       .attr("width",width)
       .attr("height",height)
       .attr("fill","black")
       .style("opacity",0.2);



    svg.append("rect")
       .attr("class","vizelement")
       .attr("x",x)
       .attr("y",y)
       .attr("width",width)
       .attr("height",height)
       .attr("fill","black")
       .style("opacity",0.5);

    centerX = x + width;
    centerY = y + height;

var pointerX,pointerY;
    svg.append("circle")
       .attr("class","rectareadragger")
       .attr("cx",x+width)
       .attr("cy",y+height)
       .attr("r",dragR)
       .attr("fill","black")
       .call(d3.behavior.drag().on('drag', function() {
        height = height + d3.event.dy;
        width = width + d3.event.dy;
        if ((width*height) < (Math.PI*dragR*dragR)) {
            return;
        }        
        pointerX = d3.event.sourceEvent.x,
        pointerY = d3.event.sourceEvent.y;
                //angle = Math.atan2(pointerY - centerY, pointerX - centerX) * (180 / Math.PI);
        
        if(width<10 && height<10){
        	return;
        }else{
        	positionate();
        }
    }));
    //positionate(); 

    function positionate() {
    $("#nextbutton").show();
    d3.select(".vizelement").attr('width', width).attr('height', height);
    //translate = 'translate(' + (r-40) + ',' + 0 + ')';
    //d3.select('.dragger').attr('transform', translate);
    //console.log(width,height)
    //rotate = 'rotate(' + angle + ', ' + (-1 * width / 2) + ', ' + 0 + ')';
    translate = 'translate(' + (width-200) + ',' + (height-200) + ')';
    d3.select('.rectareadragger').attr('transform', translate);
    var currentdate = new Date(); 
	var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

    logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"square_area_7","value":(width*height)/1000,"start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});
    }
}

//question 56
function drawQ56(){
	var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"width_7","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});


	$("#mycanvas").hide();
	$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
	d3.selectAll("svg").remove();
	$("#questiontext").html("<p>Make the width <b>200%</b> of its current value.</p>");
	
	var svg, frameGroup, dragRect, dragBarTop, dragBarRight, rotateHandler,
    x = 300, y = 100,
    angle = 0,
    width = 200, height = 100,
    bar = 6,
    that = this;

svg = d3.select('#viz').append('svg').attr({
    width: 1000,
    height: 300
});
svg.append("rect")
       .attr("x",0)
       .attr("y",0)
       .attr("width",1000)
       .attr("height",300)
       .attr("fill","white")
       .style("stroke","black");


frameGroup = svg.append('g')
.attr({
    'class': 'dummy frameGroup'
});

staticRect = frameGroup.append('rect')
.attr('class', 'dummy dragRectStatic')
.attr('fill', 'black')
.attr('fill-opacity', 0.1)
.attr("width",width)
.attr("height",height)
.attr("x",x)
.attr("y",y);


dragRect = frameGroup.append('rect')
.attr('class', 'dummy dragRect')
.attr('fill', 'black')
.attr('fill-opacity', 0.3);
dragBarRight = frameGroup.append('rect')
.attr('class', 'dummy dragBarRight')
.attr('fill', 'black')
.attr('fill-opacity', 0.6)
.attr('cursor', 'ew-resize')
.call(d3.behavior.drag().on('drag', function() {
    width = width + d3.event.dx;
    if (width < bar) {
        return;
    }
    $("#nextbutton").show();
    positionate();
}));
var skipLog=1;
positionate();

function positionate() {
    var rotate, translate;
    rotate = ' rotate(' + angle + ', ' + (width / 2) + ', ' + (height / 2) + ')';
    translate = 'translate(' + x + ',' + y + ')';
    dragRect.attr('transform', translate + rotate);
    dragRect.attr('width', width);
    dragRect.attr('height', height);

    rotate = ' rotate(' + angle + ', ' + (-1 * width / 2) + ', ' + (height / 2) + ')';
    translate = 'translate(' + (x + width) + ',' + y + ')';
    dragBarRight.attr('transform', translate + rotate);
    dragBarRight.attr('height', height);
    dragBarRight.attr('width', bar);

    var currentdate = new Date(); 
	var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

          if(skipLog!=1){
          	logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"width_7","value":width,"start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});
          }
       skipLog=0;
    
}
}
//end of questions 49-56
//------------------
//questions 57-63 (horizontal curve)
//------------------
function drawQ57(){
	var currentdate = new Date(); 
	var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
	logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"hor_curve_2","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});


		$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
		d3.selectAll("svg").remove();
		$("#questiontext").html("<p>Make the curve <b>25%</b> of its current value.</p>");
		$("#mycanvas").show();
		(function() {

  var canvas, ctx, code, point, point1, style, style1, drag = null, dPoint, fakePoint;

  // define initial points
  function Init(quadratic) {

  	fakePoint = {
      p1: { x:250, y:100 },
      p2: { x:250, y:300 }
    };

  	point1 = {
      p1: { x:250, y:100 },
      p2: { x:250, y:300 }
    };
    
    if (quadratic) {
      point1.cp1 = { x:308, y:200 };
    }
    else {
      point1.cp1 = { x: 150, y: 150 };
      point1.cp2 = { x: 350, y: 150 };
    }
    
    // default styles
    style1 = {
      curve:  { width: 2, color: "#ccc" },
      cpline: { width: 1, color: "#ffffff" },
      point1: { radius: 5, width: 1, color: "#ccc", fill: "rgba(255,255,255,0.5)", arc1: 0, arc2: 2 * Math.PI }
    }

    point = {
      p1: { x:250, y:100 },
      p2: { x:250, y:300 }
    };
    
    if (quadratic) {
      point.cp1 = { x:308, y:200 };
      fakePoint.cp1 = { x: 279, y: 200 };
    }
    else {
      point.cp1 = { x: 150, y: 150 };
      point.cp2 = { x: 350, y: 150 };
    }
    
    // default styles
    style = {
      curve:  { width: 2, color: "#333" },
      cpline: { width: 1, color: "#ffffff" },
      point: { radius: 5, width: 1, color: "#333", fill: "rgba(255,255,255,0.5)", arc1: 0, arc2: 2 * Math.PI },
      fakePoint: { radius: 5, width: 1, color: "#333", fill: "rgba(255,255,255,0.5)", arc1: 0, arc2: 2 * Math.PI },
    }
    
    // line style defaults
    ctx.lineCap = "round";
    ctx.lineJoin = "round";
    
    // event handlers
    canvas.onmousedown = DragStart;
    canvas.onmousemove = Dragging;
    canvas.onmouseup = canvas.onmouseout = DragEnd;
    DrawCanvas();
  }
  
  
  // draw canvas
  function DrawCanvas() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    
    // control lines
    ctx.lineWidth = style1.cpline.width;
    ctx.strokeStyle = style1.cpline.color;
    ctx.beginPath();
    ctx.moveTo(point1.p1.x, point1.p1.y);
    ctx.lineTo(point1.cp1.x, point1.cp1.y);
    if (point1.cp2) {
      ctx.moveTo(point1.p2.x, point1.p2.y);
      ctx.lineTo(point1.cp2.x, point1.cp2.y);
    }
    else {
      ctx.lineTo(point1.p2.x, point1.p2.y);
    }
    ctx.stroke();
    
    // curve
    ctx.lineWidth = style1.curve.width;
    ctx.strokeStyle = style1.curve.color;
    ctx.beginPath();
    ctx.moveTo(point1.p1.x, point1.p1.y);
    if (point1.cp2) {
      ctx.bezierCurveTo(point1.cp1.x, point1.cp1.y, point1.cp2.x, point1.cp2.y, point1.p2.x, point1.p2.y);
    }
    else {
      ctx.quadraticCurveTo(point1.cp1.x, point1.cp1.y, point1.p2.x, point1.p2.y);
    }
    ctx.stroke();

    // control points    
/*
      ctx.lineWidth = style1.point1.width;
      ctx.strokeStyle = style1.point1.color;
      ctx.fillStyle = style1.point1.fill;
      ctx.beginPath();
      ctx.arc(point1.cp1.x, point1.cp1.y, style1.point1.radius, style1.point1.arc1, style1.point1.arc2, true);
      ctx.fill();
      ctx.stroke();

*/

    // control lines
    ctx.lineWidth = style.cpline.width;
    ctx.strokeStyle = style.cpline.color;
    ctx.beginPath();
    ctx.moveTo(point.p1.x, point.p1.y);
    ctx.lineTo(point.cp1.x, point.cp1.y);
    if (point.cp2) {
      ctx.moveTo(point.p2.x, point.p2.y);
      ctx.lineTo(point.cp2.x, point.cp2.y);
    }
    else {
      ctx.lineTo(point.p2.x, point.p2.y);
    }
    ctx.stroke();
    
    // curve
    ctx.lineWidth = style.curve.width;
    ctx.strokeStyle = style.curve.color;
    ctx.beginPath();
    ctx.moveTo(point.p1.x, point.p1.y);
    if (point.cp2) {
      ctx.bezierCurveTo(point.cp1.x, point.cp1.y, point.cp2.x, point.cp2.y, point.p2.x, point.p2.y);
    }
    else {
      ctx.quadraticCurveTo(point.cp1.x, point.cp1.y, point.p2.x, point.p2.y);
    }
    ctx.stroke();

    // control points    

      ctx.lineWidth = style.point.width;
      ctx.strokeStyle = style.point.color;
      ctx.fillStyle = style.point.fill;
      ctx.beginPath();
      ctx.arc(point.cp1.x, point.cp1.y, style.point.radius, style.point.arc1, style.point.arc2, true);
      ctx.fill();
      //ctx.stroke();

    //fakePoint
      ctx.lineWidth = style.fakePoint.width;
      ctx.strokeStyle = style.fakePoint.color;
      ctx.fillStyle = style.fakePoint.fill;
      ctx.beginPath();
      ctx.arc(fakePoint.cp1.x, fakePoint.cp1.y, style.fakePoint.radius, style.fakePoint.arc1, style.fakePoint.arc2, true);
      ctx.fill();
      ctx.stroke();
        
  }
  
  
  // start dragging
  function DragStart(e) {
    e = MousePos(e);
    var dx, dy;
    for (var p in fakePoint) {
      dx = fakePoint[p].x - e.x;
      dy = fakePoint[p].y - e.y;
      if ((dx * dx) + (dy * dy) < style.fakePoint.radius * style.fakePoint.radius) {
        drag = p;
        dPoint = e;
        canvas.style.cursor = "move";
        return;
      }
    }
  }
  
  
  // dragging
  function Dragging(e) {
    if (drag) {
      e = MousePos(e);
      if(e.x>=250){
      fakePoint[drag].x += e.x - dPoint.x;
	  fakePoint[drag].y = fakePoint.cp1.y;
	  point[drag].x = 250+((fakePoint[drag].x-250)*2)

      dPoint = e;
      
       var currentdate = new Date(); 
var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

	var AB = Math.sqrt(Math.pow(point.cp1.x-250,2)+ Math.pow(point.cp1.y-100,2));    
    var BC = Math.sqrt(Math.pow(point.cp1.x-250,2)+ Math.pow(point.cp1.y-300,2)); 
    var AC = Math.sqrt(Math.pow(250-250,2)+ Math.pow(300-100,2));
    var radians = Math.acos((BC*BC+AB*AB-AC*AC)/(2*BC*AB));
    var degrees = radians * (180/3.141592653589793);
    var logValue = parseInt(180-degrees);

logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"hor_curve_2","value":logValue,"start_value":"false","end_value":"false","start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});

	DrawCanvas();
      }
    }    
  }
  
  
  // end dragging
  function DragEnd(e) {
  	$("#nextbutton").show();
    drag = null;
    canvas.style.cursor = "default";
    DrawCanvas();
    
    var currentdate = new Date(); 
	var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

	var AB = Math.sqrt(Math.pow(point.cp1.x-250,2)+ Math.pow(point.cp1.y-100,2));    
    var BC = Math.sqrt(Math.pow(point.cp1.x-250,2)+ Math.pow(point.cp1.y-300,2)); 
    var AC = Math.sqrt(Math.pow(250-250,2)+ Math.pow(300-100,2));
    var radians = Math.acos((BC*BC+AB*AB-AC*AC)/(2*BC*AB));
    var degrees = radians * (180/3.141592653589793);
    var logValue = parseInt(180-degrees);

    logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"hor_curve_2","value":logValue,"start_value":"false","end_value":"false","start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});

  }

  
  // event parser
  function MousePos(event) {
    event = (event ? event : window.event);
    return {
      x: event.pageX - canvas.offsetLeft,
      y: event.pageY - canvas.offsetTop
    }
  }
  // start
  canvas = document.getElementById("mycanvas");
  code = document.getElementById("code");
  if (canvas.getContext) {
    ctx = canvas.getContext("2d");
    Init(canvas.className == "quadratic");
  }
  
})(); }

function drawQ58(){
	var currentdate = new Date(); 
	var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
	logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"hor_curve_1","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});


		$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
		d3.selectAll("svg").remove();
		$("#questiontext").html("<p>Make the curve <b>50%</b> of its current value.</p>");
		$("#mycanvas").show();
		(function() {

  var canvas, ctx, code, point, point1, style, style1, drag = null, dPoint, fakePoint;

  // define initial points
  function Init(quadratic) {

  	fakePoint = {
      p1: { x:250, y:100 },
      p2: { x:250, y:300 }
    };

  	point1 = {
      p1: { x:250, y:100 },
      p2: { x:250, y:300 }
    };
    
    if (quadratic) {
      point1.cp1 = { x:308, y:200 };
    }
    else {
      point1.cp1 = { x: 150, y: 150 };
      point1.cp2 = { x: 350, y: 150 };
    }
    
    // default styles
    style1 = {
      curve:  { width: 2, color: "#ccc" },
      cpline: { width: 1, color: "#ffffff" },
      point1: { radius: 5, width: 1, color: "#ccc", fill: "rgba(255,255,255,0.5)", arc1: 0, arc2: 2 * Math.PI }
    }

    point = {
      p1: { x:250, y:100 },
      p2: { x:250, y:300 }
    };
    
    if (quadratic) {
      point.cp1 = { x:308, y:200 };
      fakePoint.cp1 = { x: 279, y: 200 };
    }
    else {
      point.cp1 = { x: 150, y: 150 };
      point.cp2 = { x: 350, y: 150 };
    }
    
    // default styles
    style = {
      curve:  { width: 2, color: "#333" },
      cpline: { width: 1, color: "#ffffff" },
      point: { radius: 5, width: 1, color: "#333", fill: "rgba(255,255,255,0.5)", arc1: 0, arc2: 2 * Math.PI },
      fakePoint: { radius: 5, width: 1, color: "#333", fill: "rgba(255,255,255,0.5)", arc1: 0, arc2: 2 * Math.PI },
    }
    
    // line style defaults
    ctx.lineCap = "round";
    ctx.lineJoin = "round";
    
    // event handlers
    canvas.onmousedown = DragStart;
    canvas.onmousemove = Dragging;
    canvas.onmouseup = canvas.onmouseout = DragEnd;
    DrawCanvas();
  }
  
  
  // draw canvas
  function DrawCanvas() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    
    // control lines
    ctx.lineWidth = style1.cpline.width;
    ctx.strokeStyle = style1.cpline.color;
    ctx.beginPath();
    ctx.moveTo(point1.p1.x, point1.p1.y);
    ctx.lineTo(point1.cp1.x, point1.cp1.y);
    if (point1.cp2) {
      ctx.moveTo(point1.p2.x, point1.p2.y);
      ctx.lineTo(point1.cp2.x, point1.cp2.y);
    }
    else {
      ctx.lineTo(point1.p2.x, point1.p2.y);
    }
    ctx.stroke();
    
    // curve
    ctx.lineWidth = style1.curve.width;
    ctx.strokeStyle = style1.curve.color;
    ctx.beginPath();
    ctx.moveTo(point1.p1.x, point1.p1.y);
    if (point1.cp2) {
      ctx.bezierCurveTo(point1.cp1.x, point1.cp1.y, point1.cp2.x, point1.cp2.y, point1.p2.x, point1.p2.y);
    }
    else {
      ctx.quadraticCurveTo(point1.cp1.x, point1.cp1.y, point1.p2.x, point1.p2.y);
    }
    ctx.stroke();

    // control lines
    ctx.lineWidth = style.cpline.width;
    ctx.strokeStyle = style.cpline.color;
    ctx.beginPath();
    ctx.moveTo(point.p1.x, point.p1.y);
    ctx.lineTo(point.cp1.x, point.cp1.y);
    if (point.cp2) {
      ctx.moveTo(point.p2.x, point.p2.y);
      ctx.lineTo(point.cp2.x, point.cp2.y);
    }
    else {
      ctx.lineTo(point.p2.x, point.p2.y);
    }
    ctx.stroke();
    
    // curve
    ctx.lineWidth = style.curve.width;
    ctx.strokeStyle = style.curve.color;
    ctx.beginPath();
    ctx.moveTo(point.p1.x, point.p1.y);
    if (point.cp2) {
      ctx.bezierCurveTo(point.cp1.x, point.cp1.y, point.cp2.x, point.cp2.y, point.p2.x, point.p2.y);
    }
    else {
      ctx.quadraticCurveTo(point.cp1.x, point.cp1.y, point.p2.x, point.p2.y);
    }
    ctx.stroke();

    // control points    

      ctx.lineWidth = style.point.width;
      ctx.strokeStyle = style.point.color;
      ctx.fillStyle = style.point.fill;
      ctx.beginPath();
      ctx.arc(point.cp1.x, point.cp1.y, style.point.radius, style.point.arc1, style.point.arc2, true);
      ctx.fill();
      //ctx.stroke();

    //fakePoint
      ctx.lineWidth = style.fakePoint.width;
      ctx.strokeStyle = style.fakePoint.color;
      ctx.fillStyle = style.fakePoint.fill;
      ctx.beginPath();
      ctx.arc(fakePoint.cp1.x, fakePoint.cp1.y, style.fakePoint.radius, style.fakePoint.arc1, style.fakePoint.arc2, true);
      ctx.fill();
      ctx.stroke();
    
  }
  
  
  // start dragging
  function DragStart(e) {
    e = MousePos(e);
    var dx, dy;
    for (var p in fakePoint) {
      dx = fakePoint[p].x - e.x;
      dy = fakePoint[p].y - e.y;
      if ((dx * dx) + (dy * dy) < style.fakePoint.radius * style.fakePoint.radius) {
        drag = p;
        dPoint = e;
        canvas.style.cursor = "move";
        return;
      }
    }
  }
  
  
  // dragging
  function Dragging(e) {
    if (drag) {
      e = MousePos(e);
      if(e.x>=250){
      fakePoint[drag].x += e.x - dPoint.x;
	  fakePoint[drag].y = fakePoint.cp1.y;
	  point[drag].x = 250+((fakePoint[drag].x-250)*2)

      dPoint = e;
      
       var currentdate = new Date(); 
var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
	
	
	var AB = Math.sqrt(Math.pow(point.cp1.x-250,2)+ Math.pow(point.cp1.y-100,2));    
    var BC = Math.sqrt(Math.pow(point.cp1.x-250,2)+ Math.pow(point.cp1.y-300,2)); 
    var AC = Math.sqrt(Math.pow(250-250,2)+ Math.pow(300-100,2));
    var radians = Math.acos((BC*BC+AB*AB-AC*AC)/(2*BC*AB));
    var degrees = radians * (180/3.141592653589793);
    var logValue = parseInt(180-degrees);


logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"hor_curve_1","value":logValue,"start_value":"false","end_value":"false","start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});

DrawCanvas();
      }
    }    
  }
  
  
  // end dragging
  function DragEnd(e) {
  	$("#nextbutton").show();
    drag = null;
    canvas.style.cursor = "default";
    DrawCanvas();
    
    var currentdate = new Date(); 
	var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

	var AB = Math.sqrt(Math.pow(point.cp1.x-250,2)+ Math.pow(point.cp1.y-100,2));    
    var BC = Math.sqrt(Math.pow(point.cp1.x-250,2)+ Math.pow(point.cp1.y-300,2)); 
    var AC = Math.sqrt(Math.pow(250-250,2)+ Math.pow(300-100,2));
    var radians = Math.acos((BC*BC+AB*AB-AC*AC)/(2*BC*AB));
    var degrees = radians * (180/3.141592653589793);
    var logValue = parseInt(180-degrees);


    logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"hor_curve_1","value":logValue,"start_value":"false","end_value":"false","start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});

  }

  
  // event parser
  function MousePos(event) {
    event = (event ? event : window.event);
    return {
      x: event.pageX - canvas.offsetLeft,
      y: event.pageY - canvas.offsetTop
    }
  }
  // start
  canvas = document.getElementById("mycanvas");
  code = document.getElementById("code");
  if (canvas.getContext) {
    ctx = canvas.getContext("2d");
    Init(canvas.className == "quadratic");
  }
  
})(); }

function drawQ59(){
	var currentdate = new Date(); 
	var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
	logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"hor_curve_3","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});


		$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
		d3.selectAll("svg").remove();
		$("#questiontext").html("<p>Make the curve <b>75%</b> of its current value.</p>");
		$("#mycanvas").show();
		(function() {

  var canvas, ctx, code, point, point1, style, style1, drag = null, dPoint, fakePoint;

  // define initial points
  function Init(quadratic) {

  	fakePoint = {
      p1: { x:250, y:100 },
      p2: { x:250, y:300 }
    };

  	point1 = {
      p1: { x:250, y:100 },
      p2: { x:250, y:300 }
    };
    
    if (quadratic) {
      point1.cp1 = { x:308, y:200 };
    }
    else {
      point1.cp1 = { x: 150, y: 150 };
      point1.cp2 = { x: 350, y: 150 };
    }
    
    // default styles
    style1 = {
      curve:  { width: 2, color: "#ccc" },
      cpline: { width: 1, color: "#ffffff" },
      point1: { radius: 5, width: 1, color: "#ccc", fill: "rgba(255,255,255,0.5)", arc1: 0, arc2: 2 * Math.PI }
    }

    point = {
      p1: { x:250, y:100 },
      p2: { x:250, y:300 }
    };
    
    if (quadratic) {
      point.cp1 = { x:308, y:200 };
      fakePoint.cp1 = { x: 279, y: 200 };
    }
    else {
      point.cp1 = { x: 150, y: 150 };
      point.cp2 = { x: 350, y: 150 };
    }
    
    // default styles
    style = {
      curve:  { width: 2, color: "#333" },
      cpline: { width: 1, color: "#ffffff" },
      point: { radius: 5, width: 1, color: "#333", fill: "rgba(255,255,255,0.5)", arc1: 0, arc2: 2 * Math.PI },
      fakePoint: { radius: 5, width: 1, color: "#333", fill: "rgba(255,255,255,0.5)", arc1: 0, arc2: 2 * Math.PI },
    }
    
    // line style defaults
    ctx.lineCap = "round";
    ctx.lineJoin = "round";
    
    // event handlers
    canvas.onmousedown = DragStart;
    canvas.onmousemove = Dragging;
    canvas.onmouseup = canvas.onmouseout = DragEnd;
    DrawCanvas();
  }
  
  
  // draw canvas
  function DrawCanvas() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    
    // control lines
    ctx.lineWidth = style1.cpline.width;
    ctx.strokeStyle = style1.cpline.color;
    ctx.beginPath();
    ctx.moveTo(point1.p1.x, point1.p1.y);
    ctx.lineTo(point1.cp1.x, point1.cp1.y);
    if (point1.cp2) {
      ctx.moveTo(point1.p2.x, point1.p2.y);
      ctx.lineTo(point1.cp2.x, point1.cp2.y);
    }
    else {
      ctx.lineTo(point1.p2.x, point1.p2.y);
    }
    ctx.stroke();
    
    // curve
    ctx.lineWidth = style1.curve.width;
    ctx.strokeStyle = style1.curve.color;
    ctx.beginPath();
    ctx.moveTo(point1.p1.x, point1.p1.y);
    if (point1.cp2) {
      ctx.bezierCurveTo(point1.cp1.x, point1.cp1.y, point1.cp2.x, point1.cp2.y, point1.p2.x, point1.p2.y);
    }
    else {
      ctx.quadraticCurveTo(point1.cp1.x, point1.cp1.y, point1.p2.x, point1.p2.y);
    }
    ctx.stroke();

    // control lines
    ctx.lineWidth = style.cpline.width;
    ctx.strokeStyle = style.cpline.color;
    ctx.beginPath();
    ctx.moveTo(point.p1.x, point.p1.y);
    ctx.lineTo(point.cp1.x, point.cp1.y);
    if (point.cp2) {
      ctx.moveTo(point.p2.x, point.p2.y);
      ctx.lineTo(point.cp2.x, point.cp2.y);
    }
    else {
      ctx.lineTo(point.p2.x, point.p2.y);
    }
    ctx.stroke();
    
    // curve
    ctx.lineWidth = style.curve.width;
    ctx.strokeStyle = style.curve.color;
    ctx.beginPath();
    ctx.moveTo(point.p1.x, point.p1.y);
    if (point.cp2) {
      ctx.bezierCurveTo(point.cp1.x, point.cp1.y, point.cp2.x, point.cp2.y, point.p2.x, point.p2.y);
    }
    else {
      ctx.quadraticCurveTo(point.cp1.x, point.cp1.y, point.p2.x, point.p2.y);
    }
    ctx.stroke();

    // control points    

      ctx.lineWidth = style.point.width;
      ctx.strokeStyle = style.point.color;
      ctx.fillStyle = style.point.fill;
      ctx.beginPath();
      ctx.arc(point.cp1.x, point.cp1.y, style.point.radius, style.point.arc1, style.point.arc2, true);
      ctx.fill();
      //ctx.stroke();

    //fakePoint
      ctx.lineWidth = style.fakePoint.width;
      ctx.strokeStyle = style.fakePoint.color;
      ctx.fillStyle = style.fakePoint.fill;
      ctx.beginPath();
      ctx.arc(fakePoint.cp1.x, fakePoint.cp1.y, style.fakePoint.radius, style.fakePoint.arc1, style.fakePoint.arc2, true);
      ctx.fill();
      ctx.stroke();
    
  }
  
  
  // start dragging
  function DragStart(e) {
    e = MousePos(e);
    var dx, dy;
    for (var p in fakePoint) {
      dx = fakePoint[p].x - e.x;
      dy = fakePoint[p].y - e.y;
      if ((dx * dx) + (dy * dy) < style.fakePoint.radius * style.fakePoint.radius) {
        drag = p;
        dPoint = e;
        canvas.style.cursor = "move";
        return;
      }
    }
  }
  
  
  // dragging
  function Dragging(e) {
    if (drag) {
      e = MousePos(e);
      if(e.x>=250){
      fakePoint[drag].x += e.x - dPoint.x;
	  fakePoint[drag].y = fakePoint.cp1.y;
	  point[drag].x = 250+((fakePoint[drag].x-250)*2)

      dPoint = e;
      var currentdate = new Date(); 
var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
	
	var AB = Math.sqrt(Math.pow(point.cp1.x-250,2)+ Math.pow(point.cp1.y-100,2));    
    var BC = Math.sqrt(Math.pow(point.cp1.x-250,2)+ Math.pow(point.cp1.y-300,2)); 
    var AC = Math.sqrt(Math.pow(250-250,2)+ Math.pow(300-100,2));
    var radians = Math.acos((BC*BC+AB*AB-AC*AC)/(2*BC*AB));
    var degrees = radians * (180/3.141592653589793);
    var logValue = parseInt(180-degrees);


logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"hor_curve_3","value":logValue,"start_value":"false","end_value":"false","start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});

DrawCanvas();
      }
    }    
  }
  
  
  // end dragging
  function DragEnd(e) {
  	$("#nextbutton").show();
    drag = null;
    canvas.style.cursor = "default";
    DrawCanvas();
    
    var currentdate = new Date(); 
	var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

	var AB = Math.sqrt(Math.pow(point.cp1.x-250,2)+ Math.pow(point.cp1.y-100,2));    
    var BC = Math.sqrt(Math.pow(point.cp1.x-250,2)+ Math.pow(point.cp1.y-300,2)); 
    var AC = Math.sqrt(Math.pow(250-250,2)+ Math.pow(300-100,2));
    var radians = Math.acos((BC*BC+AB*AB-AC*AC)/(2*BC*AB));
    var degrees = radians * (180/3.141592653589793);
    var logValue = parseInt(180-degrees);


    logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"hor_curve_3","value":logValue,"start_value":"false","end_value":"false","start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});

  }

  
  // event parser
  function MousePos(event) {
    event = (event ? event : window.event);
    return {
      x: event.pageX - canvas.offsetLeft,
      y: event.pageY - canvas.offsetTop
    }
  }
  // start
  canvas = document.getElementById("mycanvas");
  code = document.getElementById("code");
  if (canvas.getContext) {
    ctx = canvas.getContext("2d");
    Init(canvas.className == "quadratic");
  }
  
})(); }


function drawQ60(){
	var currentdate = new Date(); 
	var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
	logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"hor_curve_4","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});


		$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
		d3.selectAll("svg").remove();
		$("#questiontext").html("<p>Make the curve <b>125%</b> of its current value.</p>");
		$("#mycanvas").show();
		(function() {

  var canvas, ctx, code, point, point1, style, style1, drag = null, dPoint, fakePoint;

  // define initial points
  function Init(quadratic) {

  	fakePoint = {
      p1: { x:250, y:100 },
      p2: { x:250, y:300 }
    };

  	point1 = {
      p1: { x:250, y:100 },
      p2: { x:250, y:300 }
    };
    
    if (quadratic) {
      point1.cp1 = { x:308, y:200 };
    }
    else {
      point1.cp1 = { x: 150, y: 150 };
      point1.cp2 = { x: 350, y: 150 };
    }
    
    // default styles
    style1 = {
      curve:  { width: 2, color: "#ccc" },
      cpline: { width: 1, color: "#ffffff" },
      point1: { radius: 5, width: 1, color: "#ccc", fill: "rgba(255,255,255,0.5)", arc1: 0, arc2: 2 * Math.PI }
    }

    point = {
      p1: { x:250, y:100 },
      p2: { x:250, y:300 }
    };
    
    if (quadratic) {
      point.cp1 = { x:308, y:200 };
      fakePoint.cp1 = { x: 279, y: 200 };
    }
    else {
      point.cp1 = { x: 150, y: 150 };
      point.cp2 = { x: 350, y: 150 };
    }
    
    // default styles
    style = {
      curve:  { width: 2, color: "#333" },
      cpline: { width: 1, color: "#ffffff" },
      point: { radius: 5, width: 1, color: "#333", fill: "rgba(255,255,255,0.5)", arc1: 0, arc2: 2 * Math.PI },
      fakePoint: { radius: 5, width: 1, color: "#333", fill: "rgba(255,255,255,0.5)", arc1: 0, arc2: 2 * Math.PI },
    }
    
    // line style defaults
    ctx.lineCap = "round";
    ctx.lineJoin = "round";
    
    // event handlers
    canvas.onmousedown = DragStart;
    canvas.onmousemove = Dragging;
    canvas.onmouseup = canvas.onmouseout = DragEnd;
    DrawCanvas();
  }
  
  
  // draw canvas
  function DrawCanvas() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    
    // control lines
    ctx.lineWidth = style1.cpline.width;
    ctx.strokeStyle = style1.cpline.color;
    ctx.beginPath();
    ctx.moveTo(point1.p1.x, point1.p1.y);
    ctx.lineTo(point1.cp1.x, point1.cp1.y);
    if (point1.cp2) {
      ctx.moveTo(point1.p2.x, point1.p2.y);
      ctx.lineTo(point1.cp2.x, point1.cp2.y);
    }
    else {
      ctx.lineTo(point1.p2.x, point1.p2.y);
    }
    ctx.stroke();
    
    // curve
    ctx.lineWidth = style1.curve.width;
    ctx.strokeStyle = style1.curve.color;
    ctx.beginPath();
    ctx.moveTo(point1.p1.x, point1.p1.y);
    if (point1.cp2) {
      ctx.bezierCurveTo(point1.cp1.x, point1.cp1.y, point1.cp2.x, point1.cp2.y, point1.p2.x, point1.p2.y);
    }
    else {
      ctx.quadraticCurveTo(point1.cp1.x, point1.cp1.y, point1.p2.x, point1.p2.y);
    }
    ctx.stroke();

    // control lines
    ctx.lineWidth = style.cpline.width;
    ctx.strokeStyle = style.cpline.color;
    ctx.beginPath();
    ctx.moveTo(point.p1.x, point.p1.y);
    ctx.lineTo(point.cp1.x, point.cp1.y);
    if (point.cp2) {
      ctx.moveTo(point.p2.x, point.p2.y);
      ctx.lineTo(point.cp2.x, point.cp2.y);
    }
    else {
      ctx.lineTo(point.p2.x, point.p2.y);
    }
    ctx.stroke();
    
    // curve
    ctx.lineWidth = style.curve.width;
    ctx.strokeStyle = style.curve.color;
    ctx.beginPath();
    ctx.moveTo(point.p1.x, point.p1.y);
    if (point.cp2) {
      ctx.bezierCurveTo(point.cp1.x, point.cp1.y, point.cp2.x, point.cp2.y, point.p2.x, point.p2.y);
    }
    else {
      ctx.quadraticCurveTo(point.cp1.x, point.cp1.y, point.p2.x, point.p2.y);
    }
    ctx.stroke();

    // control points    

      ctx.lineWidth = style.point.width;
      ctx.strokeStyle = style.point.color;
      ctx.fillStyle = style.point.fill;
      ctx.beginPath();
      ctx.arc(point.cp1.x, point.cp1.y, style.point.radius, style.point.arc1, style.point.arc2, true);
      ctx.fill();
      //ctx.stroke();

    //fakePoint
      ctx.lineWidth = style.fakePoint.width;
      ctx.strokeStyle = style.fakePoint.color;
      ctx.fillStyle = style.fakePoint.fill;
      ctx.beginPath();
      ctx.arc(fakePoint.cp1.x, fakePoint.cp1.y, style.fakePoint.radius, style.fakePoint.arc1, style.fakePoint.arc2, true);
      ctx.fill();
      ctx.stroke();
    

  }
  
  // start dragging
  function DragStart(e) {
    e = MousePos(e);
    var dx, dy;
    for (var p in fakePoint) {
      dx = fakePoint[p].x - e.x;
      dy = fakePoint[p].y - e.y;
      if ((dx * dx) + (dy * dy) < style.fakePoint.radius * style.fakePoint.radius) {
        drag = p;
        dPoint = e;
        canvas.style.cursor = "move";
        return;
      }
    }
  }
  
  
  // dragging
  function Dragging(e) {
    if (drag) {
      e = MousePos(e);
      if(e.x>=250){
      fakePoint[drag].x += e.x - dPoint.x;
	  fakePoint[drag].y = fakePoint.cp1.y;
	  point[drag].x = 250+((fakePoint[drag].x-250)*2)

      dPoint = e;
      
       var currentdate = new Date(); 
var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
	
	var AB = Math.sqrt(Math.pow(point.cp1.x-250,2)+ Math.pow(point.cp1.y-100,2));    
    var BC = Math.sqrt(Math.pow(point.cp1.x-250,2)+ Math.pow(point.cp1.y-300,2)); 
    var AC = Math.sqrt(Math.pow(250-250,2)+ Math.pow(300-100,2));
    var radians = Math.acos((BC*BC+AB*AB-AC*AC)/(2*BC*AB));
    var degrees = radians * (180/3.141592653589793);
    var logValue = parseInt(180-degrees);


logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"hor_curve_4","value":logValue,"start_value":"false","end_value":"false","start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});

	DrawCanvas();
      }

    }    
  }
  
  
  // end dragging
  function DragEnd(e) {
  	$("#nextbutton").show();
    drag = null;
    canvas.style.cursor = "default";
    DrawCanvas();
    
    var currentdate = new Date(); 
	var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

	var AB = Math.sqrt(Math.pow(point.cp1.x-250,2)+ Math.pow(point.cp1.y-100,2));    
    var BC = Math.sqrt(Math.pow(point.cp1.x-250,2)+ Math.pow(point.cp1.y-300,2)); 
    var AC = Math.sqrt(Math.pow(250-250,2)+ Math.pow(300-100,2));
    var radians = Math.acos((BC*BC+AB*AB-AC*AC)/(2*BC*AB));
    var degrees = radians * (180/3.141592653589793);
    var logValue = parseInt(180-degrees);


    logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"hor_curve_4","value":logValue,"start_value":"false","end_value":"false","start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});

  }

  
  // event parser
  function MousePos(event) {
    event = (event ? event : window.event);
    return {
      x: event.pageX - canvas.offsetLeft,
      y: event.pageY - canvas.offsetTop
    }
  }
  // start
  canvas = document.getElementById("mycanvas");
  code = document.getElementById("code");
  if (canvas.getContext) {
    ctx = canvas.getContext("2d");
    Init(canvas.className == "quadratic");
  }
  
})(); }


function drawQ61(){
	var currentdate = new Date(); 
	var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
	logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"hor_curve_5","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});


		$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
		d3.selectAll("svg").remove();
		$("#questiontext").html("<p>Make the curve <b>150%</b> of its current value.</p>");
		$("#mycanvas").show();
		(function() {

  var canvas, ctx, code, point, point1, style, style1, drag = null, dPoint, fakePoint;

  // define initial points
  function Init(quadratic) {

  	fakePoint = {
      p1: { x:250, y:100 },
      p2: { x:250, y:300 }
    };

  	point1 = {
      p1: { x:250, y:100 },
      p2: { x:250, y:300 }
    };
    
    if (quadratic) {
      point1.cp1 = { x:308, y:200 };
    }
    else {
      point1.cp1 = { x: 150, y: 150 };
      point1.cp2 = { x: 350, y: 150 };
    }
    
    // default styles
    style1 = {
      curve:  { width: 2, color: "#ccc" },
      cpline: { width: 1, color: "#ffffff" },
      point1: { radius: 5, width: 1, color: "#ccc", fill: "rgba(255,255,255,0.5)", arc1: 0, arc2: 2 * Math.PI }
    }

    point = {
      p1: { x:250, y:100 },
      p2: { x:250, y:300 }
    };
    
    if (quadratic) {
      point.cp1 = { x:308, y:200 };
      fakePoint.cp1 = { x: 279, y: 200 };
    }
    else {
      point.cp1 = { x: 150, y: 150 };
      point.cp2 = { x: 350, y: 150 };
    }
    
    // default styles
    style = {
      curve:  { width: 2, color: "#333" },
      cpline: { width: 1, color: "#ffffff" },
      point: { radius: 5, width: 1, color: "#333", fill: "rgba(255,255,255,0.5)", arc1: 0, arc2: 2 * Math.PI },
      fakePoint: { radius: 5, width: 1, color: "#333", fill: "rgba(255,255,255,0.5)", arc1: 0, arc2: 2 * Math.PI },
    }
    
    // line style defaults
    ctx.lineCap = "round";
    ctx.lineJoin = "round";
    
    // event handlers
    canvas.onmousedown = DragStart;
    canvas.onmousemove = Dragging;
    canvas.onmouseup = canvas.onmouseout = DragEnd;
    DrawCanvas();
  }
  
  
  // draw canvas
  function DrawCanvas() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    
    // control lines
    ctx.lineWidth = style1.cpline.width;
    ctx.strokeStyle = style1.cpline.color;
    ctx.beginPath();
    ctx.moveTo(point1.p1.x, point1.p1.y);
    ctx.lineTo(point1.cp1.x, point1.cp1.y);
    if (point1.cp2) {
      ctx.moveTo(point1.p2.x, point1.p2.y);
      ctx.lineTo(point1.cp2.x, point1.cp2.y);
    }
    else {
      ctx.lineTo(point1.p2.x, point1.p2.y);
    }
    ctx.stroke();
    
    // curve
    ctx.lineWidth = style1.curve.width;
    ctx.strokeStyle = style1.curve.color;
    ctx.beginPath();
    ctx.moveTo(point1.p1.x, point1.p1.y);
    if (point1.cp2) {
      ctx.bezierCurveTo(point1.cp1.x, point1.cp1.y, point1.cp2.x, point1.cp2.y, point1.p2.x, point1.p2.y);
    }
    else {
      ctx.quadraticCurveTo(point1.cp1.x, point1.cp1.y, point1.p2.x, point1.p2.y);
    }
    ctx.stroke();


    // control lines
    ctx.lineWidth = style.cpline.width;
    ctx.strokeStyle = style.cpline.color;
    ctx.beginPath();
    ctx.moveTo(point.p1.x, point.p1.y);
    ctx.lineTo(point.cp1.x, point.cp1.y);
    if (point.cp2) {
      ctx.moveTo(point.p2.x, point.p2.y);
      ctx.lineTo(point.cp2.x, point.cp2.y);
    }
    else {
      ctx.lineTo(point.p2.x, point.p2.y);
    }
    ctx.stroke();
    
    // curve
    ctx.lineWidth = style.curve.width;
    ctx.strokeStyle = style.curve.color;
    ctx.beginPath();
    ctx.moveTo(point.p1.x, point.p1.y);
    if (point.cp2) {
      ctx.bezierCurveTo(point.cp1.x, point.cp1.y, point.cp2.x, point.cp2.y, point.p2.x, point.p2.y);
    }
    else {
      ctx.quadraticCurveTo(point.cp1.x, point.cp1.y, point.p2.x, point.p2.y);
    }
    ctx.stroke();

    // control points    

      ctx.lineWidth = style.point.width;
      ctx.strokeStyle = style.point.color;
      ctx.fillStyle = style.point.fill;
      ctx.beginPath();
      ctx.arc(point.cp1.x, point.cp1.y, style.point.radius, style.point.arc1, style.point.arc2, true);
      ctx.fill();
      //ctx.stroke();

    //fakePoint
      ctx.lineWidth = style.fakePoint.width;
      ctx.strokeStyle = style.fakePoint.color;
      ctx.fillStyle = style.fakePoint.fill;
      ctx.beginPath();
      ctx.arc(fakePoint.cp1.x, fakePoint.cp1.y, style.fakePoint.radius, style.fakePoint.arc1, style.fakePoint.arc2, true);
      ctx.fill();
      ctx.stroke();
    

  }
  
  // start dragging
  function DragStart(e) {
    e = MousePos(e);
    var dx, dy;
    for (var p in fakePoint) {
      dx = fakePoint[p].x - e.x;
      dy = fakePoint[p].y - e.y;
      if ((dx * dx) + (dy * dy) < style.fakePoint.radius * style.fakePoint.radius) {
        drag = p;
        dPoint = e;
        canvas.style.cursor = "move";
        return;
      }
    }
  }
  
  
  // dragging
  function Dragging(e) {
    if (drag) {
      e = MousePos(e);
      if(e.x>=250){
      fakePoint[drag].x += e.x - dPoint.x;
	  fakePoint[drag].y = fakePoint.cp1.y;
	  point[drag].x = 250+((fakePoint[drag].x-250)*2)

      dPoint = e;
      
       var currentdate = new Date(); 
var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
	
	var AB = Math.sqrt(Math.pow(point.cp1.x-250,2)+ Math.pow(point.cp1.y-100,2));    
    var BC = Math.sqrt(Math.pow(point.cp1.x-250,2)+ Math.pow(point.cp1.y-300,2)); 
    var AC = Math.sqrt(Math.pow(250-250,2)+ Math.pow(300-100,2));
    var radians = Math.acos((BC*BC+AB*AB-AC*AC)/(2*BC*AB));
    var degrees = radians * (180/3.141592653589793);
    var logValue = parseInt(180-degrees);


logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"hor_curve_5","value":logValue,"start_value":"false","end_value":"false","start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});


      DrawCanvas();
      }
    }    
  }
  
  
  // end dragging
  function DragEnd(e) {
  	$("#nextbutton").show();
    drag = null;
    canvas.style.cursor = "default";
    DrawCanvas();
    
    var currentdate = new Date(); 
	var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

	var AB = Math.sqrt(Math.pow(point.cp1.x-250,2)+ Math.pow(point.cp1.y-100,2));    
    var BC = Math.sqrt(Math.pow(point.cp1.x-250,2)+ Math.pow(point.cp1.y-300,2)); 
    var AC = Math.sqrt(Math.pow(250-250,2)+ Math.pow(300-100,2));
    var radians = Math.acos((BC*BC+AB*AB-AC*AC)/(2*BC*AB));
    var degrees = radians * (180/3.141592653589793);
    var logValue = parseInt(180-degrees);


    logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"hor_curve_5","value":logValue,"start_value":"false","end_value":"false","start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});

  }

  
  // event parser
  function MousePos(event) {
    event = (event ? event : window.event);
    return {
      x: event.pageX - canvas.offsetLeft,
      y: event.pageY - canvas.offsetTop
    }
  }
  // start
  canvas = document.getElementById("mycanvas");
  code = document.getElementById("code");
  if (canvas.getContext) {
    ctx = canvas.getContext("2d");
    Init(canvas.className == "quadratic");
  }
  
})(); }


function drawQ62(){
	var currentdate = new Date(); 
	var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
	logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"hor_curve_6","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});


		$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
		d3.selectAll("svg").remove();
		$("#questiontext").html("<p>Make the curve <b>175%</b> of its current value.</p>");
		$("#mycanvas").show();
		(function() {

  var canvas, ctx, code, point, point1, style, style1, drag = null, dPoint, fakePoint;

  // define initial points
  function Init(quadratic) {

  	fakePoint = {
      p1: { x:250, y:100 },
      p2: { x:250, y:300 }
    };

  	point1 = {
      p1: { x:250, y:100 },
      p2: { x:250, y:300 }
    };
    
    if (quadratic) {
      point1.cp1 = { x:308, y:200 };
    }
    else {
      point1.cp1 = { x: 150, y: 150 };
      point1.cp2 = { x: 350, y: 150 };
    }
    
    // default styles
    style1 = {
      curve:  { width: 2, color: "#ccc" },
      cpline: { width: 1, color: "#ffffff" },
      point1: { radius: 5, width: 1, color: "#ccc", fill: "rgba(255,255,255,0.5)", arc1: 0, arc2: 2 * Math.PI }
    }

    point = {
      p1: { x:250, y:100 },
      p2: { x:250, y:300 }
    };
    
    if (quadratic) {
      point.cp1 = { x:308, y:200 };
      fakePoint.cp1 = { x: 279, y: 200 };
    }
    else {
      point.cp1 = { x: 150, y: 150 };
      point.cp2 = { x: 350, y: 150 };
    }
    
    // default styles
    style = {
      curve:  { width: 2, color: "#333" },
      cpline: { width: 1, color: "#ffffff" },
      point: { radius: 5, width: 1, color: "#333", fill: "rgba(255,255,255,0.5)", arc1: 0, arc2: 2 * Math.PI },
      fakePoint: { radius: 5, width: 1, color: "#333", fill: "rgba(255,255,255,0.5)", arc1: 0, arc2: 2 * Math.PI },
    }
    
    // line style defaults
    ctx.lineCap = "round";
    ctx.lineJoin = "round";
    
    // event handlers
    canvas.onmousedown = DragStart;
    canvas.onmousemove = Dragging;
    canvas.onmouseup = canvas.onmouseout = DragEnd;
    DrawCanvas();
  }
  
  
  // draw canvas
  function DrawCanvas() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    
    // control lines
    ctx.lineWidth = style1.cpline.width;
    ctx.strokeStyle = style1.cpline.color;
    ctx.beginPath();
    ctx.moveTo(point1.p1.x, point1.p1.y);
    ctx.lineTo(point1.cp1.x, point1.cp1.y);
    if (point1.cp2) {
      ctx.moveTo(point1.p2.x, point1.p2.y);
      ctx.lineTo(point1.cp2.x, point1.cp2.y);
    }
    else {
      ctx.lineTo(point1.p2.x, point1.p2.y);
    }
    ctx.stroke();
    
    // curve
    ctx.lineWidth = style1.curve.width;
    ctx.strokeStyle = style1.curve.color;
    ctx.beginPath();
    ctx.moveTo(point1.p1.x, point1.p1.y);
    if (point1.cp2) {
      ctx.bezierCurveTo(point1.cp1.x, point1.cp1.y, point1.cp2.x, point1.cp2.y, point1.p2.x, point1.p2.y);
    }
    else {
      ctx.quadraticCurveTo(point1.cp1.x, point1.cp1.y, point1.p2.x, point1.p2.y);
    }
    ctx.stroke();


    // control lines
    ctx.lineWidth = style.cpline.width;
    ctx.strokeStyle = style.cpline.color;
    ctx.beginPath();
    ctx.moveTo(point.p1.x, point.p1.y);
    ctx.lineTo(point.cp1.x, point.cp1.y);
    if (point.cp2) {
      ctx.moveTo(point.p2.x, point.p2.y);
      ctx.lineTo(point.cp2.x, point.cp2.y);
    }
    else {
      ctx.lineTo(point.p2.x, point.p2.y);
    }
    ctx.stroke();
    
    // curve
    ctx.lineWidth = style.curve.width;
    ctx.strokeStyle = style.curve.color;
    ctx.beginPath();
    ctx.moveTo(point.p1.x, point.p1.y);
    if (point.cp2) {
      ctx.bezierCurveTo(point.cp1.x, point.cp1.y, point.cp2.x, point.cp2.y, point.p2.x, point.p2.y);
    }
    else {
      ctx.quadraticCurveTo(point.cp1.x, point.cp1.y, point.p2.x, point.p2.y);
    }
    ctx.stroke();

    // control points    

      ctx.lineWidth = style.point.width;
      ctx.strokeStyle = style.point.color;
      ctx.fillStyle = style.point.fill;
      ctx.beginPath();
      ctx.arc(point.cp1.x, point.cp1.y, style.point.radius, style.point.arc1, style.point.arc2, true);
      ctx.fill();
      //ctx.stroke();

    //fakePoint
      ctx.lineWidth = style.fakePoint.width;
      ctx.strokeStyle = style.fakePoint.color;
      ctx.fillStyle = style.fakePoint.fill;
      ctx.beginPath();
      ctx.arc(fakePoint.cp1.x, fakePoint.cp1.y, style.fakePoint.radius, style.fakePoint.arc1, style.fakePoint.arc2, true);
      ctx.fill();
      ctx.stroke();
    

    
  }
  
  // start dragging
  function DragStart(e) {
    e = MousePos(e);
    var dx, dy;
    for (var p in fakePoint) {
      dx = fakePoint[p].x - e.x;
      dy = fakePoint[p].y - e.y;
      if ((dx * dx) + (dy * dy) < style.fakePoint.radius * style.fakePoint.radius) {
        drag = p;
        dPoint = e;
        canvas.style.cursor = "move";
        return;
      }
    }
  }
  
  
  // dragging
  function Dragging(e) {
    if (drag) {
      e = MousePos(e);
      if(e.x>=250){
      fakePoint[drag].x += e.x - dPoint.x;
	  fakePoint[drag].y = fakePoint.cp1.y;
	  point[drag].x = 250+((fakePoint[drag].x-250)*2)

      dPoint = e;
      
       var currentdate = new Date(); 
var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
	
	var AB = Math.sqrt(Math.pow(point.cp1.x-250,2)+ Math.pow(point.cp1.y-100,2));    
    var BC = Math.sqrt(Math.pow(point.cp1.x-250,2)+ Math.pow(point.cp1.y-300,2)); 
    var AC = Math.sqrt(Math.pow(250-250,2)+ Math.pow(300-100,2));
    var radians = Math.acos((BC*BC+AB*AB-AC*AC)/(2*BC*AB));
    var degrees = radians * (180/3.141592653589793);
    var logValue = parseInt(180-degrees);


logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"hor_curve_6","value":logValue,"start_value":"false","end_value":"false","start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});


      DrawCanvas();
      }
    }    
  }
  
  
  // end dragging
  function DragEnd(e) {
  	$("#nextbutton").show();
    drag = null;
    canvas.style.cursor = "default";
    DrawCanvas();
    
    var currentdate = new Date(); 
	var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

	var AB = Math.sqrt(Math.pow(point.cp1.x-250,2)+ Math.pow(point.cp1.y-100,2));    
    var BC = Math.sqrt(Math.pow(point.cp1.x-250,2)+ Math.pow(point.cp1.y-300,2)); 
    var AC = Math.sqrt(Math.pow(250-250,2)+ Math.pow(300-100,2));
    var radians = Math.acos((BC*BC+AB*AB-AC*AC)/(2*BC*AB));
    var degrees = radians * (180/3.141592653589793);
    var logValue = parseInt(180-degrees);


    logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"hor_curve_6","value":logValue,"start_value":"false","end_value":"false","start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});

  }

  
  // event parser
  function MousePos(event) {
    event = (event ? event : window.event);
    return {
      x: event.pageX - canvas.offsetLeft,
      y: event.pageY - canvas.offsetTop
    }
  }
  // start
  canvas = document.getElementById("mycanvas");
  code = document.getElementById("code");
  if (canvas.getContext) {
    ctx = canvas.getContext("2d");
    Init(canvas.className == "quadratic");
  }
  
})(); }

function drawQ63(){
	var currentdate = new Date(); 
	var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
	logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"hor_curve_7","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});


		$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
		d3.selectAll("svg").remove();
		$("#questiontext").html("<p>Make the curve <b>200%</b> of its current value.</p>");
		$("#mycanvas").show();
		(function() {

  var canvas, ctx, code, point, point1, style, style1, drag = null, dPoint, fakePoint;

  // define initial points
  function Init(quadratic) {

  	fakePoint = {
      p1: { x:250, y:100 },
      p2: { x:250, y:300 }
    };

  	point1 = {
      p1: { x:250, y:100 },
      p2: { x:250, y:300 }
    };
    
    if (quadratic) {
      point1.cp1 = { x:308, y:200 };
    }
    else {
      point1.cp1 = { x: 150, y: 150 };
      point1.cp2 = { x: 350, y: 150 };
    }
    
    // default styles
    style1 = {
      curve:  { width: 2, color: "#ccc" },
      cpline: { width: 1, color: "#ffffff" },
      point1: { radius: 5, width: 1, color: "#ccc", fill: "rgba(255,255,255,0.5)", arc1: 0, arc2: 2 * Math.PI }
    }

    point = {
      p1: { x:250, y:100 },
      p2: { x:250, y:300 }
    };
    
    if (quadratic) {
      point.cp1 = { x:308, y:200 };
      fakePoint.cp1 = { x: 279, y: 200 };
    }
    else {
      point.cp1 = { x: 150, y: 150 };
      point.cp2 = { x: 350, y: 150 };
    }
    
    // default styles
    style = {
      curve:  { width: 2, color: "#333" },
      cpline: { width: 1, color: "#ffffff" },
      point: { radius: 5, width: 1, color: "#333", fill: "rgba(255,255,255,0.5)", arc1: 0, arc2: 2 * Math.PI },
      fakePoint: { radius: 5, width: 1, color: "#333", fill: "rgba(255,255,255,0.5)", arc1: 0, arc2: 2 * Math.PI },
    }
    
    // line style defaults
    ctx.lineCap = "round";
    ctx.lineJoin = "round";
    
    // event handlers
    canvas.onmousedown = DragStart;
    canvas.onmousemove = Dragging;
    canvas.onmouseup = canvas.onmouseout = DragEnd;
    DrawCanvas();
  }
  
  
  // draw canvas
  function DrawCanvas() {
    ctx.clearRect(0, 0, canvas.width, canvas.height);
    
    // control lines
    ctx.lineWidth = style1.cpline.width;
    ctx.strokeStyle = style1.cpline.color;
    ctx.beginPath();
    ctx.moveTo(point1.p1.x, point1.p1.y);
    ctx.lineTo(point1.cp1.x, point1.cp1.y);
    if (point1.cp2) {
      ctx.moveTo(point1.p2.x, point1.p2.y);
      ctx.lineTo(point1.cp2.x, point1.cp2.y);
    }
    else {
      ctx.lineTo(point1.p2.x, point1.p2.y);
    }
    ctx.stroke();
    
    // curve
    ctx.lineWidth = style1.curve.width;
    ctx.strokeStyle = style1.curve.color;
    ctx.beginPath();
    ctx.moveTo(point1.p1.x, point1.p1.y);
    if (point1.cp2) {
      ctx.bezierCurveTo(point1.cp1.x, point1.cp1.y, point1.cp2.x, point1.cp2.y, point1.p2.x, point1.p2.y);
    }
    else {
      ctx.quadraticCurveTo(point1.cp1.x, point1.cp1.y, point1.p2.x, point1.p2.y);
    }
    ctx.stroke();


    // control lines
    ctx.lineWidth = style.cpline.width;
    ctx.strokeStyle = style.cpline.color;
    ctx.beginPath();
    ctx.moveTo(point.p1.x, point.p1.y);
    ctx.lineTo(point.cp1.x, point.cp1.y);
    if (point.cp2) {
      ctx.moveTo(point.p2.x, point.p2.y);
      ctx.lineTo(point.cp2.x, point.cp2.y);
    }
    else {
      ctx.lineTo(point.p2.x, point.p2.y);
    }
    ctx.stroke();
    
    // curve
    ctx.lineWidth = style.curve.width;
    ctx.strokeStyle = style.curve.color;
    ctx.beginPath();
    ctx.moveTo(point.p1.x, point.p1.y);
    if (point.cp2) {
      ctx.bezierCurveTo(point.cp1.x, point.cp1.y, point.cp2.x, point.cp2.y, point.p2.x, point.p2.y);
    }
    else {
      ctx.quadraticCurveTo(point.cp1.x, point.cp1.y, point.p2.x, point.p2.y);
    }
    ctx.stroke();

    // control points    

      ctx.lineWidth = style.point.width;
      ctx.strokeStyle = style.point.color;
      ctx.fillStyle = style.point.fill;
      ctx.beginPath();
      ctx.arc(point.cp1.x, point.cp1.y, style.point.radius, style.point.arc1, style.point.arc2, true);
      ctx.fill();
      //ctx.stroke();

    //fakePoint
      ctx.lineWidth = style.fakePoint.width;
      ctx.strokeStyle = style.fakePoint.color;
      ctx.fillStyle = style.fakePoint.fill;
      ctx.beginPath();
      ctx.arc(fakePoint.cp1.x, fakePoint.cp1.y, style.fakePoint.radius, style.fakePoint.arc1, style.fakePoint.arc2, true);
      ctx.fill();
      ctx.stroke();
    
 }
  
  
  // start dragging
  function DragStart(e) {
    e = MousePos(e);
    var dx, dy;
    for (var p in fakePoint) {
      dx = fakePoint[p].x - e.x;
      dy = fakePoint[p].y - e.y;
      if ((dx * dx) + (dy * dy) < style.fakePoint.radius * style.fakePoint.radius) {
        drag = p;
        dPoint = e;
        canvas.style.cursor = "move";
        return;
      }
    }
  }
  
  
  // dragging
  function Dragging(e) {
    if (drag) {
      e = MousePos(e);
      if(e.x>=250){
      fakePoint[drag].x += e.x - dPoint.x;
	  fakePoint[drag].y = fakePoint.cp1.y;
	  point[drag].x = 250+((fakePoint[drag].x-250)*2)

      dPoint = e;
      
       var currentdate = new Date(); 
var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
	
	var AB = Math.sqrt(Math.pow(point.cp1.x-250,2)+ Math.pow(point.cp1.y-100,2));    
    var BC = Math.sqrt(Math.pow(point.cp1.x-250,2)+ Math.pow(point.cp1.y-300,2)); 
    var AC = Math.sqrt(Math.pow(250-250,2)+ Math.pow(300-100,2));
    var radians = Math.acos((BC*BC+AB*AB-AC*AC)/(2*BC*AB));
    var degrees = radians * (180/3.141592653589793);
    var logValue = parseInt(180-degrees);


logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"hor_curve_7","value":logValue,"start_value":"false","end_value":"false","start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});

	DrawCanvas();
      }
    }    
  }
  
  
  // end dragging
  function DragEnd(e) {
  	$("#nextbutton").show();
    drag = null;
    canvas.style.cursor = "default";
    DrawCanvas();
    
    var currentdate = new Date(); 
	var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

	var AB = Math.sqrt(Math.pow(point.cp1.x-250,2)+ Math.pow(point.cp1.y-100,2));    
    var BC = Math.sqrt(Math.pow(point.cp1.x-250,2)+ Math.pow(point.cp1.y-300,2)); 
    var AC = Math.sqrt(Math.pow(250-250,2)+ Math.pow(300-100,2));
    var radians = Math.acos((BC*BC+AB*AB-AC*AC)/(2*BC*AB));
    var degrees = radians * (180/3.141592653589793);
    var logValue = parseInt(180-degrees);


    logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"hor_curve_7","value":logValue,"start_value":"false","end_value":"false","start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});

  }

  
  // event parser
  function MousePos(event) {
    event = (event ? event : window.event);
    return {
      x: event.pageX - canvas.offsetLeft,
      y: event.pageY - canvas.offsetTop
    }
  }
  // start
  canvas = document.getElementById("mycanvas");
  code = document.getElementById("code");
  if (canvas.getContext) {
    ctx = canvas.getContext("2d");
    Init(canvas.className == "quadratic");
  }
  
})(); }

//-------------------
//questions 64-70 (texture)
//-------------------
var prevY = -1;
function drawQ64(){
	prevY = -1;
	currentTextureQuestion="texture_2";
	var currentdate = new Date(); 
	var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
	logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"texture_2","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});

	$("#mycanvas").hide();
	$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
	$("#sliderDiv1").remove();
	d3.selectAll("svg").remove();
	//$("#viz").css("width","50%");
	//$("#vizcontainer").append("<div style='width:50%' id='staticTextureBox'></div>")
	
	$("#questiontext").html("<p>Make the texture <b>25%</b> of its current value. (The rectangle on the right is only for reference and will always indicate your starting texture value.)</p>");
	
	curSize = 40;
	var svg = d3.select("#viz")
		  .append("svg")
		  .attr("width",900)
		  .attr("height",300);


		var t = textures.lines()
			.orientation("2/8","6/8")
		    .size(curSize)
		    .strokeWidth(1);

		svg.call(t);

		svg.append("rect")
			.attr("width",200)
			.attr("height",200)
			.attr("x",250)
			.attr("y",50)
		  .style("fill", t.url())
		  .on("mouseover",function(){
		  	curSize-=1
		  	increase()
		  });

	/*var svg1 = d3.select("#staticTextureBox")
		  .append("svg")
		  .attr("width",300)
		  .attr("height",300);*/


		var t1 = textures.lines()
			.orientation("2/8","6/8")
		    .size(40)
		    .strokeWidth(1);

		svg.call(t1);

		svg.append("rect")
			.attr("width",200)
			.attr("height",200)
			.attr("x",500)
			.attr("y",50)
		  .style("fill", t1.url());  	

}

function drawQ65(){
	prevY = -1;
	currentTextureQuestion="texture_1";
	var currentdate = new Date(); 
	var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
	logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"texture_1","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});

	$("#mycanvas").hide();
	$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
	$("#sliderDiv1").remove();
	d3.selectAll("svg").remove();
	//$("#viz").css("width","50%");
	//$("#vizcontainer").append("<div style='width:50%' id='staticTextureBox'></div>")
	
	$("#questiontext").html("<p>Make the texture <b>50%</b> of its current value. (The rectangle on the right is only for reference and will always indicate your starting texture value.)</p>");
	
	curSize = 40;
	var svg = d3.select("#viz")
		  .append("svg")
		  .attr("width",900)
		  .attr("height",300);


		var t = textures.lines()
			.orientation("2/8","6/8")
		    .size(curSize)
		    .strokeWidth(1);

		svg.call(t);

		svg.append("rect")
			.attr("width",200)
			.attr("height",200)
			.attr("x",250)
			.attr("y",50)
		  .style("fill", t.url())
		  .on("mouseover",function(){
		  	curSize-=1
		  	increase()
		  });

	/*var svg1 = d3.select("#staticTextureBox")
		  .append("svg")
		  .attr("width",300)
		  .attr("height",300);*/


		var t1 = textures.lines()
			.orientation("2/8","6/8")
		    .size(40)
		    .strokeWidth(1);

		svg.call(t1);

		svg.append("rect")
			.attr("width",200)
			.attr("height",200)
			.attr("x",500)
			.attr("y",50)
		  .style("fill", t1.url());  	

}

function drawQ66(){
	prevY = -1;
	currentTextureQuestion="texture_3";
	var currentdate = new Date(); 
	var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
	logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"texture_3","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});

	$("#mycanvas").hide();
	$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
	$("#sliderDiv1").remove();
	d3.selectAll("svg").remove();
	//$("#viz").css("width","50%");
	//$("#vizcontainer").append("<div style='width:50%' id='staticTextureBox'></div>")
	
	$("#questiontext").html("<p>Make the texture <b>75%</b> of its current value. (The rectangle on the right is only for reference and will always indicate your starting texture value.)</p>");
	
	curSize = 40;
	var svg = d3.select("#viz")
		  .append("svg")
		  .attr("width",900)
		  .attr("height",300);


		var t = textures.lines()
			.orientation("2/8","6/8")
		    .size(curSize)
		    .strokeWidth(1);

		svg.call(t);

		svg.append("rect")
			.attr("width",200)
			.attr("height",200)
			.attr("x",250)
			.attr("y",50)
		  .style("fill", t.url())
		  .on("mouseover",function(){
		  	curSize-=1
		  	increase()
		  });

	/*var svg1 = d3.select("#staticTextureBox")
		  .append("svg")
		  .attr("width",300)
		  .attr("height",300);*/


		var t1 = textures.lines()
			.orientation("2/8","6/8")
		    .size(40)
		    .strokeWidth(1);

		svg.call(t1);

		svg.append("rect")
			.attr("width",200)
			.attr("height",200)
			.attr("x",500)
			.attr("y",50)
		  .style("fill", t1.url());  	

}


function drawQ67(){
	prevY = -1;
	currentTextureQuestion="texture_4";
	var currentdate = new Date(); 
	var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
	logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"texture_4","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});

	$("#mycanvas").hide();
	$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
	$("#sliderDiv1").remove();
	d3.selectAll("svg").remove();
	//$("#viz").css("width","50%");
	//$("#vizcontainer").append("<div style='width:50%' id='staticTextureBox'></div>")
	
	$("#questiontext").html("<p>Make the texture <b>125%</b> of its current value. (The rectangle on the right is only for reference and will always indicate your starting texture value.)</p>");
	
	curSize = 40;
	var svg = d3.select("#viz")
		  .append("svg")
		  .attr("width",900)
		  .attr("height",300);


		var t = textures.lines()
			.orientation("2/8","6/8")
		    .size(curSize)
		    .strokeWidth(1);

		svg.call(t);

		svg.append("rect")
			.attr("width",200)
			.attr("height",200)
			.attr("x",250)
			.attr("y",50)
		  .style("fill", t.url())
		  .on("mouseover",function(){
		  	curSize-=1
		  	increase()
		  });

	/*var svg1 = d3.select("#staticTextureBox")
		  .append("svg")
		  .attr("width",300)
		  .attr("height",300);*/


		var t1 = textures.lines()
			.orientation("2/8","6/8")
		    .size(40)
		    .strokeWidth(1);

		svg.call(t1);

		svg.append("rect")
			.attr("width",200)
			.attr("height",200)
			.attr("x",500)
			.attr("y",50)
		  .style("fill", t1.url());  	

}

function drawQ68(){
	prevY = -1;
	currentTextureQuestion="texture_5";
	var currentdate = new Date(); 
	var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
	logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"texture_5","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});

	$("#mycanvas").hide();
	$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
	$("#sliderDiv1").remove();
	d3.selectAll("svg").remove();
	//$("#viz").css("width","50%");
	//$("#vizcontainer").append("<div style='width:50%' id='staticTextureBox'></div>")
	
	$("#questiontext").html("<p>Make the texture <b>150%</b> of its current value. (The rectangle on the right is only for reference and will always indicate your starting texture value.)</p>");
	
	curSize = 40;
	var svg = d3.select("#viz")
		  .append("svg")
		  .attr("width",900)
		  .attr("height",300);


		var t = textures.lines()
			.orientation("2/8","6/8")
		    .size(curSize)
		    .strokeWidth(1);

		svg.call(t);

		svg.append("rect")
			.attr("width",200)
			.attr("height",200)
			.attr("x",250)
			.attr("y",50)
		  .style("fill", t.url())
		  .on("mouseover",function(){
		  	curSize-=1
		  	increase()
		  });

	/*var svg1 = d3.select("#staticTextureBox")
		  .append("svg")
		  .attr("width",300)
		  .attr("height",300);*/


		var t1 = textures.lines()
			.orientation("2/8","6/8")
		    .size(40)
		    .strokeWidth(1);

		svg.call(t1);

		svg.append("rect")
			.attr("width",200)
			.attr("height",200)
			.attr("x",500)
			.attr("y",50)
		  .style("fill", t1.url());  	

}


function drawQ69(){
	prevY = -1;
	currentTextureQuestion="texture_6";
	var currentdate = new Date(); 
	var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
	logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"texture_6","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});

	$("#mycanvas").hide();
	$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
	$("#sliderDiv1").remove();
	d3.selectAll("svg").remove();
	//$("#viz").css("width","50%");
	//$("#vizcontainer").append("<div style='width:50%' id='staticTextureBox'></div>")
	
	$("#questiontext").html("<p>Make the texture <b>175%</b> of its current value. (The rectangle on the right is only for reference and will always indicate your starting texture value.)</p>");
	
	curSize = 40;
	var svg = d3.select("#viz")
		  .append("svg")
		  .attr("width",900)
		  .attr("height",300);


		var t = textures.lines()
			.orientation("2/8","6/8")
		    .size(curSize)
		    .strokeWidth(1);

		svg.call(t);

		svg.append("rect")
			.attr("width",200)
			.attr("height",200)
			.attr("x",250)
			.attr("y",50)
		  .style("fill", t.url())
		  .on("mouseover",function(){
		  	curSize-=1
		  	increase()
		  });

	/*var svg1 = d3.select("#staticTextureBox")
		  .append("svg")
		  .attr("width",300)
		  .attr("height",300);*/


		var t1 = textures.lines()
			.orientation("2/8","6/8")
		    .size(40)
		    .strokeWidth(1);

		svg.call(t1);

		svg.append("rect")
			.attr("width",200)
			.attr("height",200)
			.attr("x",500)
			.attr("y",50)
		  .style("fill", t1.url());  	

}


function drawQ70(){
	prevY = -1;
	currentTextureQuestion="texture_7";
	var currentdate = new Date(); 
	var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
	logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"texture_7","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});

	$("#mycanvas").hide();
	$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
	$("#sliderDiv1").remove();
	d3.selectAll("svg").remove();
	//$("#viz").css("width","50%");
	//$("#vizcontainer").append("<div style='width:50%' id='staticTextureBox'></div>")
	
	$("#questiontext").html("<p>Make the texture <b>200%</b> of its current value. (The rectangle on the right is only for reference and will always indicate your starting texture value.)</p>");
	
	curSize = 40;
	var svg = d3.select("#viz")
		  .append("svg")
		  .attr("width",900)
		  .attr("height",300);


		var t = textures.lines()
			.orientation("2/8","6/8")
		    .size(curSize)
		    .strokeWidth(1);

		svg.call(t);

		svg.append("rect")
			.attr("width",200)
			.attr("height",200)
			.attr("x",250)
			.attr("y",50)
		  .style("fill", t.url())
		  .on("mouseover",function(){
		  	curSize-=1
		  	increase()
		  });

	/*var svg1 = d3.select("#staticTextureBox")
		  .append("svg")
		  .attr("width",300)
		  .attr("height",300);*/


		var t1 = textures.lines()
			.orientation("2/8","6/8")
		    .size(40)
		    .strokeWidth(1);

		svg.call(t1);

		svg.append("rect")
			.attr("width",200)
			.attr("height",200)
			.attr("x",500)
			.attr("y",50)
		  .style("fill", t1.url());  	

}

function increase(){
  		d3.select("#viz").selectAll("svg").remove();  		
  		$("#nextbutton").show();
  		curSize+=1;		

  		var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

    	logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":currentTextureQuestion,"value":curSize,"start_value":"false","end_value":"false","start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});


		var svg = d3.select("#viz")
		  .append("svg")
		  .attr("width",900)
		  .attr("height",300);


		var t = textures.lines()
			.orientation("2/8","6/8")
		    .size(curSize)
		    .strokeWidth(1);

		svg.call(t);

		svg.append("rect")
			.attr("width",200)
			.attr("height",200)
			.attr("x",250)
			.attr("y",50)
		  .style("fill", t.url())
		  .call(d3.behavior.drag().on('drag', function() {
		  	//console.log(prevY,d3.event.y)
		  	if(d3.event.y<prevY){
		  		prevY = d3.event.y;
		  		decrease()
		  	}else{
		  		prevY = d3.event.y;
		  		increase()
		  	}
		  }));

		
    	var t1 = textures.lines()
			.orientation("2/8","6/8")
		    .size(40)
		    .strokeWidth(1);

		svg.call(t1);

		svg.append("rect")
			.attr("width",200)
			.attr("height",200)
			.attr("x",500)
			.attr("y",50)
		  .style("fill", t1.url());  
	}		
	function decrease(){		
		d3.select("#viz").selectAll("svg").remove();
		$("#nextbutton").show();
		if(curSize>=3){
			curSize-=1;		
		}
		var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

    	logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":currentTextureQuestion,"value":curSize,"start_value":"false","end_value":"false","start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});
		var svg = d3.select("#viz")
		  .append("svg")
		  .attr("width",900)
		  .attr("height",300);


		var t = textures.lines()
			.orientation("2/8","6/8")
		    .size(curSize)
		    .strokeWidth(1);

		svg.call(t);

		svg.append("rect")
			.attr("width",200)
			.attr("height",200)
			.attr("x",250)
			.attr("y",50)
		  .style("fill", t.url())
		  .call(d3.behavior.drag().on('drag', function() {
		  	//console.log(prevY,d3.event.y)
		  	if(d3.event.y<prevY){
		  		prevY = d3.event.y;		  	
		  		decrease()
		  	}else{
		  		prevY = d3.event.y;		  	
		  		increase()
		  	}
		  }));

    var t1 = textures.lines()
			.orientation("2/8","6/8")
		    .size(40)
		    .strokeWidth(1);

		svg.call(t1);

		svg.append("rect")
			.attr("width",200)
			.attr("height",200)
			.attr("x",500)
			.attr("y",50)
		  .style("fill", t1.url());  
	}	



/*
var doScroll = function (e) {
    // cross-browser wheel delta
    e = window.event || e;
    var delta = Math.max(-1, Math.min(1, (e.wheelDelta || -e.detail)));

    // Do something with `delta`
    //document.body.innerHTML = delta;
    //console.log(delta)
    if(questionNumber>=64 && questionNumber<=70){
    e.preventDefault();
    if(delta==-1){
    	increase()
    }else{
    	decrease()
    }

	}
    
};

	if (window.addEventListener) {
	    window.addEventListener("mousewheel", doScroll, false);
	    window.addEventListener("DOMMouseScroll", doScroll, false);
	} else {
	    window.attachEvent("onmousewheel", increase);
	}
*/

//--------------------------
//Vertical Slider
//--------------------------
function drawQ71(){
var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"vertical_slider_1","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});

	$("#mycanvas").hide();
	$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
	d3.selectAll("svg").remove();
	$("#questiontext").html("<p>Make the slider box's position <b>50%</b> of its current value.</p>");
	var x = document.body.offsetWidth/2
	$('#viz').append("<div id=\"sliderDiv1\" align='center' style=\"width:10px;height:350px;margin-left: "+x+"px;margin-right: auto;position:absolute;\"></div>");
	$('#viz').append("<div id=\"sliderDiv\" align='center' style=\"width:10px;height:350px;margin-left: "+x+"px;margin-right: auto;z-index:10;\"></div>");

	d3.select('#sliderDiv1').call(d3.slider().value(50).orientation("vertical")).style("opacity",0.5);

	d3.select('#sliderDiv').call(d3.slider().value(50).axis(d3.svg.axis().orient("left").ticks("1")).orientation("vertical").on("slide", function(evt, value) {
		 $("#nextbutton").show();
	 	 var currentdate = new Date(); 
	  var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

    logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"vertical_slider_1","value":value,"start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});	

    }));

	d3.select(".d3-slider-axis.d3-slider-axis-left").selectAll("text").each(function(d){
    	//console.log(d)
    	if(d=="100"){
    		d3.select(this).text("low")
    	}else if(d=="0"){
    		d3.select(this).text("high")
    	}
    })
}

function drawQ72(){
var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"vertical_slider_2","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});

	$("#mycanvas").hide();
	$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
	d3.selectAll("svg").remove();
	$("#questiontext").html("<p>Make the slider box's position <b>25%</b> of its current value.</p>");
	var x = document.body.offsetWidth/2
	$('#viz').append("<div id=\"sliderDiv1\" align='center' style=\"width:10px;height:350px;margin-left: "+x+"px;margin-right: auto;position:absolute;\"></div>");
	$('#viz').append("<div id=\"sliderDiv\" align='center' style=\"width:10px;height:350px;margin-left: "+x+"px;margin-right: auto;z-index:10;\"></div>");

	d3.select('#sliderDiv1').call(d3.slider().value(50).orientation("vertical")).style("opacity",0.5);

	d3.select('#sliderDiv').call(d3.slider().value(50).axis(d3.svg.axis().orient("left").ticks("1")).orientation("vertical").on("slide", function(evt, value) {
		 $("#nextbutton").show();
	 	 var currentdate = new Date(); 
	  var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

    logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"vertical_slider_2","value":value,"start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});	

    }));

	d3.select(".d3-slider-axis.d3-slider-axis-left").selectAll("text").each(function(d){
    	//console.log(d)
    	if(d=="100"){
    		d3.select(this).text("low")
    	}else if(d=="0"){
    		d3.select(this).text("high")
    	}
    })
}

function drawQ73(){
var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"vertical_slider_3","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});

	$("#mycanvas").hide();
	$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
	d3.selectAll("svg").remove();
	$("#questiontext").html("<p>Make the slider box's position <b>75%</b> of its current value.</p>");
	var x = document.body.offsetWidth/2
	$('#viz').append("<div id=\"sliderDiv1\" align='center' style=\"width:10px;height:350px;margin-left: "+x+"px;margin-right: auto;position:absolute;\"></div>");
	$('#viz').append("<div id=\"sliderDiv\" align='center' style=\"width:10px;height:350px;margin-left: "+x+"px;margin-right: auto;z-index:10;\"></div>");

	d3.select('#sliderDiv1').call(d3.slider().value(50).orientation("vertical")).style("opacity",0.5);

	d3.select('#sliderDiv').call(d3.slider().value(50).axis(d3.svg.axis().orient("left").ticks("1")).orientation("vertical").on("slide", function(evt, value) {
		 $("#nextbutton").show();
	 	 var currentdate = new Date(); 
	  var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

    logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"vertical_slider_3","value":value,"start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});	

    }));

	d3.select(".d3-slider-axis.d3-slider-axis-left").selectAll("text").each(function(d){
    	//console.log(d)
    	if(d=="100"){
    		d3.select(this).text("low")
    	}else if(d=="0"){
    		d3.select(this).text("high")
    	}
    })
}

function drawQ74(){
var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"vertical_slider_4","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});

	$("#mycanvas").hide();
	$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
	d3.selectAll("svg").remove();
	$("#questiontext").html("<p>Make the slider box's position <b>125%</b> of its current value.</p>");
	var x = document.body.offsetWidth/2
	$('#viz').append("<div id=\"sliderDiv1\" align='center' style=\"width:10px;height:350px;margin-left: "+x+"px;margin-right: auto;position:absolute;\"></div>");
	$('#viz').append("<div id=\"sliderDiv\" align='center' style=\"width:10px;height:350px;margin-left: "+x+"px;margin-right: auto;z-index:10;\"></div>");

	d3.select('#sliderDiv1').call(d3.slider().value(50).orientation("vertical")).style("opacity",0.5);

	d3.select('#sliderDiv').call(d3.slider().value(50).axis(d3.svg.axis().orient("left").ticks("1")).orientation("vertical").on("slide", function(evt, value) {

		 $("#nextbutton").show();
	 	 var currentdate = new Date(); 
	  var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

    logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"vertical_slider_4","value":value,"start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});	

    }));

	d3.select(".d3-slider-axis.d3-slider-axis-left").selectAll("text").each(function(d){
    	//console.log(d)
    	if(d=="100"){
    		d3.select(this).text("low")
    	}else if(d=="0"){
    		d3.select(this).text("high")
    	}
    })
}

function drawQ75(){
var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"vertical_slider_5","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});

	$("#mycanvas").hide();
	$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
	d3.selectAll("svg").remove();
	$("#questiontext").html("<p>Make the slider box's position <b>150%</b> of its current value.</p>");
	var x = document.body.offsetWidth/2
	$('#viz').append("<div id=\"sliderDiv1\" align='center' style=\"width:10px;height:350px;margin-left: "+x+"px;margin-right: auto;position:absolute;\"></div>");
	$('#viz').append("<div id=\"sliderDiv\" align='center' style=\"width:10px;height:350px;margin-left: "+x+"px;margin-right: auto;z-index:10;\"></div>");

	d3.select('#sliderDiv1').call(d3.slider().value(50).orientation("vertical")).style("opacity",0.5);

	d3.select('#sliderDiv').call(d3.slider().value(50).axis(d3.svg.axis().orient("left").ticks("1")).orientation("vertical").on("slide", function(evt, value) {

		 $("#nextbutton").show();
	 	 var currentdate = new Date(); 
	  var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

    logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"vertical_slider_5","value":value,"start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});	

    }));

	d3.select(".d3-slider-axis.d3-slider-axis-left").selectAll("text").each(function(d){
    	//console.log(d)
    	if(d=="100"){
    		d3.select(this).text("low")
    	}else if(d=="0"){
    		d3.select(this).text("high")
    	}
    })
}

function drawQ76(){
var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"vertical_slider_6","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});

	$("#mycanvas").hide();
	$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
	d3.selectAll("svg").remove();
	$("#questiontext").html("<p>Make the slider box's position <b>175%</b> of its current value.</p>");
	var x = document.body.offsetWidth/2
	$('#viz').append("<div id=\"sliderDiv1\" align='center' style=\"width:10px;height:350px;margin-left: "+x+"px;margin-right: auto;position:absolute;\"></div>");
	$('#viz').append("<div id=\"sliderDiv\" align='center' style=\"width:10px;height:350px;margin-left: "+x+"px;margin-right: auto;z-index:10;\"></div>");

	d3.select('#sliderDiv1').call(d3.slider().value(50).orientation("vertical")).style("opacity",0.5);

	d3.select('#sliderDiv').call(d3.slider().value(50).axis(d3.svg.axis().orient("left").ticks("1")).orientation("vertical").on("slide", function(evt, value) {

		 $("#nextbutton").show();
	 	 var currentdate = new Date(); 
	  var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

    logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"vertical_slider_6","value":value,"start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});	

    }));

	d3.select(".d3-slider-axis.d3-slider-axis-left").selectAll("text").each(function(d){
    	//console.log(d)
    	if(d=="100"){
    		d3.select(this).text("low")
    	}else if(d=="0"){
    		d3.select(this).text("high")
    	}
    })
}

function drawQ77(){
var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"vertical_slider_7","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});

	$("#mycanvas").hide();
	$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
	d3.selectAll("svg").remove();
	$("#questiontext").html("<p>Make the slider box's position <b>200%</b> of its current value.</p>");
	var x = document.body.offsetWidth/2
	$('#viz').append("<div id=\"sliderDiv1\" align='center' style=\"width:10px;height:350px;margin-left: "+x+"px;margin-right: auto;position:absolute;\"></div>");
	$('#viz').append("<div id=\"sliderDiv\" align='center' style=\"width:10px;height:350px;margin-left: "+x+"px;margin-right: auto;z-index:10;\"></div>");

	d3.select('#sliderDiv1').call(d3.slider().value(50).orientation("vertical")).style("opacity",0.5);

	d3.select('#sliderDiv').call(d3.slider().value(50).axis(d3.svg.axis().orient("left").ticks("1")).orientation("vertical").on("slide", function(evt, value) {

		 $("#nextbutton").show();
	 	 var currentdate = new Date(); 
	  var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

    logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"vertical_slider_7","value":value,"start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});	

    }));

	d3.select(".d3-slider-axis.d3-slider-axis-left").selectAll("text").each(function(d){
    	//console.log(d)
    	if(d=="100"){
    		d3.select(this).text("low")
    	}else if(d=="0"){
    		d3.select(this).text("high")
    	}
    })
}


//-------------------
//Vertical Target Questions
//-------------------


function drawQ78(){
		var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"vertical_direction_1","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});

		$("#mycanvas").hide();
		$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
		d3.selectAll("svg").remove();
		$("#questiontext").html("<p>Move the circle such that the distance from the target (gray rectangle on the right) is <b>50%</b> of its current value.</p>");

		var svg, frameGroup, dragRect, dragBarTop, dragBarRight, rotateHandler,
	    x = 200, y = 250,
	    angle = 0,
	    width = 200, height = 100,
	    bar = 6,
	    that = this;

	svg = d3.select('#viz').append('svg').attr({
	    width: 1000,
	    height: 700
	});
	svg.append("rect")
	       .attr("x",0)
	       .attr("y",0)
	       .attr("width",1000)
	       .attr("height",700)
	       .attr("fill","white")
	       .style("stroke","black");


	frameGroup = svg.append('g')
	.attr({
	    'class': 'dummy frameGroup'
	});

	targetRect = frameGroup.append('rect')
	.attr('class', 'targetRect')
	.attr('fill', 'black')
	.style('fill-opacity', '0.4')
	.attr("x",470)
	.attr("y",50)
	.attr("width",50)
	.attr("height",5);

			frameGroup.append('circle')
					  .attr('class','dummy dragCircleRightStatic')				  
					  .attr('r',8)
					  .attr('cx',493)
					  .attr('cy',255)
					  .style('fill','black')
					  .style('fill-opacity',0.2);

	dragCircleRight = frameGroup.append('circle')
	.attr('class', 'dummy dragCircleRight')
	.attr('r',8)
	.attr('cx',x+93)
	.attr('cy',5)
	.attr('fill', 'black')
	.attr('cursor', 'ns-resize')
	.call(d3.behavior.drag().on('drag', function() {
	    //x = x + d3.event.dx;
	    y = y + d3.event.dy;
	    $("#nextbutton").show();
	    positionate();
	}));



	var skipLog=1;
	positionate();

	function positionate() {
	    var rotate, translate;
	    
	    //rotate = ' rotate(' + angle + ', ' + (-1 * width / 2) + ', ' + (height / 2) + ')';
	    translate = 'translate(' + (x) + ',' + y + ')';
	    dragCircleRight.attr('transform', translate );
	    //console.log(x)
	    var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

	               /* console.log(900-(x+200))
	                console.log("x="+x)*/
	    //console.log(-1*(50-y))
	    if(skipLog!=1){
	    	logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"vertical_direction_1","value":-1*(50-y),"start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});
	    }
	    skipLog=0;    
	}

}


function drawQ79(){
		var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"vertical_direction_2","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});

		$("#mycanvas").hide();
		$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
		d3.selectAll("svg").remove();
		$("#questiontext").html("<p>Move the circle such that the distance from the target (gray rectangle on the right) is <b>25%</b> of its current value.</p>");

		var svg, frameGroup, dragRect, dragBarTop, dragBarRight, rotateHandler,
	    x = 200, y = 250,
	    angle = 0,
	    width = 200, height = 100,
	    bar = 6,
	    that = this;

	svg = d3.select('#viz').append('svg').attr({
	    width: 1000,
	    height: 700
	});
	svg.append("rect")
	       .attr("x",0)
	       .attr("y",0)
	       .attr("width",1000)
	       .attr("height",700)
	       .attr("fill","white")
	       .style("stroke","black");


	frameGroup = svg.append('g')
	.attr({
	    'class': 'dummy frameGroup'
	});

	targetRect = frameGroup.append('rect')
	.attr('class', 'targetRect')
	.attr('fill', 'black')
	.style('fill-opacity', '0.4')
	.attr("x",470)
	.attr("y",50)
	.attr("width",50)
	.attr("height",5);

			frameGroup.append('circle')
					  .attr('class','dummy dragCircleRightStatic')				  
					  .attr('r',8)
					  .attr('cx',493)
					  .attr('cy',255)
					  .style('fill','black')
					  .style('fill-opacity',0.2);

	dragCircleRight = frameGroup.append('circle')
	.attr('class', 'dummy dragCircleRight')
	.attr('r',8)
	.attr('cx',x+93)
	.attr('cy',5)
	.attr('fill', 'black')
	.attr('cursor', 'ns-resize')
	.call(d3.behavior.drag().on('drag', function() {
	    //x = x + d3.event.dx;
	    y = y + d3.event.dy;
	    $("#nextbutton").show();
	    positionate();
	}));



	var skipLog=1;
	positionate();

	function positionate() {
	    var rotate, translate;
	    
	    //rotate = ' rotate(' + angle + ', ' + (-1 * width / 2) + ', ' + (height / 2) + ')';
	    translate = 'translate(' + (x) + ',' + y + ')';
	    dragCircleRight.attr('transform', translate );
	    //console.log(x)
	    var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

	               /* console.log(900-(x+200))
	                console.log("x="+x)*/
	    //console.log(-1*(50-y))
	    if(skipLog!=1){
	    	logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"vertical_direction_2","value":-1*(50-y),"start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});
	    }
	    skipLog=0;    
	}
}

function drawQ80(){
		var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"vertical_direction_3","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});

		$("#mycanvas").hide();
		$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
		d3.selectAll("svg").remove();
		$("#questiontext").html("<p>Move the circle such that the distance from the target (gray rectangle on the right) is <b>75%</b> of its current value.</p>");

		var svg, frameGroup, dragRect, dragBarTop, dragBarRight, rotateHandler,
	    x = 200, y = 250,
	    angle = 0,
	    width = 200, height = 100,
	    bar = 6,
	    that = this;

	svg = d3.select('#viz').append('svg').attr({
	    width: 1000,
	    height: 700
	});
	svg.append("rect")
	       .attr("x",0)
	       .attr("y",0)
	       .attr("width",1000)
	       .attr("height",700)
	       .attr("fill","white")
	       .style("stroke","black");


	frameGroup = svg.append('g')
	.attr({
	    'class': 'dummy frameGroup'
	});

	targetRect = frameGroup.append('rect')
	.attr('class', 'targetRect')
	.attr('fill', 'black')
	.style('fill-opacity', '0.4')
	.attr("x",470)
	.attr("y",50)
	.attr("width",50)
	.attr("height",5);

			frameGroup.append('circle')
					  .attr('class','dummy dragCircleRightStatic')				  
					  .attr('r',8)
					  .attr('cx',493)
					  .attr('cy',255)
					  .style('fill','black')
					  .style('fill-opacity',0.2);

	dragCircleRight = frameGroup.append('circle')
	.attr('class', 'dummy dragCircleRight')
	.attr('r',8)
	.attr('cx',x+93)
	.attr('cy',5)
	.attr('fill', 'black')
	.attr('cursor', 'ns-resize')
	.call(d3.behavior.drag().on('drag', function() {
	    //x = x + d3.event.dx;
	    y = y + d3.event.dy;
	    $("#nextbutton").show();
	    positionate();
	}));



	var skipLog=1;
	positionate();

	function positionate() {
	    var rotate, translate;
	    
	    //rotate = ' rotate(' + angle + ', ' + (-1 * width / 2) + ', ' + (height / 2) + ')';
	    translate = 'translate(' + (x) + ',' + y + ')';
	    dragCircleRight.attr('transform', translate );
	    //console.log(x)
	    var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

	               /* console.log(900-(x+200))
	                console.log("x="+x)*/
	    //console.log(-1*(50-y))
	    if(skipLog!=1){
	    	logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"vertical_direction_3","value":-1*(50-y),"start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});
	    }
	    skipLog=0;    
	}
}

function drawQ81(){
		var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"vertical_direction_4","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});

		$("#mycanvas").hide();
		$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
		d3.selectAll("svg").remove();
		$("#questiontext").html("<p>Move the circle such that the distance from the target (gray rectangle on the right) is <b>125%</b> of its current value.</p>");

		var svg, frameGroup, dragRect, dragBarTop, dragBarRight, rotateHandler,
	    x = 200, y = 250,
	    angle = 0,
	    width = 200, height = 100,
	    bar = 6,
	    that = this;

	svg = d3.select('#viz').append('svg').attr({
	    width: 1000,
	    height: 700
	});
	svg.append("rect")
	       .attr("x",0)
	       .attr("y",0)
	       .attr("width",1000)
	       .attr("height",700)
	       .attr("fill","white")
	       .style("stroke","black");


	frameGroup = svg.append('g')
	.attr({
	    'class': 'dummy frameGroup'
	});

	targetRect = frameGroup.append('rect')
	.attr('class', 'targetRect')
	.attr('fill', 'black')
	.style('fill-opacity', '0.4')
	.attr("x",470)
	.attr("y",50)
	.attr("width",50)
	.attr("height",5);

			frameGroup.append('circle')
					  .attr('class','dummy dragCircleRightStatic')				  
					  .attr('r',8)
					  .attr('cx',493)
					  .attr('cy',255)
					  .style('fill','black')
					  .style('fill-opacity',0.2);

	dragCircleRight = frameGroup.append('circle')
	.attr('class', 'dummy dragCircleRight')
	.attr('r',8)
	.attr('cx',x+93)
	.attr('cy',5)
	.attr('fill', 'black')
	.attr('cursor', 'ns-resize')
	.call(d3.behavior.drag().on('drag', function() {
	    //x = x + d3.event.dx;
	    y = y + d3.event.dy;
	    $("#nextbutton").show();
	    positionate();
	}));



	var skipLog=1;
	positionate();

	function positionate() {
	    var rotate, translate;
	    
	    //rotate = ' rotate(' + angle + ', ' + (-1 * width / 2) + ', ' + (height / 2) + ')';
	    translate = 'translate(' + (x) + ',' + y + ')';
	    dragCircleRight.attr('transform', translate );
	    //console.log(x)
	    var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

	               /* console.log(900-(x+200))
	                console.log("x="+x)*/
	    //console.log(-1*(50-y))
	    if(skipLog!=1){
	    	logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"vertical_direction_4","value":-1*(50-y),"start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});
	    }
	    skipLog=0;    
	}
}

function drawQ82(){
		var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"vertical_direction_5","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});

		$("#mycanvas").hide();
		$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
		d3.selectAll("svg").remove();
		$("#questiontext").html("<p>Move the circle such that the distance from the target (gray rectangle on the right) is <b>150%</b> of its current value.</p>");

		var svg, frameGroup, dragRect, dragBarTop, dragBarRight, rotateHandler,
	    x = 200, y = 250,
	    angle = 0,
	    width = 200, height = 100,
	    bar = 6,
	    that = this;

	svg = d3.select('#viz').append('svg').attr({
	    width: 1000,
	    height: 700
	});
	svg.append("rect")
	       .attr("x",0)
	       .attr("y",0)
	       .attr("width",1000)
	       .attr("height",700)
	       .attr("fill","white")
	       .style("stroke","black");


	frameGroup = svg.append('g')
	.attr({
	    'class': 'dummy frameGroup'
	});

	targetRect = frameGroup.append('rect')
	.attr('class', 'targetRect')
	.attr('fill', 'black')
	.style('fill-opacity', '0.4')
	.attr("x",470)
	.attr("y",50)
	.attr("width",50)
	.attr("height",5);

			frameGroup.append('circle')
					  .attr('class','dummy dragCircleRightStatic')				  
					  .attr('r',8)
					  .attr('cx',493)
					  .attr('cy',255)
					  .style('fill','black')
					  .style('fill-opacity',0.2);

	dragCircleRight = frameGroup.append('circle')
	.attr('class', 'dummy dragCircleRight')
	.attr('r',8)
	.attr('cx',x+93)
	.attr('cy',5)
	.attr('fill', 'black')
	.attr('cursor', 'ns-resize')
	.call(d3.behavior.drag().on('drag', function() {
	    //x = x + d3.event.dx;
	    y = y + d3.event.dy;
	    $("#nextbutton").show();
	    positionate();
	}));



	var skipLog=1;
	positionate();

	function positionate() {
	    var rotate, translate;
	    
	    //rotate = ' rotate(' + angle + ', ' + (-1 * width / 2) + ', ' + (height / 2) + ')';
	    translate = 'translate(' + (x) + ',' + y + ')';
	    dragCircleRight.attr('transform', translate );
	    //console.log(x)
	    var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

	               /* console.log(900-(x+200))
	                console.log("x="+x)*/
	    //console.log(-1*(50-y))
	    if(skipLog!=1){
	    	logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"vertical_direction_5","value":-1*(50-y),"start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});
	    }
	    skipLog=0;    
	}
}

function drawQ83(){
		var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"vertical_direction_6","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});

		$("#mycanvas").hide();
		$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
		d3.selectAll("svg").remove();
		$("#questiontext").html("<p>Move the circle such that the distance from the target (gray rectangle on the right) is <b>175%</b> of its current value.</p>");

		var svg, frameGroup, dragRect, dragBarTop, dragBarRight, rotateHandler,
	    x = 200, y = 250,
	    angle = 0,
	    width = 200, height = 100,
	    bar = 6,
	    that = this;

	svg = d3.select('#viz').append('svg').attr({
	    width: 1000,
	    height: 700
	});
	svg.append("rect")
	       .attr("x",0)
	       .attr("y",0)
	       .attr("width",1000)
	       .attr("height",700)
	       .attr("fill","white")
	       .style("stroke","black");


	frameGroup = svg.append('g')
	.attr({
	    'class': 'dummy frameGroup'
	});

	targetRect = frameGroup.append('rect')
	.attr('class', 'targetRect')
	.attr('fill', 'black')
	.style('fill-opacity', '0.4')
	.attr("x",470)
	.attr("y",50)
	.attr("width",50)
	.attr("height",5);

			frameGroup.append('circle')
					  .attr('class','dummy dragCircleRightStatic')				  
					  .attr('r',8)
					  .attr('cx',493)
					  .attr('cy',255)
					  .style('fill','black')
					  .style('fill-opacity',0.2);

	dragCircleRight = frameGroup.append('circle')
	.attr('class', 'dummy dragCircleRight')
	.attr('r',8)
	.attr('cx',x+93)
	.attr('cy',5)
	.attr('fill', 'black')
	.attr('cursor', 'ns-resize')
	.call(d3.behavior.drag().on('drag', function() {
	    //x = x + d3.event.dx;
	    y = y + d3.event.dy;
	    $("#nextbutton").show();
	    positionate();
	}));



	var skipLog=1;
	positionate();

	function positionate() {
	    var rotate, translate;
	    
	    //rotate = ' rotate(' + angle + ', ' + (-1 * width / 2) + ', ' + (height / 2) + ')';
	    translate = 'translate(' + (x) + ',' + y + ')';
	    dragCircleRight.attr('transform', translate );
	    //console.log(x)
	    var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

	               /* console.log(900-(x+200))
	                console.log("x="+x)*/
	    //console.log(-1*(50-y))
	    if(skipLog!=1){
	    	logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"vertical_direction_6","value":-1*(50-y),"start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});
	    }
	    skipLog=0;    
	}
}

function drawQ84(){
		var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
		logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"vertical_direction_7","value":"","start_value":"false","end_value":"false","is_question_startTime":"true","is_question_endTime":"false","questionNumber":questionCount+1});

		$("#mycanvas").hide();
		$("#sliderDiv").remove();
		$("#sliderDiv1").remove();
		$("#increaseButton").hide();
		$("#decreaseButton").hide();
		d3.selectAll("svg").remove();
		$("#questiontext").html("<p>Move the circle such that the distance from the target (gray rectangle on the right) is <b>200%</b> of its current value.</p>");

		var svg, frameGroup, dragRect, dragBarTop, dragBarRight, rotateHandler,
	    x = 200, y = 250,
	    angle = 0,
	    width = 200, height = 100,
	    bar = 6,
	    that = this;

	svg = d3.select('#viz').append('svg').attr({
	    width: 1000,
	    height: 700
	});
	svg.append("rect")
	       .attr("x",0)
	       .attr("y",0)
	       .attr("width",1000)
	       .attr("height",700)
	       .attr("fill","white")
	       .style("stroke","black");


	frameGroup = svg.append('g')
	.attr({
	    'class': 'dummy frameGroup'
	});

	targetRect = frameGroup.append('rect')
	.attr('class', 'targetRect')
	.attr('fill', 'black')
	.style('fill-opacity', '0.4')
	.attr("x",470)
	.attr("y",50)
	.attr("width",50)
	.attr("height",5);

			frameGroup.append('circle')
					  .attr('class','dummy dragCircleRightStatic')				  
					  .attr('r',8)
					  .attr('cx',493)
					  .attr('cy',255)
					  .style('fill','black')
					  .style('fill-opacity',0.2);

	dragCircleRight = frameGroup.append('circle')
	.attr('class', 'dummy dragCircleRight')
	.attr('r',8)
	.attr('cx',x+93)
	.attr('cy',5)
	.attr('fill', 'black')
	.attr('cursor', 'ns-resize')
	.call(d3.behavior.drag().on('drag', function() {
	    //x = x + d3.event.dx;
	    y = y + d3.event.dy;
	    $("#nextbutton").show();
	    positionate();
	}));



	var skipLog=1;
	positionate();

	function positionate() {
	    var rotate, translate;
	    
	    //rotate = ' rotate(' + angle + ', ' + (-1 * width / 2) + ', ' + (height / 2) + ')';
	    translate = 'translate(' + (x) + ',' + y + ')';
	    dragCircleRight.attr('transform', translate );
	    //console.log(x)
	    var currentdate = new Date(); 
		var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();

	               /* console.log(900-(x+200))
	                console.log("x="+x)*/
	    //console.log(-1*(50-y))
	    if(skipLog!=1){
	    	logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":"vertical_direction_7","value":-1*(50-y),"start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"false","questionNumber":questionCount});
	    }
	    skipLog=0;    
	}

}

//-------------------
//Logging function
//-------------------
function sendLogs(){
	if(skipSendLogs==1){
		skipSendLogs=0;
	}else{
	var currentdate = new Date(); 
	var datetime = currentdate.getHours()+":"+currentdate.getMinutes()+":"+currentdate.getSeconds()+":"+currentdate.getMilliseconds();
	logs.push({"user":sessionUserId,"userPlatform":userPlatform,"questionset":currentQuestionSetIndex,"datetime":datetime,"question":logs[logs.length-1]['question'],"value":"","start_value":"false","end_value":"false","is_question_startTime":"false","is_question_endTime":"true","questionNumber":questionCount});

		var len = logs.length;
		logs[1]['start_value']="true";	
		logs[len-2]['end_value']="true";		
		var i;
		var cur=0;
		divisions = parseInt(len/25);
		//console.log(len)
		
		for(i=0;i<divisions;i++){			
			LE.log(JSON.stringify(logs.slice(cur,(cur+25))));
			//console.log(cur,(cur+25)-1)
			cur = cur+25;
		}
		if(cur<=len-1){
			LE.log(JSON.stringify(logs.slice(cur,len)));
			//console.log(cur,(len)-1)
		}
		

		//console.log(JSON.stringify(logs[len-1]))
		//console.log(JSON.stringify(logs))
		//console.log(logs)

		/*LE.log(JSON.stringify(logs.slice(0,parseInt(len*0.2))));
		LE.log(JSON.stringify(logs.slice(parseInt(len*0.2),parseInt(len*0.4))));
		LE.log(JSON.stringify(logs.slice(parseInt(len*0.4),parseInt(len*0.6))));
		LE.log(JSON.stringify(logs.slice(parseInt(len*0.6),parseInt(len*0.8))));
		LE.log(JSON.stringify(logs.slice(parseInt(len*0.8),parseInt(len))));*/
		/*for(var i=0;i<logs.length;i++){
	    		if(i==1){
	    			logs[i]['start_value']="true";	
	    		}
	    		if(i==logs.length-2){
	    			logs[i]['end_value']="true";		
	    		}
	    		LE.log(logs[i])
	        	//LE.log("{\"user\":\""+logs[i]['user']+"\",\"userPlatform\":\""+logs[i]['userPlatform']+"\",\"questionset\":\""+logs[i]['questionset']+"\",\"timestamp\":\""+logs[i]['datetime']+"\",\"question\":\""+logs[i]['question']+"\",\"value\":\""+logs[i]['value']+"\",\"start_value\":\""+logs[i]['start_value']+"\",\"end_value\":\""+logs[i]['end_value']+"\""+",\"is_question_startTime\":\""+logs[i]['is_question_startTime']+"\",\"is_question_endTime\":\""+logs[i]['is_question_endTime']+"\",\"questionNumber\":\""+logs[i]['questionNumber']+"\"}");
	    }*/
	    submitPressed = 1;
	}
}
</script>
</html>